/*! React InstantSearchCore UNRELEASED | Â© Algolia, inc. | https://github.com/algolia/instantsearch */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e=e||self).ReactInstantSearchCore={},e.React)}(this,function(e,b){"use strict";var s="default"in b?b.default:b,C="7.22.1";function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function H(e,t,r){(t=function(e){e=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:e+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}function L(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function p(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?L(Object(r),!0).forEach(function(e){H(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function $(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n={};for(r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),a=0;a<i.length;a++)r=i[a],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||function(e,t){{var r;if(e)return"string"==typeof e?W(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?W(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}var Q=r;function B(e){return"function"==typeof e}function q(e){return"object"==typeof e&&null!==e}function V(e){return void 0===e}r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,n,i,a,o,c;if((this._events||(this._events={}),"error"===e)&&(!this._events.error||q(this._events.error)&&!this._events.error.length))throw(c=arguments[1])instanceof Error?c:((o=new Error('Uncaught, unspecified "error" event. ('+c+")")).context=c,o);if(V(t=this._events[e]))return!1;if(B(t))switch(arguments.length){case 1:t.call(this);break;case 2:t.call(this,arguments[1]);break;case 3:t.call(this,arguments[1],arguments[2]);break;default:n=Array.prototype.slice.call(arguments,1),t.apply(this,n)}else if(q(t))for(n=Array.prototype.slice.call(arguments,1),r=(a=t.slice()).length,i=0;i<r;i++)a[i].apply(this,n);return!0},r.prototype.on=r.prototype.addListener=function(e,t){if(B(t))return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,B(t.listener)?t.listener:t),this._events[e]?q(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,q(this._events[e])&&!this._events[e].warned&&(t=V(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&0<t&&this._events[e].length>t&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace)&&console.trace(),this;throw TypeError("listener must be a function")},r.prototype.once=function(e,t){var r;if(B(t))return r=!1,n.listener=t,this.on(e,n),this;throw TypeError("listener must be a function");function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}},r.prototype.removeListener=function(e,t){var r,n,i,a;if(!B(t))throw TypeError("listener must be a function");if(this._events&&this._events[e])if(i=(r=this._events[e]).length,n=-1,r===t||B(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(q(r)){for(a=i;0<a--;)if(r[a]===t||r[a].listener&&r[a].listener===t){n=a;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(this._events)if(this._events.removeListener)if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);this.removeAllListeners("removeListener"),this._events={}}else{if(B(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);delete this._events[e]}else 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e];return this},r.prototype.listeners=function(e){e=this._events&&this._events[e]?B(this._events[e])?[this._events[e]]:this._events[e].slice():[];return e},r.prototype.listenerCount=function(e){if(this._events){e=this._events[e];if(B(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)};var J=function(e,t){e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})};function z(e,t,r){this.main=e,this.fn=t,this.recommendFn=r,this.lastResults=null,this.lastRecommendResults=null}J(z,Q),z.prototype.detach=function(){this.removeAllListeners(),this.main.detachDerivedHelper(this)},z.prototype.getModifiedState=function(e){return this.fn(e)},z.prototype.getModifiedRecommendState=function(e){return this.recommendFn(e)};var X=z;var t=function(e){return"string"!=typeof e?e:String(e).replace(/^-/,"\\-")},K=function(e){return"string"!=typeof e?e:e.replace(/^\\-/,"-")};function G(e){return"function"==typeof e||Array.isArray(e)||"[object Object]"===Object.prototype.toString.call(e)}function Z(e,t){var r,n;if(e!==t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&"__proto__"!==i&&"constructor"!==i&&(r=t[i],void 0!==(n=e[i])&&void 0===r||(G(n)&&G(r)?e[i]=Z(n,r):e[i]="object"==typeof(n=r)&&null!==n?Z(Array.isArray(n)?[]:{},n):n));return e}var Y=function(e){G(e)||(e={});for(var t=1,r=arguments.length;t<r;t++){var n=arguments[t];G(n)&&Z(e,n)}return e};var ee=function(e){return e&&0<Object.keys(e).length};var te=function(e,t){if(null===e)return{};for(var r,n={},i=Object.keys(e),a=0;a<i.length;a++)r=i[a],0<=t.indexOf(r)||(n[r]=e[r]);return n};function re(e){this.params=(e=e||{}).params||[]}re.prototype={constructor:re,addParams:function(e){var t=this.params.slice();return t.push(e),new re({params:t})},removeParams:function(t){return new re({params:this.params.filter(function(e){return e.$$id!==t})})},addFrequentlyBoughtTogether:function(e){return this.addParams(Object.assign({},e,{model:"bought-together"}))},addRelatedProducts:function(e){return this.addParams(Object.assign({},e,{model:"related-products"}))},addTrendingItems:function(e){return this.addParams(Object.assign({},e,{model:"trending-items"}))},addTrendingFacets:function(e){return this.addParams(Object.assign({},e,{model:"trending-facets"}))},addLookingSimilar:function(e){return this.addParams(Object.assign({},e,{model:"looking-similar"}))},_buildQueries:function(t,r){return this.params.filter(function(e){return void 0===r[e.$$id]}).map(function(e){e=Object.assign({},e,{indexName:t,threshold:e.threshold||0});return delete e.$$id,e})}};var ne=re;function ie(e,t){this._state=e,this._rawResults={};var r=this;e.params.forEach(function(e){e=e.$$id;r[e]=t[e],r._rawResults[e]=t[e]})}ie.prototype={constructor:ie};var ae=ie;function oe(r){return Object.keys(r).sort().reduce(function(e,t){return e[t]=r[t],e},{})}function ce(){return Array.prototype.slice.call(arguments).reduceRight(function(t,r){return Object.keys(Object(r)).forEach(function(e){void 0!==r[e]&&(void 0!==t[e]&&delete t[e],t[e]=r[e])}),t},{})}var l={_getQueries:function(c,s){var u=[];return u.push({indexName:c,params:l._getHitsSearchParams(s)}),s.getRefinedDisjunctiveFacets().forEach(function(e){u.push({indexName:c,params:l._getDisjunctiveFacetSearchParams(s,e)})}),s.getRefinedHierarchicalFacets().forEach(function(e){var a,o=s.getHierarchicalFacetByName(e),e=s.getHierarchicalRefinement(e),n=s._getHierarchicalFacetSeparator(o);0<e.length&&1<e[0].split(n).length&&(a=e[0].split(n).slice(0,-1).reduce(function(e,t,r){return e.concat({attribute:o.attributes[r],value:0===r?t:[e[e.length-1].value,t].join(n)})},[])).forEach(function(e,t){e=l._getDisjunctiveFacetSearchParams(s,e.attribute,0===t);function n(t){return o.attributes.some(function(e){return e===t.split(":")[0]})}var r=(e.facetFilters||[]).reduce(function(e,t){var r;return Array.isArray(t)&&0<(r=t.filter(function(e){return!n(e)})).length&&e.push(r),"string"!=typeof t||n(t)||e.push(t),e},[]),i=a[t-1];0<t?e.facetFilters=r.concat(i.attribute+":"+i.value):0<r.length?e.facetFilters=r:delete e.facetFilters,u.push({indexName:c,params:e})})}),u},_getCompositionQueries:function(e){return[{compositionID:e.index,requestBody:{params:l._getCompositionHitsSearchParams(e)}}]},_getHitsSearchParams:function(e){var t=e.facets.concat(e.disjunctiveFacets).concat(l._getHitsHierarchicalFacetsAttributes(e)).sort(),r=l._getFacetFilters(e),n=l._getNumericFilters(e),i=l._getTagFilters(e),a={};return 0<t.length&&(a.facets=-1<t.indexOf("*")?["*"]:t),0<i.length&&(a.tagFilters=i),0<r.length&&(a.facetFilters=r),0<n.length&&(a.numericFilters=n),oe(Y({},e.getQueryParams(),a))},_getCompositionHitsSearchParams:function(t){var e=t.facets.concat(t.disjunctiveFacets.map(function(e){return t.disjunctiveFacetsRefinements&&t.disjunctiveFacetsRefinements[e]&&0<t.disjunctiveFacetsRefinements[e].length?"disjunctive("+e+")":e})).concat(l._getHitsHierarchicalFacetsAttributes(t)).sort(),r=l._getFacetFilters(t),n=l._getNumericFilters(t),i=l._getTagFilters(t),a={},e=(0<e.length&&(a.facets=-1<e.indexOf("*")?["*"]:e),0<i.length&&(a.tagFilters=i),0<r.length&&(a.facetFilters=r),0<n.length&&(a.numericFilters=n),t.getQueryParams());return delete e.highlightPreTag,delete e.highlightPostTag,delete e.index,oe(Y({},e,a))},_getDisjunctiveFacetSearchParams:function(e,t,r){var n=l._getFacetFilters(e,t,r),i=l._getNumericFilters(e,t),a=l._getTagFilters(e),o={hitsPerPage:0,page:0,analytics:!1,clickAnalytics:!1},a=(0<a.length&&(o.tagFilters=a),e.getHierarchicalFacetByName(t));return o.facets=a?l._getDisjunctiveHierarchicalFacetAttribute(e,a,r):t,0<i.length&&(o.numericFilters=i),0<n.length&&(o.facetFilters=n),oe(Y({},e.getQueryParams(),o))},_getNumericFilters:function(e,i){var a;return e.numericFilters||(a=[],Object.keys(e.numericRefinements).forEach(function(n){var t=e.numericRefinements[n]||{};Object.keys(t).forEach(function(r){var e=t[r]||[];i!==n&&e.forEach(function(e){var t;Array.isArray(e)?(t=e.map(function(e){return n+r+e}),a.push(t)):a.push(n+r+e)})})}),a)},_getTagFilters:function(e){return e.tagFilters||e.tagRefinements.join(",")},_getFacetFilters:function(o,c,s){var u=[],e=o.facetsRefinements||{},r=(Object.keys(e).sort().forEach(function(t){(e[t]||[]).slice().sort().forEach(function(e){u.push(t+":"+e)})}),o.facetsExcludes||{}),n=(Object.keys(r).sort().forEach(function(t){(r[t]||[]).sort().forEach(function(e){u.push(t+":-"+e)})}),o.disjunctiveFacetsRefinements||{}),l=(Object.keys(n).sort().forEach(function(t){var r,e=n[t]||[];t!==c&&e&&0!==e.length&&(r=[],e.slice().sort().forEach(function(e){r.push(t+":"+e)}),u.push(r))}),o.hierarchicalFacetsRefinements||{});return Object.keys(l).sort().forEach(function(e){var t=(l[e]||[])[0];if(void 0!==t){var r,n=o.getHierarchicalFacetByName(e),i=o._getHierarchicalFacetSeparator(n),a=o._getHierarchicalRootPath(n);if(c===e){if(-1===t.indexOf(i)||!a&&!0===s||a&&a.split(i).length===t.split(i).length)return;t=a?(r=a.split(i).length-1,a):(r=t.split(i).length-2,t.slice(0,t.lastIndexOf(i)))}else r=t.split(i).length-1;(e=n.attributes[r])&&u.push([e+":"+t])}}),u},_getHitsHierarchicalFacetsAttributes:function(i){return i.hierarchicalFacets.reduce(function(e,t){var r,n=i.getHierarchicalRefinement(t.name)[0];return n?(r=i._getHierarchicalFacetSeparator(t),n=n.split(r).length,r=t.attributes.slice(0,n+1),e.concat(r)):(e.push(t.attributes[0]),e)},[])},_getDisjunctiveHierarchicalFacetAttribute:function(e,t,r){var n,i=e._getHierarchicalFacetSeparator(t);return!0===r?(r=0,(n=e._getHierarchicalRootPath(t))&&(r=n.split(i).length),[t.attributes[r]]):(n=(e.getHierarchicalRefinement(t.name)[0]||"").split(i).length-1,t.attributes.slice(0,1+n))},getSearchForFacetQuery:function(e,t,r,n){n=n.isDisjunctiveFacet(e)?n.clearRefinements(e):n,t={facetQuery:t,facetName:e};return"number"==typeof r&&(t.maxFacetHits=r),oe(Y({},l._getHitsSearchParams(n),t))}},se=l,g=function(e,t){if(Array.isArray(e))for(var r=0;r<e.length;r++)if(t(e[r]))return e[r]};var ue=function(r,n){return r.filter(function(e,t){return-1<n.indexOf(e)&&r.indexOf(e)===t})};var le=function e(t){if("number"==typeof t)return t;if("string"==typeof t)return parseFloat(t);if(Array.isArray(t))return t.map(e);throw new Error("The value should be a number, a parsable string or an array of those.")},fe={addRefinement:function(e,t,r){var n;return fe.isRefined(e,t,r)?e:(r=""+r,r=e[t]?e[t].concat(r):[r],(n={})[t]=r,ce(n,e))},removeRefinement:function(e,r,t){var n;return void 0===t?fe.clearRefinement(e,function(e,t){return r===t}):(n=""+t,fe.clearRefinement(e,function(e,t){return r===t&&n===e}))},toggleRefinement:function(e,t,r){if(void 0===r)throw new Error("toggleRefinement should be used with a value");return fe.isRefined(e,t,r)?fe.removeRefinement(e,t,r):fe.addRefinement(e,t,r)},clearRefinement:function(i,a,o){var c,e;return void 0===a?ee(i)?{}:i:"string"==typeof a?te(i,[a]):"function"==typeof a?(c=!1,e=Object.keys(i).reduce(function(e,t){var r=i[t]||[],n=r.filter(function(e){return!a(e,t,o)});return n.length!==r.length&&(c=!0),e[t]=n,e},{}),c?e:i):void 0},isRefined:function(e,t,r){var n=Boolean(e[t])&&0<e[t].length;return void 0!==r&&n?-1!==e[t].indexOf(""+r):n}},n=fe;function he(e,r){return Array.isArray(e)&&Array.isArray(r)?e.length===r.length&&e.every(function(e,t){return he(r[t],e)}):e===r}function o(e){var n=e?o._parseNumbers(e):{},i=(void 0===n.userToken||null!==(e=n.userToken)&&/^[a-zA-Z0-9_-]{1,64}$/.test(e)||console.warn("[algoliasearch-helper] The `userToken` parameter is invalid. This can lead to wrong analytics.\n  - Format: [a-zA-Z0-9_-]{1,64}"),this.facets=n.facets||[],this.disjunctiveFacets=n.disjunctiveFacets||[],this.hierarchicalFacets=n.hierarchicalFacets||[],this.facetsRefinements=n.facetsRefinements||{},this.facetsExcludes=n.facetsExcludes||{},this.disjunctiveFacetsRefinements=n.disjunctiveFacetsRefinements||{},this.numericRefinements=n.numericRefinements||{},this.tagRefinements=n.tagRefinements||[],this.hierarchicalFacetsRefinements=n.hierarchicalFacetsRefinements||{},this);Object.keys(n).forEach(function(e){var t=-1!==o.PARAMETERS.indexOf(e),r=void 0!==n[e];!t&&r&&(i[e]=n[e])})}o.PARAMETERS=Object.keys(new o),o._parseNumbers=function(i){var n,a;return i instanceof o?i:(n={},["aroundPrecision","aroundRadius","getRankingInfo","minWordSizefor2Typos","minWordSizefor1Typo","page","maxValuesPerFacet","distinct","minimumAroundRadius","hitsPerPage","minProximity"].forEach(function(e){var t,r=i[e];"string"==typeof r&&(t=parseFloat(r),n[e]=isNaN(t)?r:t)}),Array.isArray(i.insideBoundingBox)&&(n.insideBoundingBox=i.insideBoundingBox.map(function(e){return Array.isArray(e)?e.map(function(e){return parseFloat(e)}):e})),i.numericRefinements&&(a={},Object.keys(i.numericRefinements).forEach(function(r){var n=i.numericRefinements[r]||{};a[r]={},Object.keys(n).forEach(function(e){var t=n[e].map(function(e){return Array.isArray(e)?e.map(function(e){return"string"==typeof e?parseFloat(e):e}):"string"==typeof e?parseFloat(e):e});a[r][e]=t})}),n.numericRefinements=a),Y(i,n))},o.make=function(e){var r=new o(e);return(e.hierarchicalFacets||[]).forEach(function(e){var t;e.rootPath&&0===(t=(r=0<(t=r.getHierarchicalRefinement(e.name)).length&&0!==t[0].indexOf(e.rootPath)?r.clearRefinements(e.name):r).getHierarchicalRefinement(e.name)).length&&(r=r.toggleHierarchicalFacetRefinement(e.name,e.rootPath))}),r},o.validate=function(e,t){t=t||{};return e.tagFilters&&t.tagRefinements&&0<t.tagRefinements.length?new Error("[Tags] Cannot switch from the managed tag API to the advanced API. It is probably an error, if it is really what you want, you should first clear the tags with clearTags method."):0<e.tagRefinements.length&&t.tagFilters?new Error("[Tags] Cannot switch from the advanced tag API to the managed API. It is probably an error, if it is not, you should first clear the tags with clearTags method."):e.numericFilters&&t.numericRefinements&&ee(t.numericRefinements)?new Error("[Numeric filters] Can't switch from the advanced to the managed API. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):ee(e.numericRefinements)&&t.numericFilters?new Error("[Numeric filters] Can't switch from the managed API to the advanced. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):null},o.prototype={constructor:o,clearRefinements:function(e){e={numericRefinements:this._clearNumericRefinements(e),facetsRefinements:n.clearRefinement(this.facetsRefinements,e,"conjunctiveFacet"),facetsExcludes:n.clearRefinement(this.facetsExcludes,e,"exclude"),disjunctiveFacetsRefinements:n.clearRefinement(this.disjunctiveFacetsRefinements,e,"disjunctiveFacet"),hierarchicalFacetsRefinements:n.clearRefinement(this.hierarchicalFacetsRefinements,e,"hierarchicalFacet")};return e.numericRefinements===this.numericRefinements&&e.facetsRefinements===this.facetsRefinements&&e.facetsExcludes===this.facetsExcludes&&e.disjunctiveFacetsRefinements===this.disjunctiveFacetsRefinements&&e.hierarchicalFacetsRefinements===this.hierarchicalFacetsRefinements?this:this.setQueryParameters(e)},clearTags:function(){return void 0===this.tagFilters&&0===this.tagRefinements.length?this:this.setQueryParameters({tagFilters:void 0,tagRefinements:[]})},setIndex:function(e){return e===this.index?this:this.setQueryParameters({index:e})},setQuery:function(e){return e===this.query?this:this.setQueryParameters({query:e})},setPage:function(e){return e===this.page?this:this.setQueryParameters({page:e})},setFacets:function(e){return this.setQueryParameters({facets:e})},setDisjunctiveFacets:function(e){return this.setQueryParameters({disjunctiveFacets:e})},setHitsPerPage:function(e){return this.hitsPerPage===e?this:this.setQueryParameters({hitsPerPage:e})},setTypoTolerance:function(e){return this.typoTolerance===e?this:this.setQueryParameters({typoTolerance:e})},addNumericRefinement:function(e,t,r){var n,r=le(r);return this.isNumericRefined(e,t,r)?this:((n=Y({},this.numericRefinements))[e]=Y({},n[e]),n[e][t]?(n[e][t]=n[e][t].slice(),n[e][t].push(r)):n[e][t]=[r],this.setQueryParameters({numericRefinements:n}))},getConjunctiveRefinements:function(e){return this.isConjunctiveFacet(e)&&this.facetsRefinements[e]||[]},getDisjunctiveRefinements:function(e){return this.isDisjunctiveFacet(e)&&this.disjunctiveFacetsRefinements[e]||[]},getHierarchicalRefinement:function(e){return this.hierarchicalFacetsRefinements[e]||[]},getExcludeRefinements:function(e){return this.isConjunctiveFacet(e)&&this.facetsExcludes[e]||[]},removeNumericRefinement:function(r,n,e){var i=e;return void 0!==i?this.isNumericRefined(r,n,i)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(e,t){return t===r&&e.op===n&&he(e.val,le(i))})}):this:void 0!==n?this.isNumericRefined(r,n)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(e,t){return t===r&&e.op===n})}):this:this.isNumericRefined(r)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(e,t){return t===r})}):this},getNumericRefinements:function(e){return this.numericRefinements[e]||{}},getNumericRefinement:function(e,t){return this.numericRefinements[e]&&this.numericRefinements[e][t]},_clearNumericRefinements:function(o){var c,t,e;return void 0===o?ee(this.numericRefinements)?{}:this.numericRefinements:"string"==typeof o?te(this.numericRefinements,[o]):"function"==typeof o?(c=!1,t=this.numericRefinements,e=Object.keys(t).reduce(function(e,n){var i=t[n],a={},i=i||{};return Object.keys(i).forEach(function(t){var e=i[t]||[],r=[];e.forEach(function(e){o({val:e,op:t},n,"numeric")||r.push(e)}),r.length!==e.length&&(c=!0),a[t]=r}),e[n]=a,e},{}),c?e:this.numericRefinements):void 0},addFacet:function(e){return this.isConjunctiveFacet(e)?this:this.setQueryParameters({facets:this.facets.concat([e])})},addDisjunctiveFacet:function(e){return this.isDisjunctiveFacet(e)?this:this.setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.concat([e])})},addHierarchicalFacet:function(e){if(this.isHierarchicalFacet(e.name))throw new Error("Cannot declare two hierarchical facets with the same name: `"+e.name+"`");return this.setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.concat([e])})},addFacetRefinement:function(e,t){if(this.isConjunctiveFacet(e))return n.isRefined(this.facetsRefinements,e,t)?this:this.setQueryParameters({facetsRefinements:n.addRefinement(this.facetsRefinements,e,t)});throw new Error(e+" is not defined in the facets attribute of the helper configuration")},addExcludeRefinement:function(e,t){if(this.isConjunctiveFacet(e))return n.isRefined(this.facetsExcludes,e,t)?this:this.setQueryParameters({facetsExcludes:n.addRefinement(this.facetsExcludes,e,t)});throw new Error(e+" is not defined in the facets attribute of the helper configuration")},addDisjunctiveFacetRefinement:function(e,t){if(this.isDisjunctiveFacet(e))return n.isRefined(this.disjunctiveFacetsRefinements,e,t)?this:this.setQueryParameters({disjunctiveFacetsRefinements:n.addRefinement(this.disjunctiveFacetsRefinements,e,t)});throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration")},addTagRefinement:function(e){return this.isTagRefined(e)?this:(e={tagRefinements:this.tagRefinements.concat(e)},this.setQueryParameters(e))},removeFacet:function(t){return this.isConjunctiveFacet(t)?this.clearRefinements(t).setQueryParameters({facets:this.facets.filter(function(e){return e!==t})}):this},removeDisjunctiveFacet:function(t){return this.isDisjunctiveFacet(t)?this.clearRefinements(t).setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.filter(function(e){return e!==t})}):this},removeHierarchicalFacet:function(t){return this.isHierarchicalFacet(t)?this.clearRefinements(t).setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.filter(function(e){return e.name!==t})}):this},removeFacetRefinement:function(e,t){if(this.isConjunctiveFacet(e))return n.isRefined(this.facetsRefinements,e,t)?this.setQueryParameters({facetsRefinements:n.removeRefinement(this.facetsRefinements,e,t)}):this;throw new Error(e+" is not defined in the facets attribute of the helper configuration")},removeExcludeRefinement:function(e,t){if(this.isConjunctiveFacet(e))return n.isRefined(this.facetsExcludes,e,t)?this.setQueryParameters({facetsExcludes:n.removeRefinement(this.facetsExcludes,e,t)}):this;throw new Error(e+" is not defined in the facets attribute of the helper configuration")},removeDisjunctiveFacetRefinement:function(e,t){if(this.isDisjunctiveFacet(e))return n.isRefined(this.disjunctiveFacetsRefinements,e,t)?this.setQueryParameters({disjunctiveFacetsRefinements:n.removeRefinement(this.disjunctiveFacetsRefinements,e,t)}):this;throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration")},removeTagRefinement:function(t){var e;return this.isTagRefined(t)?(e={tagRefinements:this.tagRefinements.filter(function(e){return e!==t})},this.setQueryParameters(e)):this},toggleRefinement:function(e,t){return this.toggleFacetRefinement(e,t)},toggleFacetRefinement:function(e,t){if(this.isHierarchicalFacet(e))return this.toggleHierarchicalFacetRefinement(e,t);if(this.isConjunctiveFacet(e))return this.toggleConjunctiveFacetRefinement(e,t);if(this.isDisjunctiveFacet(e))return this.toggleDisjunctiveFacetRefinement(e,t);throw new Error("Cannot refine the undeclared facet "+e+"; it should be added to the helper options facets, disjunctiveFacets or hierarchicalFacets")},toggleConjunctiveFacetRefinement:function(e,t){if(this.isConjunctiveFacet(e))return this.setQueryParameters({facetsRefinements:n.toggleRefinement(this.facetsRefinements,e,t)});throw new Error(e+" is not defined in the facets attribute of the helper configuration")},toggleExcludeFacetRefinement:function(e,t){if(this.isConjunctiveFacet(e))return this.setQueryParameters({facetsExcludes:n.toggleRefinement(this.facetsExcludes,e,t)});throw new Error(e+" is not defined in the facets attribute of the helper configuration")},toggleDisjunctiveFacetRefinement:function(e,t){if(this.isDisjunctiveFacet(e))return this.setQueryParameters({disjunctiveFacetsRefinements:n.toggleRefinement(this.disjunctiveFacetsRefinements,e,t)});throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration")},toggleHierarchicalFacetRefinement:function(e,t){var r,n;if(this.isHierarchicalFacet(e))return r=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(e)),n={},void 0!==this.hierarchicalFacetsRefinements[e]&&0<this.hierarchicalFacetsRefinements[e].length&&(this.hierarchicalFacetsRefinements[e][0]===t||0===this.hierarchicalFacetsRefinements[e][0].indexOf(t+r))?-1===t.indexOf(r)?n[e]=[]:n[e]=[t.slice(0,t.lastIndexOf(r))]:n[e]=[t],this.setQueryParameters({hierarchicalFacetsRefinements:ce(n,this.hierarchicalFacetsRefinements)});throw new Error(e+" is not defined in the hierarchicalFacets attribute of the helper configuration")},addHierarchicalFacetRefinement:function(e,t){if(this.isHierarchicalFacetRefined(e))throw new Error(e+" is already refined.");var r;if(this.isHierarchicalFacet(e))return(r={})[e]=[t],this.setQueryParameters({hierarchicalFacetsRefinements:ce(r,this.hierarchicalFacetsRefinements)});throw new Error(e+" is not defined in the hierarchicalFacets attribute of the helper configuration.")},removeHierarchicalFacetRefinement:function(e){var t;return this.isHierarchicalFacetRefined(e)?((t={})[e]=[],this.setQueryParameters({hierarchicalFacetsRefinements:ce(t,this.hierarchicalFacetsRefinements)})):this},toggleTagRefinement:function(e){return this.isTagRefined(e)?this.removeTagRefinement(e):this.addTagRefinement(e)},isDisjunctiveFacet:function(e){return-1<this.disjunctiveFacets.indexOf(e)},isHierarchicalFacet:function(e){return void 0!==this.getHierarchicalFacetByName(e)},isConjunctiveFacet:function(e){return-1<this.facets.indexOf(e)},isFacetRefined:function(e,t){return!!this.isConjunctiveFacet(e)&&n.isRefined(this.facetsRefinements,e,t)},isExcludeRefined:function(e,t){return!!this.isConjunctiveFacet(e)&&n.isRefined(this.facetsExcludes,e,t)},isDisjunctiveFacetRefined:function(e,t){return!!this.isDisjunctiveFacet(e)&&n.isRefined(this.disjunctiveFacetsRefinements,e,t)},isHierarchicalFacetRefined:function(e,t){return!!this.isHierarchicalFacet(e)&&(e=this.getHierarchicalRefinement(e),t?-1!==e.indexOf(t):0<e.length)},isNumericRefined:function(e,t,r){var n,i;return void 0===r&&void 0===t?Boolean(this.numericRefinements[e]):(n=this.numericRefinements[e]&&void 0!==this.numericRefinements[e][t],void 0!==r&&n?(r=le(r),t=void 0!==(e=this.numericRefinements[e][t],i=r,g(e,function(e){return he(e,i)})),n&&t):n)},isTagRefined:function(e){return-1!==this.tagRefinements.indexOf(e)},getRefinedDisjunctiveFacets:function(){var t=this,e=ue(Object.keys(this.numericRefinements).filter(function(e){return 0<Object.keys(t.numericRefinements[e]).length}),this.disjunctiveFacets);return Object.keys(this.disjunctiveFacetsRefinements).filter(function(e){return 0<t.disjunctiveFacetsRefinements[e].length}).concat(e).concat(this.getRefinedHierarchicalFacets()).sort()},getRefinedHierarchicalFacets:function(){var t=this;return ue(this.hierarchicalFacets.map(function(e){return e.name}),Object.keys(this.hierarchicalFacetsRefinements).filter(function(e){return 0<t.hierarchicalFacetsRefinements[e].length})).sort()},getUnrefinedDisjunctiveFacets:function(){var t=this.getRefinedDisjunctiveFacets();return this.disjunctiveFacets.filter(function(e){return-1===t.indexOf(e)})},managedParameters:["index","facets","disjunctiveFacets","facetsRefinements","hierarchicalFacets","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements","tagRefinements","hierarchicalFacetsRefinements"],getQueryParams:function(){var r=this.managedParameters,n={},i=this;return Object.keys(this).forEach(function(e){var t=i[e];-1===r.indexOf(e)&&void 0!==t&&(n[e]=t)}),n},setQueryParameter:function(e,t){var r;return this[e]===t?this:((r={})[e]=t,this.setQueryParameters(r))},setQueryParameters:function(e){if(!e)return this;var t=o.validate(this,e);if(t)throw t;var r=this,i=o._parseNumbers(e),t=Object.keys(this).reduce(function(e,t){return e[t]=r[t],e},{}),e=Object.keys(i).reduce(function(e,t){var r=void 0!==e[t],n=void 0!==i[t];return r&&!n?te(e,[t]):(n&&(e[t]=i[t]),e)},t);return new this.constructor(e)},resetPage:function(){return void 0===this.page?this:this.setPage(0)},_getHierarchicalFacetSortBy:function(e){return e.sortBy||["isRefined:desc","name:asc"]},_getHierarchicalFacetSeparator:function(e){return e.separator||" > "},_getHierarchicalRootPath:function(e){return e.rootPath||null},_getHierarchicalShowParentLevel:function(e){return"boolean"!=typeof e.showParentLevel||e.showParentLevel},getHierarchicalFacetByName:function(t){return g(this.hierarchicalFacets,function(e){return e.name===t})},getHierarchicalFacetBreadcrumb:function(e){var t;return this.isHierarchicalFacet(e)&&(t=this.getHierarchicalRefinement(e)[0])?(e=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(e)),t.split(e).map(function(e){return e.trim()})):[]},toString:function(){return JSON.stringify(this,null,2)}};function de(e){return Array.isArray(e)?e.filter(Boolean):[]}function me(e,t){if(Array.isArray(e))for(var r=0;r<e.length;r++)if(t(e[r]))return r;return-1}function pe(e,t){var n=(t||[]).map(function(e){return e.split(":")});return e.reduce(function(e,t){var r=t.split(":"),t=g(n,function(e){return e[0]===r[0]});return 1<r.length||!t?(e[0].push(r[0]),e[1].push(r[1])):(e[0].push(t[0]),e[1].push(t[1])),e},[[],[]])}var ge=o;var ye=function(){return Array.prototype.slice.call(arguments).reduceRight(function(n,i){return Object.keys(Object(i)).forEach(function(e){var t="number"==typeof n[e]?n[e]:0,r=i[e];void 0!==r&&t<=r&&(void 0!==n[e]&&delete n[e],n[e]=r)}),n},{})};var ve=function(e,r,i){return Array.isArray(e)?(Array.isArray(i)||(i=[]),(e=e.map(function(t,e){return{criteria:r.map(function(e){return t[e]}),index:e,value:t}})).sort(function(e,t){for(var r=-1;++r<e.criteria.length;){var n=function(e,t){if(e!==t){var r=void 0!==e,n=null===e,i=void 0!==t,a=null===t;if(!a&&t<e||n&&i||!r)return 1;if(!n&&e<t||a&&r||!i)return-1}return 0}(e.criteria[r],t.criteria[r]);if(n)return!(r>=i.length)&&"desc"===i[r]?-n:n}return e.index-t.index}),e.map(function(e){return e.value})):[]},be=function(m){return function(e,t){function r(e,o,t){var r,c=e;if(0<t){var n=0;for(c=e;n<t;){var i=c&&Array.isArray(c.data)?c.data:[],c=g(i,function(e){return e.isRefined});n++}}return c&&(r=Object.keys(o.data).map(function(e){return[e,o.data[e]]}).filter(function(e){var t,r,n,i,a,e=e[0];return e=e,t=c.path||u,r=f,n=s,a=l,(!(i=u)||0===e.indexOf(i)&&i!==e)&&(!i&&-1===e.indexOf(n)||i&&e.split(n).length-i.split(n).length==1||-1===e.indexOf(n)&&-1===r.indexOf(n)||0===r.indexOf(e)||0===e.indexOf(t+n)&&(a||0===e.indexOf(r)))}),c.data=ve(r.map(function(e){var t,r,n,i,a=e[0],e=e[1];return e=e,a=a,t=s,r=Oe(f),n=o.exhaustive,{name:(i=a.split(t))[i.length-1].trim(),path:a,escapedValue:Se(a),count:e,isRefined:r===a||0===r.indexOf(a+t),exhaustive:n,data:null}}),a[0],a[1])),e}var a,s,u,l,f,n=m.hierarchicalFacets[t],i=m.hierarchicalFacetsRefinements[n.name]&&m.hierarchicalFacetsRefinements[n.name][0]||"",o=m._getHierarchicalFacetSeparator(n),c=m._getHierarchicalRootPath(n),h=m._getHierarchicalShowParentLevel(n),n=pe(m._getHierarchicalFacetSortBy(n)),d=e.every(function(e){return e.exhaustive}),n=(a=n,s=o,l=h,f=i,e);return(n=(u=c)?e.slice(c.split(o).length):n).reduce(r,{name:m.hierarchicalFacets[t].name,count:null,isRefined:!0,path:null,escapedValue:null,exhaustive:d,data:null})}},Se=t,Oe=K;var je=t,we=K;function Pe(e){var r={};return e.forEach(function(e,t){r[e]=t}),r}function Re(e,t,r){t&&t[r]&&(e.stats=t[r])}function Ee(l,t,e){var c=t[0]||{},f=(this._rawResults=t,this),r=(Object.keys(c).forEach(function(e){f[e]=c[e]}),ce(e,{persistHierarchicalRootCount:!1})),e=(Object.keys(r).forEach(function(e){f[e]=r[e]}),this.processingTimeMS=t.reduce(function(e,t){return void 0===t.processingTimeMS?e:e+t.processingTimeMS},0),this.disjunctiveFacets=[],this.hierarchicalFacets=l.hierarchicalFacets.map(function(){return[]}),this.facets=[],l.getRefinedDisjunctiveFacets()),s=Pe(l.facets),u=Pe(l.disjunctiveFacets),n=1,h=c.facets||{};Object.keys(h).forEach(function(e){var t,r,n,i,a=h[e],o=(n=l.hierarchicalFacets,t=e,g(n,function(e){return-1<(e.attributes||[]).indexOf(t)}));o?(n=o.attributes.indexOf(e),r=me(l.hierarchicalFacets,function(e){return e.name===o.name}),f.hierarchicalFacets[r][n]={attribute:e,data:a,exhaustive:c.exhaustiveFacetsCount}):(r=-1!==l.disjunctiveFacets.indexOf(e),n=-1!==l.facets.indexOf(e),r&&(i=u[e],f.disjunctiveFacets[i]={name:e,data:a,exhaustive:c.exhaustiveFacetsCount},Re(f.disjunctiveFacets[i],c.facets_stats,e)),n&&(i=s[e],f.facets[i]={name:e,data:a,exhaustive:c.exhaustiveFacetsCount},Re(f.facets[i],c.facets_stats,e)))}),this.hierarchicalFacets=de(this.hierarchicalFacets),e.forEach(function(e){var i=t[n],a=i&&i.facets?i.facets:{},o=l.getHierarchicalFacetByName(e);Object.keys(a).forEach(function(t){var r,e,n=a[t];o?(r=me(l.hierarchicalFacets,function(e){return e.name===o.name}),-1!==(e=me(f.hierarchicalFacets[r],function(e){return e.attribute===t}))&&(f.hierarchicalFacets[r][e].data=f.persistHierarchicalRootCount?ye(f.hierarchicalFacets[r][e].data,n):ce(n,f.hierarchicalFacets[r][e].data))):(r=u[t],e=c.facets&&c.facets[t]||{},f.disjunctiveFacets[r]={name:t,data:ye(e,n),exhaustive:i.exhaustiveFacetsCount},Re(f.disjunctiveFacets[r],i.facets_stats,t),l.disjunctiveFacetsRefinements[t]&&l.disjunctiveFacetsRefinements[t].forEach(function(e){!f.disjunctiveFacets[r].data[e]&&-1<l.disjunctiveFacetsRefinements[t].indexOf(we(e))&&(f.disjunctiveFacets[r].data[e]=0)}))}),n++}),l.getRefinedHierarchicalFacets().forEach(function(e){var c=l.getHierarchicalFacetByName(e),s=l._getHierarchicalFacetSeparator(c),u=l.getHierarchicalRefinement(e);0===u.length||u[0].split(s).length<2||t.slice(n).forEach(function(e){var o=e&&e.facets?e.facets:{};Object.keys(o).forEach(function(t){var e,r,n=o[t],i=me(l.hierarchicalFacets,function(e){return e.name===c.name}),a=me(f.hierarchicalFacets[i],function(e){return e.attribute===t});-1!==a&&(e={},0<u.length&&!f.persistHierarchicalRootCount&&(e[r=u[0].split(s)[0]]=f.hierarchicalFacets[i][a].data[r]),f.hierarchicalFacets[i][a].data=ce(e,n,f.hierarchicalFacets[i][a].data))}),n++})}),Object.keys(l.facetsExcludes).forEach(function(t){var e=l.facetsExcludes[t],r=s[t];f.facets[r]={name:t,data:h[t],exhaustive:c.exhaustiveFacetsCount},e.forEach(function(e){f.facets[r]=f.facets[r]||{name:t},f.facets[r].data=f.facets[r].data||{},f.facets[r].data[e]=0})}),this.hierarchicalFacets=this.hierarchicalFacets.map(be(l)),this.facets=de(this.facets),this.disjunctiveFacets=de(this.disjunctiveFacets),this._state=l}function Fe(r,n){function e(e){return e.name===n}var i,a,t,o,c,s;return r._state.isConjunctiveFacet(n)?(i=g(r.facets,e))?Object.keys(i.data).map(function(e){var t=je(e);return{name:e,escapedValue:t,count:i.data[e],isRefined:r._state.isFacetRefined(n,t),isExcluded:r._state.isExcludeRefined(n,e)}}):[]:r._state.isDisjunctiveFacet(n)?(a=g(r.disjunctiveFacets,e))?Object.keys(a.data).map(function(e){var t=je(e);return{name:e,escapedValue:t,count:a.data[e],isRefined:r._state.isDisjunctiveFacetRefined(n,t)}}):[]:r._state.isHierarchicalFacet(n)?((t=g(r.hierarchicalFacets,e))&&(s=r._state.getHierarchicalFacetByName(n),o=r._state._getHierarchicalFacetSeparator(s),(s=(c=0===(c=we(r._state.getHierarchicalRefinement(n)[0]||"")).indexOf(s.rootPath)?c.replace(s.rootPath+o,""):c).split(o)).unshift(n),function t(e,r,n){e.isRefined=e.name===(r[n]&&r[n].trim());e.data&&e.data.forEach(function(e){t(e,r,n+1)})}(t,s,0)),t):void 0}function xe(e,t){e=g(e,function(e){return e.name===t});return e&&e.stats}function Ie(e,t,r,n,i){var i=g(i,function(e){return e.name===r}),a=i&&i.data&&i.data[n]?i.data[n]:0,i=i&&i.exhaustive||!1;return{type:t,attributeName:r,name:n,count:a,exhaustive:i}}Ee.prototype.getFacetByName=function(t){function e(e){return e.name===t}return g(this.facets,e)||g(this.disjunctiveFacets,e)||g(this.hierarchicalFacets,e)},Ee.DEFAULT_SORT=["isRefined:desc","count:desc","name:asc"],Ee.prototype.getFacetValues=function(e,t){var l,f,r=Fe(this,e);if(r)return l=ce(t,{sortBy:Ee.DEFAULT_SORT,facetOrdering:!(t&&t.sortBy)}),f=this,function t(r,e,n,i){var a;return i=i||0,Array.isArray(e)?r(e,n[i]):e.data&&0!==e.data.length?(a=e.data.map(function(e){return t(r,e,n,i+1)}),a=r(a,n[i]),ce({data:a},e)):e}(function(e,t){t=t;var n,i,a,o,r,c,s,u=(u=f).renderingContent&&u.renderingContent.facetOrdering&&u.renderingContent.facetOrdering.values&&u.renderingContent.facetOrdering.values[t];if(l.facetOrdering&&u)return t=e,n=[],i=[],a=(r=u).hide||[],o=(r.order||[]).reduce(function(e,t,r){return e[t]=r,e},{}),t.forEach(function(e){var t=e.path||e.name,r=-1<a.indexOf(t);r||void 0===o[t]?r||i.push(e):n[o[t]]=e}),n=n.filter(function(e){return e}),"hidden"===(t=r.sortRemainingBy)?n:n.concat(ve(i,(r="alpha"===t?[["path","name"],["asc","asc"]]:[["count"],["desc"]])[0],r[1]));if(Array.isArray(l.sortBy))return t=pe(l.sortBy,Ee.DEFAULT_SORT),r=ve(e,t[0],t[1]),0<(c=u&&u.hide?u.hide:[]).length?(s=[],r.forEach(function(e){var t=e.path||e.name;-1===c.indexOf(t)&&s.push(e)}),s):r;if("function"==typeof l.sortBy)return t=l.sortBy,e.sort(t);throw new Error("options.sortBy is optional but if defined it must be either an array of string (predicates) or a sorting function")},r,Array.isArray(r)?[e]:f._state.getHierarchicalFacetByName(r.name).attributes)},Ee.prototype.getFacetStats=function(e){return this._state.isConjunctiveFacet(e)?xe(this.facets,e):this._state.isDisjunctiveFacet(e)?xe(this.disjunctiveFacets,e):void 0},Ee.prototype.getRefinements=function(){var o=this._state,c=this,s=[];return Object.keys(o.facetsRefinements).forEach(function(t){o.facetsRefinements[t].forEach(function(e){s.push(Ie(0,"facet",t,e,c.facets))})}),Object.keys(o.facetsExcludes).forEach(function(t){o.facetsExcludes[t].forEach(function(e){s.push(Ie(0,"exclude",t,e,c.facets))})}),Object.keys(o.disjunctiveFacetsRefinements).forEach(function(t){o.disjunctiveFacetsRefinements[t].forEach(function(e){s.push(Ie(0,"disjunctive",t,e,c.disjunctiveFacets))})}),Object.keys(o.hierarchicalFacetsRefinements).forEach(function(a){o.hierarchicalFacetsRefinements[a].forEach(function(e){var t,r,n,i;s.push((t=o,r=a,e=e,n=c.hierarchicalFacets,i=t.getHierarchicalFacetByName(r),t=t._getHierarchicalFacetSeparator(i),i=e.split(t),e=g(n,function(e){return e.name===r}),t=i.reduce(function(e,t){var r=e&&g(e.data,function(e){return e.name===t});return void 0!==r?r:e},e),n=t&&t.count||0,i=t&&t.exhaustive||!1,e=t&&t.path||"",{type:"hierarchical",attributeName:r,name:e,count:n,exhaustive:i}))})}),Object.keys(o.numericRefinements).forEach(function(r){var e=o.numericRefinements[r];Object.keys(e).forEach(function(t){e[t].forEach(function(e){s.push({type:"numeric",attributeName:r,name:e,numericValue:e,operator:t})})})}),o.tagRefinements.forEach(function(e){s.push({type:"tag",attributeName:"_tags",name:e})}),s};var _e=Ee;var Te=function(r,n){var t,i,a,o={};return n.forEach(function(e){e.forEach(function(e,t){r.includes(e.objectID)||(o[e.objectID]?o[e.objectID]={indexSum:o[e.objectID].indexSum+t,count:o[e.objectID].count+1}:o[e.objectID]={indexSum:t,count:1})})}),t=o,i=n.length,a=[],Object.keys(t).forEach(function(e){t[e].count<2&&(t[e].indexSum+=100),a.push({objectID:e,avgOfIndices:t[e].indexSum/i})}),a.sort(function(e,t){return e.avgOfIndices>t.avgOfIndices?1:-1}).reduce(function(e,t){var r=g(n.reduce(function(e,t){return e.concat(t)},[]),function(e){return e.objectID===t.objectID});return r?e.concat(r):e},[])},K="3.27.0",Ae=t;function i(e,t,r,n){"function"==typeof e.addAlgoliaAgent&&e.addAlgoliaAgent("JS Helper (3.27.0)"),this.setClient(e);e=r||{};e.index=t,this.state=ge.make(e),this.recommendState=new ne({params:e.recommendState}),this.lastResults=null,this.lastRecommendResults=null,this._queryId=0,this._recommendQueryId=0,this._lastQueryIdReceived=-1,this._lastRecommendQueryIdReceived=-1,this.derivedHelpers=[],this._currentNbQueries=0,this._currentNbRecommendQueries=0,this._searchResultsOptions=n,this._recommendCache={}}function De(e){if(e<0)throw new Error("Page requested below 0.");return this._change({state:this.state.setPage(e),isPageReset:!1}),this}function ke(){return this.state.page}J(i,Q),i.prototype.search=function(){return this._search({onlyWithDerivedHelpers:!1}),this},i.prototype.searchOnlyWithDerivedHelpers=function(){return this._search({onlyWithDerivedHelpers:!0}),this},i.prototype.searchWithComposition=function(){return this._runComposition({onlyWithDerivedHelpers:!0}),this},i.prototype.recommend=function(){return this._recommend(),this},i.prototype.getQuery=function(){var e=this.state;return se._getHitsSearchParams(e)},i.prototype.searchOnce=function(e,t){var r=e?this.state.setQueryParameters(e):this.state,e=se._getQueries(r.index,r),n=this;if(this._currentNbQueries++,this.emit("searchOnce",{state:r}),!t)return this.client.search(e).then(function(e){return n._currentNbQueries--,0===n._currentNbQueries&&n.emit("searchQueueEmpty"),{content:new _e(r,e.results),state:r,_originalResponse:e}},function(e){throw n._currentNbQueries--,0===n._currentNbQueries&&n.emit("searchQueueEmpty"),e});this.client.search(e).then(function(e){n._currentNbQueries--,0===n._currentNbQueries&&n.emit("searchQueueEmpty"),t(null,new _e(r,e.results),r)}).catch(function(e){n._currentNbQueries--,0===n._currentNbQueries&&n.emit("searchQueueEmpty"),t(e,null,r)})},i.prototype.findAnswers=function(e){console.warn("[algoliasearch-helper] answers is no longer supported");var t=this.state,r=this.derivedHelpers[0];if(!r)return Promise.resolve([]);var r=r.getModifiedState(t),t=Y({attributesForPrediction:e.attributesForPrediction,nbHits:e.nbHits},{params:te(se._getHitsSearchParams(r),["attributesToSnippet","hitsPerPage","restrictSearchableAttributes","snippetEllipsisText"])}),n="search for answers was called, but this client does not have a function client.initIndex(index).findAnswers";if("function"!=typeof this.client.initIndex)throw new Error(n);var i=this.client.initIndex(r.index);if("function"!=typeof i.findAnswers)throw new Error(n);return i.findAnswers(r.query,e.queryLanguages,t)},i.prototype.searchForFacetValues=function(r,e,t,n){var i,a,o,c,s="function"==typeof this.client.searchForFacetValues&&"function"!=typeof this.client.searchForFacets,u="function"==typeof this.client.initIndex;if(s||u||"function"==typeof this.client.search)return i=this.state.setQueryParameters(n||{}),a=i.isDisjunctiveFacet(r),n=se.getSearchForFacetQuery(r,e,t,i),this._currentNbQueries++,o=this,t=s?this.client.searchForFacetValues([{indexName:i.index,params:n}]):u?this.client.initIndex(i.index).searchForFacetValues(n):(delete n.facetName,this.client.search([{type:"facet",facet:r,indexName:i.index,params:n}]).then(function(e){return e.results[0]})),this.emit("searchForFacetValues",{state:i,facet:r,query:e}),c=this.lastResults&&this.lastResults.index===i.index&&this.lastResults.renderingContent&&this.lastResults.renderingContent.facetOrdering&&this.lastResults.renderingContent.facetOrdering.values&&this.lastResults.renderingContent.facetOrdering.values[r]&&this.lastResults.renderingContent.facetOrdering.values[r].hide||[],t.then(function(e){return o._currentNbQueries--,0===o._currentNbQueries&&o.emit("searchQueueEmpty"),(e=Array.isArray(e)?e[0]:e).facetHits=e.facetHits.reduce(function(e,t){return-1<c.indexOf(t.value)||(t.escapedValue=Ae(t.value),t.isRefined=a?i.isDisjunctiveFacetRefined(r,t.escapedValue):i.isFacetRefined(r,t.escapedValue),e.push(t)),e},[]),e},function(e){throw o._currentNbQueries--,0===o._currentNbQueries&&o.emit("searchQueueEmpty"),e});throw new Error("search for facet values (searchable) was called, but this client does not have a function client.searchForFacetValues or client.initIndex(index).searchForFacetValues")},i.prototype.searchForCompositionFacetValues=function(t,e,r,n){if("function"!=typeof this.client.searchForFacetValues)throw new Error("search for facet values (searchable) was called, but this client does not have a function client.searchForFacetValues");var i=this.state.setQueryParameters(n||{}),a=i.isDisjunctiveFacet(t),o=(this._currentNbQueries++,this),n=this.client.searchForFacetValues({compositionID:i.index,facetName:t,searchForFacetValuesRequest:{params:{query:e,maxFacetHits:r,searchQuery:se._getCompositionHitsSearchParams(i)}}});return this.emit("searchForFacetValues",{state:i,facet:t,query:e}),n.then(function(e){return o._currentNbQueries--,0===o._currentNbQueries&&o.emit("searchQueueEmpty"),(e=e.results[0]).facetHits.forEach(function(e){e.escapedValue=Ae(e.value),e.isRefined=a?i.isDisjunctiveFacetRefined(t,e.escapedValue):i.isFacetRefined(t,e.escapedValue)}),e},function(e){throw o._currentNbQueries--,0===o._currentNbQueries&&o.emit("searchQueueEmpty"),e})},i.prototype.setQuery=function(e){return this._change({state:this.state.resetPage().setQuery(e),isPageReset:!0}),this},i.prototype.clearRefinements=function(e){return this._change({state:this.state.resetPage().clearRefinements(e),isPageReset:!0}),this},i.prototype.clearTags=function(){return this._change({state:this.state.resetPage().clearTags(),isPageReset:!0}),this},i.prototype.addDisjunctiveFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addDisjunctiveFacetRefinement(e,t),isPageReset:!0}),this},i.prototype.addDisjunctiveRefine=function(){return this.addDisjunctiveFacetRefinement.apply(this,arguments)},i.prototype.addHierarchicalFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addHierarchicalFacetRefinement(e,t),isPageReset:!0}),this},i.prototype.addNumericRefinement=function(e,t,r){return this._change({state:this.state.resetPage().addNumericRefinement(e,t,r),isPageReset:!0}),this},i.prototype.addFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addFacetRefinement(e,t),isPageReset:!0}),this},i.prototype.addRefine=function(){return this.addFacetRefinement.apply(this,arguments)},i.prototype.addFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().addExcludeRefinement(e,t),isPageReset:!0}),this},i.prototype.addExclude=function(){return this.addFacetExclusion.apply(this,arguments)},i.prototype.addTag=function(e){return this._change({state:this.state.resetPage().addTagRefinement(e),isPageReset:!0}),this},i.prototype.addFrequentlyBoughtTogether=function(e){return this._recommendChange({state:this.recommendState.addFrequentlyBoughtTogether(e)}),this},i.prototype.addRelatedProducts=function(e){return this._recommendChange({state:this.recommendState.addRelatedProducts(e)}),this},i.prototype.addTrendingItems=function(e){return this._recommendChange({state:this.recommendState.addTrendingItems(e)}),this},i.prototype.addTrendingFacets=function(e){return this._recommendChange({state:this.recommendState.addTrendingFacets(e)}),this},i.prototype.addLookingSimilar=function(e){return this._recommendChange({state:this.recommendState.addLookingSimilar(e)}),this},i.prototype.removeNumericRefinement=function(e,t,r){return this._change({state:this.state.resetPage().removeNumericRefinement(e,t,r),isPageReset:!0}),this},i.prototype.removeDisjunctiveFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().removeDisjunctiveFacetRefinement(e,t),isPageReset:!0}),this},i.prototype.removeDisjunctiveRefine=function(){return this.removeDisjunctiveFacetRefinement.apply(this,arguments)},i.prototype.removeHierarchicalFacetRefinement=function(e){return this._change({state:this.state.resetPage().removeHierarchicalFacetRefinement(e),isPageReset:!0}),this},i.prototype.removeFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().removeFacetRefinement(e,t),isPageReset:!0}),this},i.prototype.removeRefine=function(){return this.removeFacetRefinement.apply(this,arguments)},i.prototype.removeFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().removeExcludeRefinement(e,t),isPageReset:!0}),this},i.prototype.removeExclude=function(){return this.removeFacetExclusion.apply(this,arguments)},i.prototype.removeTag=function(e){return this._change({state:this.state.resetPage().removeTagRefinement(e),isPageReset:!0}),this},i.prototype.removeFrequentlyBoughtTogether=function(e){return this._recommendChange({state:this.recommendState.removeParams(e)}),this},i.prototype.removeRelatedProducts=function(e){return this._recommendChange({state:this.recommendState.removeParams(e)}),this},i.prototype.removeTrendingItems=function(e){return this._recommendChange({state:this.recommendState.removeParams(e)}),this},i.prototype.removeTrendingFacets=function(e){return this._recommendChange({state:this.recommendState.removeParams(e)}),this},i.prototype.removeLookingSimilar=function(e){return this._recommendChange({state:this.recommendState.removeParams(e)}),this},i.prototype.toggleFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().toggleExcludeFacetRefinement(e,t),isPageReset:!0}),this},i.prototype.toggleExclude=function(){return this.toggleFacetExclusion.apply(this,arguments)},i.prototype.toggleRefinement=function(e,t){return this.toggleFacetRefinement(e,t)},i.prototype.toggleFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().toggleFacetRefinement(e,t),isPageReset:!0}),this},i.prototype.toggleRefine=function(){return this.toggleFacetRefinement.apply(this,arguments)},i.prototype.toggleTag=function(e){return this._change({state:this.state.resetPage().toggleTagRefinement(e),isPageReset:!0}),this},i.prototype.nextPage=function(){var e=this.state.page||0;return this.setPage(e+1)},i.prototype.previousPage=function(){var e=this.state.page||0;return this.setPage(e-1)},i.prototype.setCurrentPage=De,i.prototype.setPage=De,i.prototype.setIndex=function(e){return this._change({state:this.state.resetPage().setIndex(e),isPageReset:!0}),this},i.prototype.setQueryParameter=function(e,t){return this._change({state:this.state.resetPage().setQueryParameter(e,t),isPageReset:!0}),this},i.prototype.setState=function(e){return this._change({state:ge.make(e),isPageReset:!1}),this},i.prototype.overrideStateWithoutTriggeringChangeEvent=function(e){return this.state=new ge(e),this},i.prototype.hasRefinements=function(e){return!!ee(this.state.getNumericRefinements(e))||(this.state.isConjunctiveFacet(e)?this.state.isFacetRefined(e):this.state.isDisjunctiveFacet(e)?this.state.isDisjunctiveFacetRefined(e):!!this.state.isHierarchicalFacet(e)&&this.state.isHierarchicalFacetRefined(e))},i.prototype.isExcluded=function(e,t){return this.state.isExcludeRefined(e,t)},i.prototype.isDisjunctiveRefined=function(e,t){return this.state.isDisjunctiveFacetRefined(e,t)},i.prototype.hasTag=function(e){return this.state.isTagRefined(e)},i.prototype.isTagRefined=function(){return this.hasTagRefinements.apply(this,arguments)},i.prototype.getIndex=function(){return this.state.index},i.prototype.getCurrentPage=ke,i.prototype.getPage=ke,i.prototype.getTags=function(){return this.state.tagRefinements},i.prototype.getRefinements=function(e){var r=[],n=(this.state.isConjunctiveFacet(e)?(this.state.getConjunctiveRefinements(e).forEach(function(e){r.push({value:e,type:"conjunctive"})}),this.state.getExcludeRefinements(e).forEach(function(e){r.push({value:e,type:"exclude"})})):this.state.isDisjunctiveFacet(e)&&this.state.getDisjunctiveRefinements(e).forEach(function(e){r.push({value:e,type:"disjunctive"})}),this.state.getNumericRefinements(e));return Object.keys(n).forEach(function(e){var t=n[e];r.push({value:t,operator:e,type:"numeric"})}),r},i.prototype.getNumericRefinement=function(e,t){return this.state.getNumericRefinement(e,t)},i.prototype.getHierarchicalFacetBreadcrumb=function(e){return this.state.getHierarchicalFacetBreadcrumb(e)},i.prototype._search=function(e){var n=this.state,i=[],t=[],e=(e.onlyWithDerivedHelpers||(t=se._getQueries(n.index,n),i.push({state:n,queriesCount:t.length,helper:this}),this.emit("search",{state:n,results:this.lastResults})),this.derivedHelpers.map(function(e){var t=e.getModifiedState(n),r=t.index?se._getQueries(t.index,t):[];return i.push({state:t,queriesCount:r.length,helper:e}),e.emit("search",{state:t,results:e.lastResults}),r})),t=Array.prototype.concat.apply(t,e),e=this._queryId++;if(this._currentNbQueries++,!t.length)return Promise.resolve({results:[]}).then(this._dispatchAlgoliaResponse.bind(this,i,e));try{this.client.search(t).then(this._dispatchAlgoliaResponse.bind(this,i,e)).catch(this._dispatchAlgoliaError.bind(this,e))}catch(e){this.emit("error",{error:e})}},i.prototype._runComposition=function(){var n=this.state,i=[],e=this.derivedHelpers.map(function(e){var t=e.getModifiedState(n),r=se._getCompositionQueries(t);return i.push({state:t,queriesCount:r.length,helper:e}),e.emit("search",{state:t,results:e.lastResults}),r}),e=Array.prototype.concat.apply([],e),t=this._queryId++;if(this._currentNbQueries++,!e.length)return Promise.resolve({results:[]}).then(this._dispatchAlgoliaResponse.bind(this,i,t));if(1<e.length)throw new Error("Only one query is allowed when using a composition.");e=e[0];try{this.client.search(e).then(this._dispatchAlgoliaResponse.bind(this,i,t)).catch(this._dispatchAlgoliaError.bind(this,t))}catch(e){this.emit("error",{error:e})}},i.prototype._recommend=function(){var n=this.state,e=this.recommendState,t=this.getIndex(),i=[{state:e,index:t,helper:this}],a=e.params.map(function(e){return e.$$id}),o=(this.emit("fetch",{recommend:{state:e,results:this.lastRecommendResults}}),this._recommendCache),e=this.derivedHelpers.map(function(e){var t,r=e.getModifiedState(n).index;return r?(t=e.getModifiedRecommendState(new ne),i.push({state:t,index:r,helper:e}),a=Array.prototype.concat.apply(a,t.params.map(function(e){return e.$$id})),e.emit("fetch",{recommend:{state:t,results:e.lastRecommendResults}}),t._buildQueries(r,o)):[]}),t=Array.prototype.concat.apply(this.recommendState._buildQueries(t,o),e);if(0!==t.length)if(0<t.length&&void 0===this.client.getRecommendations)console.warn("Please update algoliasearch/lite to the latest version in order to use recommend widgets.");else{e=this._recommendQueryId++;this._currentNbRecommendQueries++;try{this.client.getRecommendations(t).then(this._dispatchRecommendResponse.bind(this,e,i,a)).catch(this._dispatchRecommendError.bind(this,e))}catch(e){this.emit("error",{error:e})}}},i.prototype._dispatchAlgoliaResponse=function(e,t,r){var n,i,a=this;t<this._lastQueryIdReceived||(this._currentNbQueries-=t-this._lastQueryIdReceived,this._lastQueryIdReceived=t,0===this._currentNbQueries&&this.emit("searchQueueEmpty"),n=r.results.slice(),i=Object.keys(r).reduce(function(e,t){return"results"!==t&&(e[t]=r[t]),e},{}),Object.keys(i).length<=0&&(i=void 0),e.forEach(function(e){var t=e.state,r=e.queriesCount,e=e.helper,r=n.splice(0,r);t.index?(e.lastResults=new _e(t,r,a._searchResultsOptions),void 0!==i&&(e.lastResults._rawContent=i),e.emit("result",{results:e.lastResults,state:t})):e.emit("result",{results:null,state:t})}))},i.prototype._dispatchRecommendResponse=function(e,t,n,i){var a,o,c;e<this._lastRecommendQueryIdReceived||(this._currentNbRecommendQueries-=e-this._lastRecommendQueryIdReceived,this._lastRecommendQueryIdReceived=e,0===this._currentNbRecommendQueries&&this.emit("recommendQueueEmpty"),a=this._recommendCache,o={},n.filter(function(e){return void 0===a[e]}).forEach(function(e,t){o[e]||(o[e]=[]),o[e].push(t)}),Object.keys(o).forEach(function(e){var t=o[e],r=i.results[t[0]];1===t.length?a[e]=r:a[e]=Object.assign({},r,{hits:Te(n,t.map(function(e){return i.results[e].hits}))})}),c={},n.forEach(function(e){c[e]=a[e]}),t.forEach(function(e){var t=e.state,r=e.helper;e.index?(r.lastRecommendResults=new ae(t,c),r.emit("recommend:result",{recommend:{results:r.lastRecommendResults,state:t}})):r.emit("recommend:result",{results:null,state:t})}))},i.prototype._dispatchAlgoliaError=function(e,t){e<this._lastQueryIdReceived||(this._currentNbQueries-=e-this._lastQueryIdReceived,this._lastQueryIdReceived=e,this.emit("error",{error:t}),0===this._currentNbQueries&&this.emit("searchQueueEmpty"))},i.prototype._dispatchRecommendError=function(e,t){e<this._lastRecommendQueryIdReceived||(this._currentNbRecommendQueries-=e-this._lastRecommendQueryIdReceived,this._lastRecommendQueryIdReceived=e,this.emit("error",{error:t}),0===this._currentNbRecommendQueries&&this.emit("recommendQueueEmpty"))},i.prototype.containsRefinement=function(e,t,r,n){return e||0!==t.length||0!==r.length||0!==n.length},i.prototype._hasDisjunctiveRefinements=function(e){return this.state.disjunctiveRefinements[e]&&0<this.state.disjunctiveRefinements[e].length},i.prototype._change=function(e){var t=e.state,e=e.isPageReset;t!==this.state&&(this.state=t,this.emit("change",{state:this.state,results:this.lastResults,isPageReset:e}))},i.prototype._recommendChange=function(e){e=e.state;e!==this.recommendState&&(this.recommendState=e,this.emit("recommend:change",{search:{results:this.lastResults,state:this.state},recommend:{results:this.lastRecommendResults,state:this.recommendState}}))},i.prototype.clearCache=function(){return this.client.clearCache&&this.client.clearCache(),this},i.prototype.setClient=function(e){return this.client!==e&&("function"==typeof e.addAlgoliaAgent&&e.addAlgoliaAgent("JS Helper (3.27.0)"),this.client=e),this},i.prototype.getClient=function(){return this.client},i.prototype.derive=function(e,t){e=new X(this,e,t);return this.derivedHelpers.push(e),e},i.prototype.detachDerivedHelper=function(e){e=this.derivedHelpers.indexOf(e);if(-1===e)throw new Error("Derived helper already detached");this.derivedHelpers.splice(e,1)},i.prototype.hasPendingRequests=function(){return 0<this._currentNbQueries};var Ne=i;function Ce(e,t,r,n){return new Ne(e,t,r,n)}Ce.version=K,Ce.AlgoliaSearchHelper=Ne,Ce.SearchParameters=ge,Ce.RecommendParameters=ne,Ce.SearchResults=_e,Ce.RecommendResults=ae;var S=Ce,We=0;function He(){We=0}t=("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}).performance||{};t.now||t.mozNow||t.msNow||t.oNow||t.webkitNow;function O(){}function Le(e){return Object.prototype.toString.call(e).slice(8,-1)}function m(e,t){if(void 0===e||"function"!=typeof e)throw new Error("The render function is not valid (received type ".concat(Le(e),").\n\n").concat(t))}function $e(e){var t=e.helper,e=e.attributesToClear,e=void 0===e?[]:e,r=t.state.setPage(0),r=e.reduce(function(e,t){return r.isNumericRefined(t)?e.removeNumericRefinement(t):r.isHierarchicalFacet(t)?e.removeHierarchicalFacetRefinement(t):r.isDisjunctiveFacet(t)?e.removeDisjunctiveFacetRefinement(t):r.isConjunctiveFacet(t)?e.removeFacetRefinement(t):e},r);return r=-1!==e.indexOf("query")?r.setQuery(""):r}var Me={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ue=/[&<>"']/g,Qe=RegExp(Ue.source);var Be={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},qe=/&(amp|quot|lt|gt|#39);/g,Ve=RegExp(qe.source);function Je(e){return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ze(e){if("object"===Je(t=e)&&null!==t&&"[object Object]"===(null===(t=e)?void 0===t?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t))){var t;if(null===Object.getPrototypeOf(e))return 1;for(var r=e;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(e)===r}}function Xe(e){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ke(){return(Ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)!{}.hasOwnProperty.call(n,r)||(e[r]=n[r])}return e}).apply(null,arguments)}function Ge(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Ze(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ge(Object(r),!0).forEach(function(e){Ye(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ge(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Ye(e,t,r){return(t=function(e){e=function(e,t){if("object"!=Xe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Xe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Xe(e)?e:e+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _={highlightPreTag:"__ais-highlight__",highlightPostTag:"__/ais-highlight__"},u={highlightPreTag:"<mark>",highlightPostTag:"</mark>"};function et(e){return((e=e)&&Qe.test(e)?e.replace(Ue,function(e){return Me[e]}):e).replace(new RegExp(_.highlightPreTag,"g"),u.highlightPreTag).replace(new RegExp(_.highlightPostTag,"g"),u.highlightPostTag)}function tt(r){return ze(r)&&"string"!=typeof r.value?Object.keys(r).reduce(function(e,t){return Ze(Ze({},e),{},Ye({},t,tt(r[t])))},{}):Array.isArray(r)?r.map(tt):Ze(Ze({},r),{},{value:et(r.value)})}function rt(e){return void 0===e.__escaped&&((e=e.map(function(e){e=Ke({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e));return e._highlightResult&&(e._highlightResult=tt(e._highlightResult)),e._snippetResult&&(e._snippetResult=tt(e._snippetResult)),e})).__escaped=!0),e}function nt(e){var t=u.highlightPreTag,r=u.highlightPostTag;return e.map(function(e){return e.isHighlighted?t+e.value+r:e.value}).join("")}function it(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function at(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?it(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=ot(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=ot(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==ot(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):it(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function ot(e){return(ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ct(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||function(e,t){{var r;if(e)return"string"==typeof e?st(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?st(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function st(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ut(e){var h=e.instantSearchInstance,d=e.helper,m=e.attribute,p=e.widgetType;return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i,a,o=t[1],c=t[2],c=void 0===c?"Filter Applied":c,s=t[3],s=void 0===s?{}:s,u=ct(t[0].split(":"),2),l=u[0],u=u[1],f="string"==typeof m?m:m(o);1===t.length&&"object"===ot(t[0])?h.sendEventToInsights(t[0]):"click"===l&&2<=t.length&&t.length<=4&&(i=f,a=o,((n=d).state.isHierarchicalFacet(i)?n.state.isHierarchicalFacetRefined(i,a):n.state.isConjunctiveFacet(i)?n.state.isFacetRefined(i,a):n.state.isDisjunctiveFacetRefined(i,a))||h.sendEventToInsights({insightsMethod:"clickedFilters",widgetType:p,eventType:l,eventModifier:u,payload:at({eventName:c,index:(null==(n=d.lastResults)?void 0:n.index)||d.state.index,filters:["".concat(f,":").concat(o)]},s),attribute:f}))}}function lt(e){return btoa(encodeURIComponent(JSON.stringify(e)))}function ft(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function ht(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ft(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=pt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=pt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==pt(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):ft(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function dt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||function(e,t){{var r;if(e)return"string"==typeof e?mt(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?mt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function pt(e){return(pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gt(e){var n,i,a,o,c,t,s,u,l=e.helper,f=e.widgetType,r=(e.methodName,e.args),e=e.instantSearchInstance;return 1===r.length&&"object"===pt(r[0])?[r[0]]:(t=dt(r[0].split(":"),2),n=t[0],i=t[1],t=r[1],a=r[2],o=r[3]||{},!t||!("click"!==n&&"conversion"!==n||a)||0===(r=Array.isArray(t)?t:[t]).length?[]:(c=r[0].__queryID,t=function(e,t){for(var r=1<arguments.length&&void 0!==t?t:20,n=[],i=0;i<Math.ceil(e.length/r);i++)n.push(e.slice(i*r,(i+1)*r));return n}(r),s=t.map(function(e){return e.map(function(e){return e.objectID})}),u=t.map(function(e){return e.map(function(e){return e.__position})}),"view"===n?"idle"!==e.status?[]:t.map(function(e,t){var r;return{insightsMethod:"viewedObjectIDs",widgetType:f,eventType:n,payload:ht({eventName:a||"Hits Viewed",index:(null==(r=l.lastResults)?void 0:r.index)||l.state.index,objectIDs:s[t]},o),hits:e,eventModifier:i}}):"click"===n?t.map(function(e,t){var r;return{insightsMethod:"clickedObjectIDsAfterSearch",widgetType:f,eventType:n,payload:ht({eventName:a||"Hit Clicked",index:(null==(r=l.lastResults)?void 0:r.index)||l.state.index,queryID:c,objectIDs:s[t],positions:u[t]},o),hits:e,eventModifier:i}}):"conversion"===n?t.map(function(e,t){var r;return{insightsMethod:"convertedObjectIDsAfterSearch",widgetType:f,eventType:n,payload:ht({eventName:a||"Hit Converted",index:(null==(r=l.lastResults)?void 0:r.index)||l.state.index,queryID:c,objectIDs:s[t]},o),hits:e,eventModifier:i}}):[]))}function yt(e){var n=e.instantSearchInstance,i=e.helper,a=e.widgetType,o={},c=void 0;return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];gt({widgetType:a,helper:i,methodName:"sendEvent",args:t,instantSearchInstance:n}).forEach(function(e){"click"===e.eventType&&"internal"===e.eventModifier&&o[e.eventType]||(o[e.eventType]=!0,n.sendEventToInsights(e))}),clearTimeout(c),c=setTimeout(function(){o={}},0)}}function vt(e){var i=e.helper,a=e.widgetType,o=e.instantSearchInstance;return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=gt({widgetType:a,helper:i,methodName:"bindEvent",args:t,instantSearchInstance:o});return n.length?"data-insights-event=".concat(lt(n)):""}}function j(e){return"ais.index"===e.$$type}function bt(t,e){var r=t[e.getIndexId()]||{};e.getHelper().setState(e.getWidgetSearchParameters(e.getHelper().state,{uiState:r})),e.getWidgets().filter(j).forEach(function(e){return bt(t,e)})}var St=Promise.resolve();function Ot(n){function e(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];null===i&&(i=St.then(function(){i=null,a?a=!1:n.apply(void 0,t)}))}var i=null,a=!1;return e.wait=function(){if(null===i)throw new Error("The deferred function should be called before calling `wait()`");return i},e.cancel=function(){null!==i&&(a=!0)},e}function a(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.map(function(e){return t=(e=e).name,e=e.connector,["https://www.algolia.com/doc/api-reference/widgets/",t,"/js/",void 0!==e&&e?"#connector":""].join("");var t}).join(", ");return function(e){return[e,"See documentation: ".concat(n)].filter(Boolean).join("\n\n")}}function jt(e){return"number"==typeof e&&e<0||"string"==typeof e?String(e).replace(/^-/,"\\-"):e}function wt(e,t){for(var r,n=0;n<e.length;n++)if(t(r=e[n],n,e))return r}function Pt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||function(e,t){{var r;if(e)return"string"==typeof e?Rt(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Rt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Et=/^(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)$/;function Ft(e){if(Array.isArray(e)){var t=e,r=Pt(t,1)[0],n=(r=Pt(void 0===r?[void 0,void 0,void 0,void 0]:r,4))[0],i=r[1],a=r[2],r=r[3];if(n&&i&&a&&r)return{northEast:{lat:n,lng:i},southWest:{lat:a,lng:r}};throw new Error('Invalid value for "insideBoundingBox" parameter: ['.concat(t,"]"))}n=e,a=(i=Pt(n.split(",").map(parseFloat),4))[0],r=i[1],t=i[2],i=i[3];if(a&&r&&t&&i)return{northEast:{lat:a,lng:r},southWest:{lat:t,lng:i}};throw new Error('Invalid value for "insideBoundingBox" parameter: "'.concat(n,'"'))}function xt(e){var t,r,n;return e.appId&&e.apiKey?[e.appId,e.apiKey]:e.transporter?(t=(r=e.transporter).headers||r.baseHeaders,r=r.queryParameters||r.baseQueryParameters,[t[n="x-algolia-application-id"]||r[n],t[n="x-algolia-api-key"]||r[n]]):[e.applicationID,e.apiKey]}function It(e){var t=u.highlightPostTag,r=u.highlightPreTag,e=e.split(r),r=e.shift(),n=r?[{value:r,isHighlighted:!1}]:[];return e.forEach(function(e){e=e.split(t);n.push({value:e[0],isHighlighted:!0}),""!==e[1]&&n.push({value:e[1],isHighlighted:!1})}),n}var _t=new RegExp(/\w/i);function Tt(e,t){var r=e[t],n=(null==(n=e[t+1])?void 0:n.isHighlighted)||!0,t=(null==(e=e[t-1])?void 0:e.isHighlighted)||!0;return _t.test((e=r.value)&&Ve.test(e)?e.replace(qe,function(e){return Be[e]}):e)||t!==n?r.isHighlighted:t}function At(e,t){return(Array.isArray(t)?t:t.split(".")).reduce(function(e,t){return e&&e[t]},e)}function Dt(e,t,r,n,i){var a,i=4<arguments.length&&void 0!==i?i:[],o={type:t,attribute:r,name:n,escapedValue:jt(n)},c=wt(i,function(e){return e.name===r});if("hierarchical"===t){for(var i=e.getHierarchicalFacetByName(r),s=n.split(i.separator),u=0;void 0!==c&&u<s.length;++u)!function(t){var r;c=c&&c.data&&wt(Object.keys(c.data).map((r=c.data,function(e){return r[e]})),function(e){return e.name===s[t]})}(u);a=c&&c.count}else a=c&&c.data&&c.data[o.name];return void 0!==a&&(o.count=a),c&&void 0!==c.exhaustive&&(o.exhaustive=c.exhaustive),o}function kt(e,r,t){var t=2<arguments.length&&void 0!==t&&t,n=e||{},i=[],e=r.facetsRefinements,a=void 0===e?{}:e,e=r.facetsExcludes,o=void 0===e?{}:e,e=r.disjunctiveFacetsRefinements,c=void 0===e?{}:e,e=r.hierarchicalFacetsRefinements,s=void 0===e?{}:e,e=r.numericRefinements,u=void 0===e?{}:e,e=r.tagRefinements,e=void 0===e?[]:e;return Object.keys(a).forEach(function(t){a[t].forEach(function(e){i.push(Dt(r,"facet",t,e,n.facets))})}),Object.keys(o).forEach(function(t){o[t].forEach(function(e){i.push({type:"exclude",attribute:t,name:e,exclude:!0})})}),Object.keys(c).forEach(function(t){c[t].forEach(function(e){i.push(Dt(r,"disjunctive",t,"string"==typeof(e=e)?e.replace(/^\\-/,"-"):e,n.disjunctiveFacets))})}),Object.keys(s).forEach(function(t){s[t].forEach(function(e){i.push(Dt(r,"hierarchical",t,e,n.hierarchicalFacets))})}),Object.keys(u).forEach(function(r){var n=u[r];Object.keys(n).forEach(function(e){var t=e,e=n[t];(Array.isArray(e)?e:[e]).forEach(function(e){i.push({type:"numeric",attribute:r,name:"".concat(e),numericValue:e,operator:t})})})}),e.forEach(function(e){i.push({type:"tag",attribute:"_tags",name:e})}),t&&r.query&&r.query.trim()&&i.push({attribute:"query",type:"query",name:r.query,query:r.query}),i}function Nt(e){return(Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ct(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Wt(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ct(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=Nt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Nt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Nt(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Ct(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Ht(e,r,n){return e.map(function(e,t){return Wt(Wt({},e),{},{__position:n*r+t+1})})}function Lt(e){return(Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $t(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Mt(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?$t(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=Lt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Lt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Lt(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):$t(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Ut(e,t){return t?e.map(function(e){return Mt(Mt({},e),{},{__queryID:t})}):e}function Qt(e){return(Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function qt(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Bt(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=Qt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Qt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Qt(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Bt(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Vt(e){return(Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||function(e,t){{var r;if(e)return"string"==typeof e?zt(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?zt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Xt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Kt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Xt(Object(r),!0).forEach(function(e){Gt(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Xt(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Gt(e,t,r){return(t=function(e){e=function(e,t){if("object"!=Vt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Vt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Vt(e)?e:e+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zt(a,i){var e,o,t;i&&("transporter"in a&&!a._cacheHydrated||a._useCache&&"function"==typeof a.addAlgoliaAgent)&&(e=[Object.keys(i).reduce(function(e,t){var t=i[t],r=t.state,n=t.requestParams,t=t.results,t=t&&r?t.map(function(e,t){return Kt({indexName:r.index||e.index},null!=n&&n[t]||e.params?{params:Yt((null==n?void 0:n[t])||e.params.split("&").reduce(function(e,t){var t=Jt(t.split("="),2),r=t[0],t=t[1];return e[r]=t?decodeURIComponent(t):"",e},{}))}:{})}):[];return e.concat(t)},[])],t=Object.keys(i).reduce(function(e,t){t=i[t].results;return t?e.concat(t):e},[]),"transporter"in a&&!a._cacheHydrated&&(a._cacheHydrated=!0,o=a.search.bind(a),a.search=function(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=Array.isArray(e)?e.map(function(e){return Kt(Kt({},e),{},{params:Yt(e.params)})}):Yt(e.requestBody.params);return a.transporter.responsesCache.get({method:"search",args:[i].concat(r)},function(){return o.apply(void 0,[e].concat(r))})},a.transporter.responsesCache.set({method:"search",args:e},{results:t})),"transporter"in a||(t="/1/indexes/*/queries_body_".concat(JSON.stringify({requests:e})),a.cache=Kt(Kt({},a.cache),{},Gt({},t,JSON.stringify({results:Object.keys(i).map(function(e){return i[e].results})})))))}function Yt(r){return Object.keys(r).map(function(e){return function(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=0;return e.replace(/%s/g,function(){return encodeURIComponent(r[i++])})}("%s=%s",e,(t=r[e],"[object Object]"===Object.prototype.toString.call(t)||"[object Array]"===Object.prototype.toString.call(t)?JSON.stringify(r[e]):r[e]));var t}).join("&")}function er(e){return e!==Object(e)}function tr(e,t){if(e===t)return 1;if(er(e)||er(t)||"function"==typeof e||"function"==typeof t)return e===t;if(Object.keys(e).length===Object.keys(t).length){for(var r=0,n=Object.keys(e);r<n.length;r++){var i=n[r];if(!(i in t))return;if(!tr(e[i],t[i]))return}return 1}}function y(e){return"number"==typeof e&&isFinite(e)}function rr(e,t){t(e),e.getWidgets().forEach(function(e){j(e)&&rr(e,t)})}function nr(e){return e.filter(function(e,t,r){return r.indexOf(e)===t})}function ir(e){return(ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ar=["facets","disjunctiveFacets","facetsRefinements","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements","tagRefinements","hierarchicalFacets","hierarchicalFacetsRefinements","ruleContexts"];function or(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function c(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?or(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=ir(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=ir(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==ir(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):or(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function cr(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n={};for(r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),a=0;a<i.length;a++)r=i[a],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}function sr(e,t){return e.setQueryParameters({hierarchicalFacets:t.hierarchicalFacets.reduce(function(e,t){var r=function(e,t){if(Array.isArray(e))for(var r=0;r<e.length;r++)if(t(e[r]))return r;return-1}(e,function(e){return e.name===t.name});return-1===r?e.concat(t):((e=e.slice()).splice(r,1,t),e)},e.hierarchicalFacets)})}var ur=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(function(e,t){r=t;var e=e.setQueryParameters({hierarchicalFacetsRefinements:c(c({},e.hierarchicalFacetsRefinements),r.hierarchicalFacetsRefinements)}),r=sr(e,t),e=t.tagRefinements.reduce(function(e,t){return e.addTagRefinement(t)},r),e=(r=t,e.setQueryParameters({numericRefinements:c(c({},e.numericRefinements),r.numericRefinements)})),e=(r=t,e.setQueryParameters({disjunctiveFacetsRefinements:c(c({},e.disjunctiveFacetsRefinements),r.disjunctiveFacetsRefinements)})),e=(r=t,e.setQueryParameters({facetsExcludes:c(c({},e.facetsExcludes),r.facetsExcludes)})),e=(r=t,e.setQueryParameters({facetsRefinements:c(c({},e.facetsRefinements),r.facetsRefinements)})),r=function(e,t){t=nr([].concat(e.ruleContexts).concat(t.ruleContexts).filter(Boolean));return 0<t.length?e.setQueryParameters({ruleContexts:t}):e}(t.disjunctiveFacets.reduce(function(e,t){return e.addDisjunctiveFacet(t)},e),t),e=t.facets.reduce(function(e,t){return e.addFacet(t)},r),r=t;return r.facets,r.disjunctiveFacets,r.facetsRefinements,r.facetsExcludes,r.disjunctiveFacetsRefinements,r.numericRefinements,r.tagRefinements,r.hierarchicalFacets,r.hierarchicalFacetsRefinements,r.ruleContexts,r=cr(r,ar),e.setQueryParameters(r)})};function lr(e){return function(e){if(Array.isArray(e))return fr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){{var r;if(e)return"string"==typeof e?fr(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fr(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function hr(e){var t=e.start,r=void 0===t?0:t,t=e.end,e=e.step,e=void 0===e?1:e,n=0===e?1:e,e=Math.round((t-r)/n);return lr(Array(e)).map(function(e,t){return r+t*n})}function dr(e,t,r){var n=t.getHelper();return{uiState:r,helper:n,parent:t,instantSearchInstance:e,state:n.state,renderState:e.renderState,templatesConfig:e.templatesConfig,createURL:t.createURL,scopedResults:[],searchMetadata:{isSearchStalled:"stalled"===e.status},status:e.status,error:e.error}}function mr(e,t,r){var r=t.getResultsForWidget(r),n=t.getHelper();return{helper:n,parent:t,instantSearchInstance:e,results:r,scopedResults:t.getScopedResults(),state:r&&"_state"in r?r._state:n.state,renderState:e.renderState,templatesConfig:e.templatesConfig,createURL:t.createURL,searchMetadata:{isSearchStalled:"stalled"===e.status},status:e.status,error:e.error}}function pr(e){return(pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gr(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function yr(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?gr(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=pr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=pr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==pr(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):gr(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function vr(r){return r.some(function(e){return e.isHighlighted})?r.map(function(e,t){return yr(yr({},e),{},{isHighlighted:!Tt(r,t)})}):r.map(function(e){return yr(yr({},e),{},{isHighlighted:!1})})}function br(e,t){t=(1<arguments.length&&void 0!==t?t:{fallback:function(){}}).fallback;return"undefined"==typeof window?t():e({window:window})}function Sr(e){return Array.isArray(e)?e:[e]}function Or(e){return(Or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jr(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?jr(Object(r),!0).forEach(function(e){wr(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jr(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function wr(e,t,r){return(t=function(e){e=function(e,t){if("object"!=Or(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Or(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Or(e)?e:e+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Pr=a({name:"configure",connector:!0});function Rr(e,t){return e.setQueryParameters(Object.keys(t.searchParameters).reduce(function(e,t){return f(f({},e),{},wr({},t,void 0))},{}))}var Er=function(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:O,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:O;return function(n){var t;if(n&&ze(n.searchParameters))return t={},{$$type:"ais.configure",init:function(e){var t=e.instantSearchInstance;r(f(f({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;r(f(f({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){e=e.state;return i(),Rr(e,n)},getRenderState:function(e,t){t=this.getWidgetRenderState(t);return f(f({},e),{},{configure:f(f({},t),{},{widgetParams:f(f({},t.widgetParams),{},{searchParameters:ur(new S.SearchParameters(null==(e=e.configure)?void 0:e.widgetParams.searchParameters),new S.SearchParameters(t.widgetParams.searchParameters)).getQueryParams()})})})},getWidgetRenderState:function(e){var r,e=e.helper;return t.refine||(t.refine=(r=e,function(e){var t=Rr(r.state,n),t=ur(t,new S.SearchParameters(e));n.searchParameters=e,r.setState(t).search()})),{refine:t.refine,widgetParams:n}},getWidgetSearchParameters:function(e,t){t=t.uiState;return ur(e,new S.SearchParameters(f(f({},t.configure),n.searchParameters)))},getWidgetUiState:function(e){return f(f({},e),{},{configure:f(f({},e.configure),n.searchParameters)})}};throw new Error(Pr("The `searchParameters` option expects an object."))}},Fr=Object.prototype.hasOwnProperty;function xr(e,t,r){if(null!=r&&r(e,t))return!0;var n,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((i=e.length)===t.length)for(;i--&&xr(e[i],t[i],r););return-1===i}if(!n||"object"===U(e)){for(n in i=0,e){if(Fr.call(e,n)&&++i&&!Fr.call(t,n))return!1;if(!(n in t&&xr(e[n],t[n],r)))return!1}return Object.keys(t).length===i}}return e!=e&&t!=t}function Ir(e){var t;return new S.SearchResults(e,[{query:null!=(t=e.query)?t:"",page:null!=(t=e.page)?t:0,hitsPerPage:null!=(t=e.hitsPerPage)?t:20,hits:[],nbHits:0,nbPages:0,params:"",exhaustiveNbHits:!0,exhaustiveFacetsCount:!0,processingTimeMS:0,index:e.index}],{__isArtificial:!0})}function _r(r){var e=r.getHelper(),n=r.getResults()||Ir(e.state),t=r.getScopedResults().map(function(e){var t=e.indexId===r.getIndexId()?n:Ir(e.helper.state);return p(p({},e),{},{results:e.results||t})});return{results:n,scopedResults:t,recommendResults:e.lastRecommendResults}}var Tr=b.createContext(null);function Ar(e){if(!e)throw new Error("Invariant failed")}function Dr(){var e=b.useContext(Tr);return Ar(null!==e),e}var kr=b.createContext(null);function Nr(){var e=b.useContext(kr);return Ar(null!==e),e}var Cr=b.createContext(null);function Wr(){return b.useContext(Cr)}var Hr=b.createContext(null);function Lr(){return b.useContext(Hr)}function $r(e){var t=M(b.useState(function(){return e}),2),r=t[0],t=t[1];return xr(r,e)||t(e),r}var Mr=b.use,Ur="undefined"!=typeof window?b.useLayoutEffect:b.useEffect,Qr=b.createContext({countRef:{current:0},waitForResultsRef:null,ignoreMultipleHooksWarning:!1});function Br(){return b.useContext(Qr)}function qr(e){var t=e.widget,r=e.parentIndex,n=e.props,i=e.shouldSsr,e=e.skipSuspense,a=Br(),o=a.waitForResultsRef,c=a.countRef,s=(a.ignoreMultipleHooksWarning,b.useRef(n)),u=(b.useEffect(function(){s.current=n},[n]),b.useRef(t)),l=(b.useEffect(function(){u.current=t},[t]),b.useRef(null)),a=i&&!r.getWidgets().includes(t),f=Nr();Ur(function(){var e=u.current;return l.current?(clearTimeout(l.current),xr(n,s.current)||(r.removeWidgets([e]),r.addWidgets([t]))):i||r.addWidgets([t]),function(){l.current=setTimeout(function(){f._schedule(function(){f._preventWidgetCleanup||r.removeWidgets([e])})})}},[r,t,i,f,n]),!a&&"pending"!==(null==o||null==(a=o.current)?void 0:a.status)||r.addWidgets([t]),null!=o&&o.current&&!e&&(Mr(o.current),"ais.dynamicWidgets"!==t.$$type)&&null!=(a=f.helper)&&a.lastResults&&Mr(o.current),"fulfilled"===(null==o||null==(e=o.current)?void 0:e.status)&&(c.current+=1)}var Vr=["skipSuspense"],Jr=["instantSearchInstance","widgetParams"],zr=["widgetParams"];function h(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=r.skipSuspense,n=void 0!==n&&n,r=$(r,Vr),i=Wr(),a=Lr(),o=Nr(),c=Dr(),s=$r(t),u=$r(r),l=b.useRef(!0),f=b.useRef(null),h=b.useRef(o.status),d=b.useMemo(function(){return p(p({},e(function(e,t){t?l.current=!0:l.current&&(t=e.instantSearchInstance,e.widgetParams,xr(e=$(e,Jr),f.current,function(e,t){return(null==e?void 0:e.constructor)===Function&&(null==t?void 0:t.constructor)===Function})&&t.status===h.current||(m(e),f.current=e,h.current=t.status))},function(){l.current=!1})(s)),u)},[e,s,u]),t=M(b.useState(function(){var e,t,r,n;return d.getWidgetRenderState?(e=c.getHelper(),t=c.getWidgetUiState({})[c.getIndexId()],e.state=(null==(n=d.getWidgetSearchParameters)?void 0:n.call(d,e.state,{uiState:t}))||e.state,t=(n=_r(c)).results,r=n.scopedResults,n=n.recommendResults,(n=d.getWidgetRenderState({helper:e,parent:c,instantSearchInstance:o,results:"recommend"===d.dependsOn&&n&&a?n[a.recommendIdx.current++]:t,scopedResults:r,state:e.state,renderState:o.renderState,templatesConfig:o.templatesConfig,createURL:c.createURL,searchMetadata:{isSearchStalled:"stalled"===o.status},status:o.status,error:o.error})).widgetParams,$(n,zr)):{}}),2),r=t[0],m=t[1];return qr({widget:d,parentIndex:c,props:s,shouldSsr:Boolean(i),skipSuspense:n}),r}function Xr(e,t){return h(Er,{searchParameters:e},t)}function Kr(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Gr(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Kr(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=Zr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Zr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Zr(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Kr(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Zr(e){return(Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Yr=a({name:"dynamic-widgets",connector:!0}),en=function(u){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:O;return m(u,Yr()),function(r){var c,e=r.widgets,t=r.maxValuesPerFacet,n=void 0===t?20:t,t=r.facets,i=void 0===t?["*"]:t,t=r.transformItems,a=void 0===t?function(e){return e}:t,s=r.fallbackWidget;if(!(e&&Array.isArray(e)&&e.every(function(e){return"object"===Zr(e)})))throw new Error(Yr("The `widgets` option expects an array of widgets."));if(Array.isArray(i))return c=new Map,{$$type:"ais.dynamicWidgets",init:function(r){e.forEach(function(e){var t=function(e,t){var r=null==(r=e.getWidgetRenderState)?void 0:r.call(e,t),t=null;if(r&&r.widgetParams&&((r=r.widgetParams).attribute?t=r.attribute:Array.isArray(r.attributes)&&(t=r.attributes[0])),"string"!=typeof t)throw new Error("Could not find the attribute of the widget:\n\n".concat(JSON.stringify(e),"\n\nPlease check whether the widget's getWidgetRenderState returns widgetParams.attribute correctly."));return t}(e,r);c.set(t,{widget:e,isMounted:!1})}),u(Gr(Gr({},this.getWidgetRenderState(r)),{},{instantSearchInstance:r.instantSearchInstance}),!0)},render:function(e){var t=e.parent,i=this.getWidgetRenderState(e),a=[],o=[];s&&i.attributesToRender.forEach(function(e){var t;c.has(e)||(t=s({attribute:e}),c.set(e,{widget:t,isMounted:!1}))}),c.forEach(function(e,t){var r=e.widget,e=e.isMounted,n=-1<i.attributesToRender.indexOf(t);!e&&n?(o.push(r),c.set(t,{widget:r,isMounted:!0})):e&&!n&&(a.push(r),c.set(t,{widget:r,isMounted:!1}))}),t.addWidgets(o),setTimeout(function(){return t.removeWidgets(a)},0),u(Gr(Gr({},i),{},{instantSearchInstance:e.instantSearchInstance}),!1)},dispose:function(e){var e=e.parent,r=[];c.forEach(function(e){var t=e.widget;e.isMounted&&r.push(t)}),e.removeWidgets(r),o()},getWidgetSearchParameters:function(e){return i.reduce(function(e,t){return e.addFacet(t)},e.setQueryParameters({maxValuesPerFacet:Math.max(n||0,e.maxValuesPerFacet||0)}))},getRenderState:function(e,t){return Gr(Gr({},e),{},{dynamicWidgets:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=e.results;e.state;if(!t)return{attributesToRender:[],widgetParams:r};e=a(null!=(e=null==(e=t.renderingContent)||null==(e=e.facetOrdering)||null==(e=e.facets)?void 0:e.order)?e:[],{results:t});if(Array.isArray(e))return{attributesToRender:e,widgetParams:r};throw new Error(Yr("The `transformItems` option expects a function that returns an Array."))}};throw new Error(Yr("The `facets` option only accepts an array of facets, you passed ".concat(JSON.stringify(i))))}};function tn(e,t){return h(en,p(p({},e),{},{widgets:[]}),t)}var rn=["children","fallbackComponent"];function nn(){return null}function an(e){return"object"===U(e)&&e.props}function on(e){return(on="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var cn=["initialSearchParameters"],sn=["initialRecommendParameters"];function un(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function ln(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?un(Object(r),!0).forEach(function(e){fn(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):un(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function fn(e,t,r){return(t=function(e){e=function(e,t){if("object"!=on(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=on(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==on(e)?e:e+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hn(e){return function(e){if(Array.isArray(e))return dn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){{var r;if(e)return"string"==typeof e?dn(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?dn(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function mn(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n={};for(r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),a=0;a<i.length;a++)r=i[a],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}var pn=a({name:"index-widget"});function gn(e,t){var r=t.state,n=t.recommendState,i=t.isPageReset,t=t._uiState;r!==e.state&&(e.state=r,e.emit("change",{state:e.state,results:e.lastResults,isPageReset:i,_uiState:t})),n!==e.recommendState&&(e.recommendState=n)}function yn(e,r,t){return e.reduce(function(e,t){return!j(t)&&(t.getWidgetUiState||t.getWidgetState)?t.getWidgetUiState?t.getWidgetUiState(e,r):t.getWidgetState(e,r):e},2<arguments.length&&void 0!==t?t:{})}function vn(e,t){var r=t.initialSearchParameters,n=mn(t,cn);return e.reduce(function(e,t){return!t.getWidgetSearchParameters||j(t)?e:"search"===t.dependsOn&&t.getWidgetParameters?t.getWidgetParameters(e,n):t.getWidgetSearchParameters(e,n)},r)}function bn(e,t){var r=t.initialRecommendParameters,n=mn(t,sn);return e.reduce(function(e,t){return!j(t)&&"recommend"===t.dependsOn&&t.getWidgetParameters?t.getWidgetParameters(e,n):e},r)}var Sn=function(e){if(void 0===e||void 0===e.indexName&&!e.EXPERIMENTAL_isolated)throw new Error(pn("The `indexName` option is required."));var t=e.indexName,c=void 0===t?"":t,t=e.indexId,s=void 0===t?c:t,t=e.EXPERIMENTAL_isolated,u=void 0!==t&&t,l=[],f={},h=null,d=null,m=null,p=null,g=null,y=!1,v=!1;return{$$type:"ais.index",$$widgetType:"ais.index",_isolated:u,getIndexName:function(){return c},getIndexId:function(){return s},getHelper:function(){return m},getResults:function(){var e;return null!=(e=p)&&e.lastResults?(p.lastResults._state=m.state,p.lastResults):null},getResultsForWidget:function(e){var t;return"recommend"!==e.dependsOn||j(e)||void 0===e.$$id?this.getResults():null!=(t=m)&&t.lastRecommendResults?m.lastRecommendResults[e.$$id]:null},getPreviousState:function(){return g},getScopedResults:function(){var e=this.getParent(),e=e?e.getWidgets():0===c.length?this.getWidgets():[this];return function r(e){return e.filter(j).reduce(function(e,t){return e.concat.apply(e,[{indexId:t.getIndexId(),results:t.getResults(),helper:t.getHelper()}].concat(hn(r(t.getWidgets()))))},[])}(e)},getParent:function(){return u?null:d},createURL:function(e){return"function"==typeof e?h._createURL(fn({},s,e(f))):h._createURL(fn({},s,yn(l,{searchParameters:e,helper:m})))},scheduleLocalSearch:Ot(function(){var e;u&&null!=(e=m)&&e.search()}),getWidgets:function(){return l},addWidgets:function(e){var t=this;if(!Array.isArray(e))throw new Error(pn("The `addWidgets` method expects an array of widgets."));e=e.reduce(function(e,t){return e.concat(Array.isArray(t)?t:[t])},[]);if(e.some(function(e){return"function"!=typeof e.init&&"function"!=typeof e.render}))throw new Error(pn("The widget definition expects a `render` and/or an `init` method."));return e.forEach(function(e){e.parent=t,j(e)||(h&&"recommend"===e.dependsOn?h._hasRecommendWidget=!0:h?h._hasSearchWidget=!0:"recommend"===e.dependsOn?y=!0:v=!0,"recommend"===(e=e).dependsOn&&(e.$$id=We++))}),l=l.concat(e),h&&Boolean(e.length)&&(gn(m,{state:vn(l,{uiState:f,initialSearchParameters:m.state}),recommendState:bn(l,{uiState:f,initialRecommendParameters:m.recommendState}),_uiState:f}),e.forEach(function(e){e.getRenderState&&On({renderState:e.getRenderState(h.renderState[t.getIndexId()]||{},dr(h,t,h._initialUiState)),instantSearchInstance:h,parent:t})}),e.forEach(function(e){e.init&&e.init(dr(h,t,h._initialUiState))}),u?this.scheduleLocalSearch():h.scheduleSearch()),this},removeWidgets:function(e){var r=this;if(!Array.isArray(e))throw new Error(pn("The `removeWidgets` method expects an array of widgets."));var t,n=e.reduce(function(e,t){return e.concat(Array.isArray(t)?t:[t])},[]);if(n.some(function(e){return"function"!=typeof e.dispose}))throw new Error(pn("The widget definition expects a `dispose` method."));return(l=l.filter(function(e){return-1===n.indexOf(e)})).forEach(function(e){e.parent=void 0,j(e)||(h&&"recommend"===e.dependsOn?h._hasRecommendWidget=!0:h?h._hasSearchWidget=!0:"recommend"===e.dependsOn?y=!0:v=!0)}),h&&Boolean(n.length)&&(t=(e=n.reduce(function(e,t){t=t.dispose({helper:m,state:e.cleanedSearchState,recommendState:e.cleanedRecommendState,parent:r});return t instanceof S.RecommendParameters?e.cleanedRecommendState=t:t&&(e.cleanedSearchState=t),e},{cleanedSearchState:m.state,cleanedRecommendState:m.recommendState})).cleanedSearchState,e=e.cleanedRecommendState,t=h.future.preserveSharedStateOnUnmount?vn(l,{uiState:f,initialSearchParameters:new S.SearchParameters({index:this.getIndexName()})}):vn(l,{uiState:yn(l,{searchParameters:t,helper:m}),initialSearchParameters:t}),f=yn(l,{searchParameters:t,helper:m}),m.setState(t),m.recommendState=e,l.length)&&(u?this.scheduleLocalSearch():h.scheduleSearch()),this},init:function(e){var t,r,n=this,i=e.instantSearchInstance,a=e.parent,o=e.uiState;null===m&&(h=i,d=a,f=o[s]||{},t=i.mainHelper,e=vn(l,{uiState:f,initialSearchParameters:new S.SearchParameters({index:c})}),r=bn(l,{uiState:f,initialRecommendParameters:new S.RecommendParameters}),(m=S(t.getClient(),e.index,e)).recommendState=r,m.search=function(){return u?(i.status="loading",n.render({instantSearchInstance:i}),i.compositionID?m.searchWithComposition():m.searchOnlyWithDerivedHelpers()):i.onStateChange?(i.onStateChange({uiState:i.mainIndex.getWidgetUiState({}),setUiState:function(e){return i.setUiState(e,!1)}}),t):t.search()},m.searchWithoutTriggeringOnStateChange=function(){return t.search()},e=c?m:S({},"__empty_index__",{}),r=u?e:function(e,t){for(;e;){if(e._isolated)return e.getHelper();e=e.getParent()}return t}(a,t),p=r.derive(function(){return ur.apply(void 0,[t.state].concat(hn(function(e){for(var t=e.getParent(),r=[e.getHelper().state];null!==t;)r=[t.getHelper().state].concat(r),t=t.getParent();return r}(n))))},function(){return n.getHelper().recommendState}),null!=(a=null==(e=i._initialResults)?void 0:e[this.getIndexId()])&&a.results&&(r=new S.SearchResults(new S.SearchParameters(a.state),a.results),p.lastResults=r,m.lastResults=r),null!=a&&a.recommendResults&&(e=new S.RecommendResults(new S.RecommendParameters({params:a.recommendResults.params}),a.recommendResults.results),p.lastRecommendResults=e,m.lastRecommendResults=e),m.on("change",function(e){e.isPageReset&&!function r(e){e=e.filter(j);0!==e.length&&e.forEach(function(e){var t=e.getHelper();gn(t,{state:t.state.resetPage(),recommendState:t.recommendState,isPageReset:!0}),r(e.getWidgets())})}(l)}),p.on("search",function(){i.scheduleStalledRender()}),p.on("result",function(e){e=e.results;i.scheduleRender(),m.lastResults=e,g=null==e?void 0:e._state}),p.on("recommend:result",function(e){e=e.recommend;i.scheduleRender(),m.lastRecommendResults=e.results}),l.forEach(function(e){e.getRenderState&&On({renderState:e.getRenderState(i.renderState[n.getIndexId()]||{},dr(i,n,o)),instantSearchInstance:i,parent:n})}),l.forEach(function(e){e.init&&e.init(dr(i,n,o))}),m.on("change",function(e){var t=e.state,e=e._uiState;f=yn(l,{searchParameters:t,helper:m},e||{}),i.onStateChange||i.onInternalStateChange()}),a&&i.scheduleRender(),y&&(i._hasRecommendWidget=!0),v)&&(i._hasSearchWidget=!0)},render:function(e){var t=this,r=e.instantSearchInstance,e=("error"===r.status&&!r.mainHelper.hasPendingRequests()&&g&&m.setState(g),this.getResults()||null!=(e=p)&&e.lastRecommendResults||u&&!c?l:l.filter(function(e){return e.shouldRender}));(e=e.filter(function(e){return!e.shouldRender||e.shouldRender({instantSearchInstance:r})})).forEach(function(e){e.getRenderState&&On({renderState:e.getRenderState(r.renderState[t.getIndexId()]||{},mr(r,t,e)),instantSearchInstance:r,parent:t})}),e.forEach(function(e){e.render&&e.render(mr(r,t,e))})},dispose:function(){var e,t=this;l.forEach(function(e){e.dispose&&m&&e.dispose({helper:m,state:m.state,recommendState:m.recommendState,parent:t})}),(d=h=null)!=(e=m)&&e.removeAllListeners(),(m=null)!=(e=p)&&e.detach(),p=null},getWidgetUiState:function(e){return l.filter(j).filter(function(e){return!e._isolated}).reduce(function(e,t){return t.getWidgetUiState(e)},ln(ln({},e),{},fn({},s,ln(ln({},e[s]),f))))},getWidgetState:function(e){return this.getWidgetUiState(e)},getWidgetSearchParameters:function(e,t){t=t.uiState;return vn(l,{uiState:t,initialSearchParameters:e})},shouldRender:function(){return!0},refreshUiState:function(){f=yn(l,{searchParameters:this.getHelper().state,helper:this.getHelper()},f)},setIndexUiState:function(e){var t="function"==typeof e?e(f):e;h.setUiState(function(e){return ln(ln({},e),{},fn({},s,t))})}}};function On(e){var t=e.renderState,r=e.instantSearchInstance,e=e.parent,e=(e||r.mainIndex).getIndexId();r.renderState=ln(ln({},r.renderState),{},fn({},e,ln(ln({},r.renderState[e]),t)))}function jn(){return M(b.useReducer(function(e){return e+1},0),2)[1]}var wn=["children"];function Pn(r){return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.descendantName,e=e.modifierName,t=t?"-".concat(t):"",e=e?"--".concat(e):"";return"".concat("ais","-").concat(r).concat(t).concat(e)}}var Rn=Pn("Highlight");var En=Pn("ReverseHighlight");var Fn=Pn("Snippet");var xn=Pn("ReverseSnippet");function In(e){return(In="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _n(e,t){var r,e={method:e,payload:t},t=e.method;if("object"!==In(e=e.payload))throw new Error("The insights helper expects the payload to be an object.");try{r=lt(e)}catch(e){throw new Error("Could not JSON serialize the payload object.")}return'data-insights-method="'.concat(t,'" data-insights-payload="').concat(r,'"')}function Tn(e){return(Tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var An="_ALGOLIA";function Dn(){var e=An;if("object"===("undefined"==typeof document?"undefined":Tn(document))&&"string"==typeof document.cookie)for(var t="".concat(e,"="),r=document.cookie.split(";"),n=0;n<r.length;n++){for(var i=r[n];" "===i.charAt(0);)i=i.substring(1);if(0===i.indexOf(t))return i.substring(t.length,i.length)}}function kn(e){return(kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nn(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Cn(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Nn(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=kn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=kn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==kn(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Nn(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Wn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||Ln(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hn(e){return function(e){if(Array.isArray(e))return $n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ln(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ln(e,t){var r;if(e)return"string"==typeof e?$n(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$n(e,t):void 0}function $n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Mn="2.17.2",Un="https://cdn.jsdelivr.net/npm/search-insights@".concat(Mn,"/dist/search-insights.min.js");function Qn(e){var e=0<arguments.length&&void 0!==e?e:{},t=e.insightsClient,g=e.insightsInitParams,y=e.onEvent,r=e.$$internal,v=void 0!==r&&r,r=e.$$automatic,b=void 0!==r&&r,a=t,S=(t||null===t||br(function(e){var n=e.window,i=n.AlgoliaAnalyticsObject||"aa";(a="string"==typeof i?n[i]:a)||(n.AlgoliaAnalyticsObject=i,n[i]||(n[i]=function(){n[i].queue||(n[i].queue=[]);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n[i].queue.push(t)},n[i].version=Mn,n[i].shouldAddScript=!0),a=n[i])}),a||O);return function(e){var l=e.instantSearchInstance,e=l.middleware.filter(function(e){return"ais.insights"===e.instance.$$type&&e.instance.$$internal}).map(function(e){return e.creator});l.unuse.apply(l,Hn(e));var t,f,h,e=Wn(xt(l.client),2),r=e[0],e=e[1],d=void 0,m=void 0,p=void 0,n=S.queue;return Array.isArray(n)&&(t=["setUserToken","init"].map(function(t){var e=wt(n.slice().reverse(),function(e){return Wn(e,1)[0]===t})||[];return Wn(e,2)[1]}),t=Wn(t,2),m=t[0],d=t[1]),S("getUserToken",null,function(e,t){p=qn(t)}),!g&&Bn(S)||S("init",Cn({appId:r,apiKey:e,partial:!0},g)),{$$type:"ais.insights",$$internal:v,$$automatic:b,onStateChange:function(){},subscribe:function(){if(S.shouldAddScript){var t="[insights middleware]: could not load search-insights.js. Please load it manually following https://alg.li/insights-init";try{var e=document.createElement("script");e.async=!0,e.src=Un,e.onerror=function(){l.emit("error",new Error(t))},document.body.appendChild(e),S.shouldAddScript=!1}catch(e){S.shouldAddScript=!1,l.emit("error",new Error(t))}}},started:function(){S("addAlgoliaAgent","insights-middleware"),h=l.mainHelper;var e,r=S.queue,t=(Array.isArray(r)&&(e=["setUserToken","init"].map(function(t){var e=wt(r.slice().reverse(),function(e){return Wn(e,1)[0]===t})||[];return Wn(e,2)[1]}),e=Wn(e,2),m=e[0],d=e[1]),o=(null==(o=(e=l)._initialResults)||null==(o=o[e.indexName])?void 0:o.state)||{},e=e.mainHelper.state,f={userToken:o.userToken||e.userToken,clickAnalytics:o.clickAnalytics||e.clickAnalytics},b||h.overrideStateWithoutTriggeringChangeEvent(Cn(Cn({},h.state),{},{clickAnalytics:!0})),v||l.scheduleSearch(),function(e){var t,r=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=qn(e);function i(){h.overrideStateWithoutTriggeringChangeEvent(Cn(Cn({},h.state),{},{userToken:n})),t&&t!==e&&l.scheduleSearch()}n&&(t=h.state.userToken,r?i():setTimeout(i,0))});function n(e){t(e,!0),S("setUserToken",e)}var i,a,o=void 0,c=Dn(),c=(o=c||"anonymous-".concat("xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),f.userToken),s=((i=null!=g&&g.userToken?g.userToken:i)?n(i):c?n(c):p?n(p):m?n(m):o&&(n(o),null!=g&&g.useCookie||null!=(i=d)&&i.useCookie)&&(c=o,o=(null==g?void 0:g.cookieDuration)||(null==(i=d)?void 0:i.cookieDuration),(i=new Date).setTime(i.getTime()+(o||15552e6)),o="expires=".concat(i.toUTCString()),document.cookie="_ALGOLIA=".concat(c,";").concat(o,";path=/")),S("onUserTokenChange",function(e){return t(e,!0)},{immediate:!0}),S),u=(Bn(S)&&(s=function(e,t){var r=Wn(xt(l.client),2),n=r[0],r=r[1];return S(e,t,{headers:{"X-Algolia-Application-Id":n,"X-Algolia-API-Key":r}})}),new Set);l.mainHelper.derivedHelpers[0].on("result",function(e){e=e.results;!e||e.queryID&&e.queryID===a||(a=e.queryID,u.clear())}),l.sendEventToInsights=function(e){if(y)y(e,s);else if(e.insightsMethod){if("viewedObjectIDs"===e.insightsMethod){var t=e.payload,r=t.objectIDs.filter(function(e){return!u.has(e)});if(0===r.length)return;r.forEach(function(e){return u.add(e)}),t.objectIDs=r}e.payload.algoliaSource=["instantsearch"],b&&e.payload.algoliaSource.push("instantsearch-automatic"),"internal"===e.eventModifier&&e.payload.algoliaSource.push("instantsearch-internal"),s(e.insightsMethod,e.payload)}}},unsubscribe:function(){S("onUserTokenChange",void 0),l.sendEventToInsights=O,h&&f&&(h.overrideStateWithoutTriggeringChangeEvent(Cn(Cn({},h.state),f)),l.scheduleSearch())}}}}function Bn(e){var e=Wn((e.version||"").split(".").map(Number),2),t=e[0],e=e[1];return 3<=t||2===t&&6<=e||1===t&&10<=e}function qn(e){if(e)return"number"==typeof e?e.toString():e}function Vn(e){var e=(0<arguments.length&&void 0!==e?e:{}).$$internal,a=void 0!==e&&e;return function(e){var t=e.instantSearchInstance,r={widgets:[]},n=document.createElement("meta"),i=document.querySelector("head");return n.name="instantsearch:widgets",{$$type:"ais.metadata",$$internal:a,onStateChange:function(){},subscribe:function(){setTimeout(function(){var e;r.ua=(e=t.client).transporter&&e.transporter.userAgent?e.transporter.userAgent.value:e._ua,function n(e,i,a){var o=dr(i,i.mainIndex,i._initialUiState);e.forEach(function(e){var t={},r=(e.getWidgetRenderState&&(r=e.getWidgetRenderState(o))&&r.widgetParams&&(t=r.widgetParams),Object.keys(t).filter(function(e){return void 0!==t[e]}));a.widgets.push({type:e.$$type,widgetType:e.$$widgetType,params:r}),"ais.index"===e.$$type&&n(e.getWidgets(),i,a)})}(t.mainIndex.getWidgets(),t,r),t.middleware.forEach(function(e){return r.widgets.push({middleware:!0,type:e.instance.$$type,internal:e.instance.$$internal})}),n.content=JSON.stringify(r),i.appendChild(n)},0)},started:function(){},unsubscribe:function(){n.remove()}}}}function Jn(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r}function zn(e,t,r,n,i,a,o,c,s,u,l,f,h,d){var m=e;if("function"==typeof o?m=o(t,m):m instanceof Date?m=u(m):"comma"===r&&ii(m)&&(m=ti.maybeMap(m,function(e){return e instanceof Date?u(e):e})),null===m){if(n)return a&&!h?a(t,w.encoder,d,"key",l):t;m=""}if(ui(m)||ti.isBuffer(m)){if(a){e=h?t:a(t,w.encoder,d,"key",l);if("comma"===r&&h){for(var p=ai.call(String(m),","),g="",y=0;y<p.length;++y)g+=(0===y?"":",")+f(a(p[y],w.encoder,d,"value",l));return[f(e)+"="+g]}return[f(e)+"="+f(a(m,w.encoder,d,"value",l))]}return[f(t)+"="+f(String(m))]}var v,b=[];if(void 0!==m){v="comma"===r&&ii(m)?[{value:0<m.length?m.join(",")||null:void 0}]:ii(o)?o:(e=Object.keys(m),c?e.sort(c):e);for(var S=0;S<v.length;++S){var O=v[S],j="object"==typeof O&&void 0!==O.value?O.value:m[O];i&&null===j||(O=ii(m)?"function"==typeof r?r(t,O):t:t+(s?"."+O:"["+O+"]"),ci(b,zn(j,O,r,n,i,a,o,c,s,u,l,f,h,d)))}}return b}var Xn=String.prototype.replace,Kn=/%20/g,J="RFC3986",Gn={default:J,formatters:{RFC1738:function(e){return Xn.call(e,Kn,"+")},RFC3986:function(e){return String(e)}},RFC1738:"RFC1738",RFC3986:J},Zn=Object.prototype.hasOwnProperty,Yn=Array.isArray,ei=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),ti={arrayToObject:Jn,assign:function(e,r){return Object.keys(r).reduce(function(e,t){return e[t]=r[t],e},e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var i=t[n],a=i.obj[i.prop],o=Object.keys(a),c=0;c<o.length;++c){var s=o[c],u=a[s];"object"==typeof u&&null!==u&&-1===r.indexOf(u)&&(t.push({obj:a,prop:s}),r.push(u))}for(var l=t;1<l.length;){var f=l.pop(),h=f.obj[f.prop];if(Yn(h)){for(var d=[],m=0;m<h.length;++m)void 0!==h[m]&&d.push(h[m]);f.obj[f.prop]=d}}return e},decode:function(t,e,r){t=t.replace(/\+/g," ");if("iso-8859-1"===r)return t.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(t)}catch(e){return t}},encode:function(e,t,r,n,i){if(0===e.length)return e;var a=e;if("symbol"==typeof e?a=Symbol.prototype.toString.call(e):"string"!=typeof e&&(a=String(e)),"iso-8859-1"===r)return escape(a).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});for(var o="",c=0;c<a.length;++c){var s=a.charCodeAt(c);45===s||46===s||95===s||126===s||48<=s&&s<=57||65<=s&&s<=90||97<=s&&s<=122||i===Gn.RFC1738&&(40===s||41===s)?o+=a.charAt(c):s<128?o+=ei[s]:s<2048?o+=ei[192|s>>6]+ei[128|63&s]:s<55296||57344<=s?o+=ei[224|s>>12]+ei[128|s>>6&63]+ei[128|63&s]:(c+=1,s=65536+((1023&s)<<10|1023&a.charCodeAt(c)),o+=ei[240|s>>18]+ei[128|s>>12&63]+ei[128|s>>6&63]+ei[128|63&s])}return o},isBuffer:function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(Yn(e)){for(var r=[],n=0;n<e.length;n+=1)r.push(t(e[n]));return r}return t(e)},merge:function n(i,a,o){if(!a)return i;if("object"!=typeof a){if(Yn(i))i.push(a);else{if(!i||"object"!=typeof i)return[i,a];(o&&(o.plainObjects||o.allowPrototypes)||!Zn.call(Object.prototype,a))&&(i[a]=!0)}return i}var e;return i&&"object"==typeof i?(Yn(e=i)&&!Yn(a)&&(e=Jn(i,o)),Yn(i)&&Yn(a)?(a.forEach(function(e,t){var r;Zn.call(i,t)?(r=i[t])&&"object"==typeof r&&e&&"object"==typeof e?i[t]=n(r,e,o):i.push(e):i[t]=e}),i):Object.keys(a).reduce(function(e,t){var r=a[t];return Zn.call(e,t)?e[t]=n(e[t],r,o):e[t]=r,e},e)):[i].concat(a)}},ri=Object.prototype.hasOwnProperty,ni={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},ii=Array.isArray,ai=String.prototype.split,oi=Array.prototype.push,ci=function(e,t){oi.apply(e,ii(t)?t:[t])},si=Date.prototype.toISOString,K=Gn.default,w={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:ti.encode,encodeValuesOnly:!1,format:K,formatter:Gn.formatters[K],indices:!1,serializeDate:function(e){return si.call(e)},skipNulls:!1,strictNullHandling:!1},ui=function(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||"symbol"==typeof e||"bigint"==typeof e},li=Object.prototype.hasOwnProperty,fi=Array.isArray,d={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:ti.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},hi=function(e){return e.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},di=function(e,t){return e&&"string"==typeof e&&t.comma&&-1<e.indexOf(",")?e.split(","):e},mi="utf8=%26%2310003%3B",pi="utf8=%E2%9C%93",gi=function(e,t,r,n){for(var i=n?t:di(t,r),a=e.length-1;0<=a;--a){var o,c,s,u=e[a];"[]"===u&&r.parseArrays?o=[].concat(i):(o=r.plainObjects?Object.create(null):{},c="["===u.charAt(0)&&"]"===u.charAt(u.length-1)?u.slice(1,-1):u,s=parseInt(c,10),r.parseArrays||""!==c?!isNaN(s)&&u!==c&&String(s)===c&&0<=s&&r.parseArrays&&s<=r.arrayLimit?(o=[])[s]=i:"__proto__"!==c&&(o[c]=i):o={0:i}),i=o}return i},yi={formats:Gn,parse:function(e,t){var r=function(e){if(!e)return d;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=(void 0===e.charset?d:e).charset;return{allowDots:void 0===e.allowDots?d.allowDots:!!e.allowDots,allowPrototypes:("boolean"==typeof e.allowPrototypes?e:d).allowPrototypes,arrayLimit:("number"==typeof e.arrayLimit?e:d).arrayLimit,charset:t,charsetSentinel:("boolean"==typeof e.charsetSentinel?e:d).charsetSentinel,comma:("boolean"==typeof e.comma?e:d).comma,decoder:("function"==typeof e.decoder?e:d).decoder,delimiter:("string"==typeof e.delimiter||ti.isRegExp(e.delimiter)?e:d).delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:d.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:("boolean"==typeof e.interpretNumericEntities?e:d).interpretNumericEntities,parameterLimit:("number"==typeof e.parameterLimit?e:d).parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:("boolean"==typeof e.plainObjects?e:d).plainObjects,strictNullHandling:("boolean"==typeof e.strictNullHandling?e:d).strictNullHandling}}(t);if(""===e||null==e)return r.plainObjects?Object.create(null):{};for(var n="string"==typeof e?function(e,t){var r,n,i,a,o={},e=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,c=t.parameterLimit===1/0?void 0:t.parameterLimit,s=e.split(t.delimiter,c),u=-1,l=t.charset;if(t.charsetSentinel)for(r=0;r<s.length;++r)0===s[r].indexOf("utf8=")&&(s[r]===pi?l="utf-8":s[r]===mi&&(l="iso-8859-1"),u=r,r=s.length);for(r=0;r<s.length;++r)r!==u&&((a=-1===(a=-1===(a=(n=s[r]).indexOf("]="))?n.indexOf("="):a+1)?(i=t.decoder(n,d.decoder,l,"key"),t.strictNullHandling?null:""):(i=t.decoder(n.slice(0,a),d.decoder,l,"key"),ti.maybeMap(di(n.slice(a+1),t),function(e){return t.decoder(e,d.decoder,l,"value")})))&&t.interpretNumericEntities&&"iso-8859-1"===l&&(a=hi(a)),-1<n.indexOf("[]=")&&(a=fi(a)?[a]:a),li.call(o,i)?o[i]=ti.combine(o[i],a):o[i]=a);return o}(e,r):e,i=r.plainObjects?Object.create(null):{},a=Object.keys(n),o=0;o<a.length;++o)var c=a[o],c=function(e,t,r,n){if(e){var i=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,o=0<r.depth&&/(\[[^[\]]*])/.exec(i),e=o?i.slice(0,o.index):i,c=[];if(e){if(!r.plainObjects&&li.call(Object.prototype,e)&&!r.allowPrototypes)return;c.push(e)}for(var s=0;0<r.depth&&null!==(o=a.exec(i))&&s<r.depth;){if(s+=1,!r.plainObjects&&li.call(Object.prototype,o[1].slice(1,-1))&&!r.allowPrototypes)return;c.push(o[1])}return o&&c.push("["+i.slice(o.index)+"]"),gi(c,t,r,n)}}(c,n[c],r,"string"==typeof e),i=ti.merge(i,c,r);return ti.compact(i)},stringify:function(e,t){var r=e,n=function(e){if(!e)return w;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||w.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=Gn.default;if(void 0!==e.format){if(!ri.call(Gn.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var n=Gn.formatters[r],i=w.filter;return"function"!=typeof e.filter&&!ii(e.filter)||(i=e.filter),{addQueryPrefix:("boolean"==typeof e.addQueryPrefix?e:w).addQueryPrefix,allowDots:void 0===e.allowDots?w.allowDots:!!e.allowDots,charset:t,charsetSentinel:("boolean"==typeof e.charsetSentinel?e:w).charsetSentinel,delimiter:(void 0===e.delimiter?w:e).delimiter,encode:("boolean"==typeof e.encode?e:w).encode,encoder:("function"==typeof e.encoder?e:w).encoder,encodeValuesOnly:("boolean"==typeof e.encodeValuesOnly?e:w).encodeValuesOnly,filter:i,format:r,formatter:n,serializeDate:("function"==typeof e.serializeDate?e:w).serializeDate,skipNulls:("boolean"==typeof e.skipNulls?e:w).skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:("boolean"==typeof e.strictNullHandling?e:w).strictNullHandling}}(t),i=("function"==typeof n.filter?r=(0,n.filter)("",r):ii(n.filter)&&(o=n.filter),[]);if("object"!=typeof r||null===r)return"";var e=t&&t.arrayFormat in ni?t.arrayFormat:!(t&&"indices"in t)||t.indices?"indices":"repeat",a=ni[e],o=o||Object.keys(r);n.sort&&o.sort(n.sort);for(var c=0;c<o.length;++c){var s=o[c];n.skipNulls&&null===r[s]||ci(i,zn(r[s],s,a,n.strictNullHandling,n.skipNulls,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset))}t=i.join(n.delimiter),e=!0===n.addQueryPrefix?"?":"";return n.charsetSentinel&&("iso-8859-1"===n.charset?e+="utf8=%26%2310003%3B&":e+="utf8=%E2%9C%93&"),0<t.length?e+t:""}};function vi(e){return(vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Si(n.key),n)}}function v(e,t,r){(t=Si(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}function Si(e){e=function(e,t){if("object"!=vi(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=vi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==vi(e)?e:e+""}function Oi(e){e&&(window.document.title=e)}var ji=function(){function l(e){var r=this,t=e.windowTitle,n=e.writeDelay,n=void 0===n?400:n,i=e.createURL,a=e.parseURL,o=e.getLocation,c=e.start,s=e.dispose,u=e.push,e=e.cleanUrlOnDispose;if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");v(this,"$$type","ais.browser"),v(this,"windowTitle",void 0),v(this,"writeDelay",void 0),v(this,"_createURL",void 0),v(this,"parseURL",void 0),v(this,"getLocation",void 0),v(this,"writeTimer",void 0),v(this,"_onPopState",void 0),v(this,"inPopState",!1),v(this,"isDisposed",!1),v(this,"latestAcknowledgedHistory",0),v(this,"_start",void 0),v(this,"_dispose",void 0),v(this,"_push",void 0),v(this,"_cleanUrlOnDispose",void 0),this.windowTitle=t,this.writeTimer=void 0,this.writeDelay=n,this._createURL=i,this.parseURL=a,this.getLocation=o,this._start=c,this._dispose=s,this._push=u,this._cleanUrlOnDispose=void 0===e||e,br(function(e){var e=e.window,t=r.windowTitle&&r.windowTitle(r.read());Oi(t),r.latestAcknowledgedHistory=e.history.length})}var e,t,r;return e=l,(t=[{key:"read",value:function(){return this.parseURL({qsModule:yi,location:this.getLocation()})}},{key:"write",value:function(i){var a=this;br(function(e){var t=e.window,r=a.createURL(i),n=a.windowTitle&&a.windowTitle(i);a.writeTimer&&clearTimeout(a.writeTimer),a.writeTimer=setTimeout(function(){Oi(n),a.shouldWrite(r)&&(a._push?a._push(r):t.history.pushState(i,n||"",r),a.latestAcknowledgedHistory=t.history.length),a.inPopState=!1,a.writeTimer=void 0},a.writeDelay)})}},{key:"onUpdate",value:function(e){var t=this;this._start&&this._start(function(){e(t.read())}),this._onPopState=function(){t.writeTimer&&(clearTimeout(t.writeTimer),t.writeTimer=void 0),t.inPopState=!0,e(t.read())},br(function(e){e.window.addEventListener("popstate",t._onPopState)})}},{key:"createURL",value:function(e){return this._createURL({qsModule:yi,routeState:e,location:this.getLocation()})}},{key:"dispose",value:function(){var t=this;this._dispose&&this._dispose(),this.isDisposed=!0,br(function(e){e=e.window;t._onPopState&&e.removeEventListener("popstate",t._onPopState)}),this.writeTimer&&clearTimeout(this.writeTimer),this._cleanUrlOnDispose&&this.write({})}},{key:"start",value:function(){this.isDisposed=!1}},{key:"shouldWrite",value:function(r){var n=this;return br(function(e){var t,e=e.window;return!(n.isDisposed&&!n._cleanUrlOnDispose)&&(t=!(n.isDisposed&&n.latestAcknowledgedHistory!==e.history.length),!n.inPopState)&&t&&r!==e.location.href})}}])&&bi(e.prototype,t),r&&bi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}();function wi(e){return(wi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Pi=["configure"];function Ri(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Ei(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ri(Object(r),!0).forEach(function(e){Fi(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ri(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Fi(e,t,r){return(t=function(e){e=function(e,t){if("object"!=wi(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=wi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==wi(e)?e:e+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xi(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n={};for(r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),a=0;a<i.length;a++)r=i[a],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}function Ii(e){e.configure;return xi(e,Pi)}function _i(e){return(_i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ti(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Ai(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ti(Object(r),!0).forEach(function(e){Di(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ti(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Di(e,t,r){return(t=function(e){e=function(e,t){if("object"!=_i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=_i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==_i(e)?e:e+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ki(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.router,i=void 0===t?function(e){var e=0<arguments.length&&void 0!==e?e:{},t=e.createURL,r=e.parseURL,n=e.writeDelay,i=e.windowTitle,a=e.getLocation,o=e.start,c=e.dispose,s=e.push,e=e.cleanUrlOnDispose;return new ji({createURL:void 0===t?function(e){var t=e.qsModule,r=e.routeState,e=e.location,n=e.protocol,i=e.hostname,a=e.port,a=void 0===a?"":a,o=e.pathname,e=e.hash,t=t.stringify(r),r=""===a?"":":".concat(a);return(t?"".concat(n,"//").concat(i).concat(r).concat(o,"?").concat(t):"".concat(n,"//").concat(i).concat(r).concat(o)).concat(e)}:t,parseURL:void 0===r?function(e){var t=e.qsModule,e=e.location;return t.parse(e.search.slice(1),{arrayLimit:99})}:r,writeDelay:void 0===n?400:n,windowTitle:i,getLocation:void 0===a?function(){return br(function(e){return e.window.location},{fallback:function(){throw new Error("You need to provide `getLocation` to the `history` router in environments where `window` does not exist.")}})}:a,start:o,dispose:c,push:s,cleanUrlOnDispose:e})}():t,a=void 0===(t=e.stateMapping)?{$$type:"ais.simple",stateToRoute:function(r){return Object.keys(r).reduce(function(e,t){return Ei(Ei({},e),{},Fi({},t,Ii(r[t])))},{})},routeToState:function(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(r).reduce(function(e,t){return Ei(Ei({},e),{},Fi({},t,Ii(r[t])))},{})}}:t,o=void 0!==(t=e.$$internal)&&t;return function(e){var t=e.instantSearchInstance;t._createURL=function(r){var e=0===t.mainIndex.getWidgets().length?t._initialUiState:t.mainIndex.getWidgetUiState({}),e=Object.keys(r).reduce(function(e,t){return Ai(Ai({},e),{},Di({},t,r[t]))},e),e=a.stateToRoute(e);return i.createURL(e)};var r=void 0,n=t._initialUiState;return{$$type:"ais.router({router:".concat(i.$$type||"__unknown__",", stateMapping:").concat(a.$$type||"__unknown__","})"),$$internal:o,onStateChange:function(e){e=e.uiState,e=a.stateToRoute(e);void 0!==r&&tr(r,e)||(i.write(e),r=e)},subscribe:function(){t._initialUiState=Ai(Ai({},n),a.routeToState(i.read())),i.onUpdate(function(e){0<t.mainIndex.getWidgets().length&&t.setUiState(a.routeToState(e))})},started:function(){var e;null!=(e=i.start)&&e.call(i)},unsubscribe:function(){i.dispose()}}}}function Ni(e){return(Ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ci(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Wi(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ci(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=Ni(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Ni(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Ni(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Ci(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Hi(e){var r=e.numberLocale;return{formatNumber:function(e,t){return Number(t(e)).toLocaleString(r)},highlight:function(e,t){try{var r=JSON.parse(e);return t((n=Wi(Wi({},r),{},{hit:this}),i=n.attribute,a=void 0===(a=n.highlightedTagName)?"mark":a,o=n.hit,n=void 0===(n=n.cssClasses)?{}:n,i=void 0===(o=(At(o._highlightResult,i)||{}).value)?"":o,o=Rn({descendantName:"highlighted"})+(n.highlighted?" ".concat(n.highlighted):""),i.replace(new RegExp(u.highlightPreTag,"g"),"<".concat(a,' class="').concat(o,'">')).replace(new RegExp(u.highlightPostTag,"g"),"</".concat(a,">"))))}catch(e){throw new Error('\nThe highlight helper expects a JSON object of the format:\n{ "attribute": "name", "highlightedTagName": "mark" }')}var n,i,a,o},reverseHighlight:function(e,t){try{var r=JSON.parse(e);return t((n=Wi(Wi({},r),{},{hit:this}),i=n.attribute,a=void 0===(a=n.highlightedTagName)?"mark":a,o=n.hit,n=void 0===(n=n.cssClasses)?{}:n,i=void 0===(o=(At(o._highlightResult,i)||{}).value)?"":o,o=En({descendantName:"highlighted"})+(n.highlighted?" ".concat(n.highlighted):""),nt(vr(It(i))).replace(new RegExp(u.highlightPreTag,"g"),"<".concat(a,' class="').concat(o,'">')).replace(new RegExp(u.highlightPostTag,"g"),"</".concat(a,">"))))}catch(e){throw new Error('\n  The reverseHighlight helper expects a JSON object of the format:\n  { "attribute": "name", "highlightedTagName": "mark" }')}var n,i,a,o},snippet:function(e,t){try{var r=JSON.parse(e);return t((n=Wi(Wi({},r),{},{hit:this}),i=n.attribute,a=void 0===(a=n.highlightedTagName)?"mark":a,o=n.hit,n=void 0===(n=n.cssClasses)?{}:n,i=void 0===(o=(At(o._snippetResult,i)||{}).value)?"":o,o=Fn({descendantName:"highlighted"})+(n.highlighted?" ".concat(n.highlighted):""),i.replace(new RegExp(u.highlightPreTag,"g"),"<".concat(a,' class="').concat(o,'">')).replace(new RegExp(u.highlightPostTag,"g"),"</".concat(a,">"))))}catch(e){throw new Error('\nThe snippet helper expects a JSON object of the format:\n{ "attribute": "name", "highlightedTagName": "mark" }')}var n,i,a,o},reverseSnippet:function(e,t){try{var r=JSON.parse(e);return t((n=Wi(Wi({},r),{},{hit:this}),i=n.attribute,a=void 0===(a=n.highlightedTagName)?"mark":a,o=n.hit,n=void 0===(n=n.cssClasses)?{}:n,i=void 0===(o=(At(o._snippetResult,i)||{}).value)?"":o,o=xn({descendantName:"highlighted"})+(n.highlighted?" ".concat(n.highlighted):""),nt(vr(It(i))).replace(new RegExp(u.highlightPreTag,"g"),"<".concat(a,' class="').concat(o,'">')).replace(new RegExp(u.highlightPostTag,"g"),"</".concat(a,">"))))}catch(e){throw new Error('\n  The reverseSnippet helper expects a JSON object of the format:\n  { "attribute": "name", "highlightedTagName": "mark" }')}var n,i,a,o},insights:function(e,t){try{var r=JSON.parse(e),n=r.method,i=r.payload;return t(_n(n,Wi({objectIDs:[this.objectID]},i)))}catch(e){throw new Error('\nThe insights helper expects a JSON object of the format:\n{ "method": "method-name", "payload": { "eventName": "name of the event" } }')}}}}function Li(e){return(Li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $i(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Mi(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?$i(Object(r),!0).forEach(function(e){R(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$i(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Ui(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ji(n.key),n)}}function Qi(e,t){return(Qi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Bi(r){var n=qi();return function(){var e,t=Vi(r),t=(e=n?(e=Vi(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"==Li(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return P(t)}}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(qi=function(){return!!e})()}function Vi(e){return(Vi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t,r){(t=Ji(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}function Ji(e){e=function(e,t){if("object"!=Li(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Li(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Li(e)?e:e+""}var zi=a({name:"instantsearch"});function Xi(){return"#"}var Ki={preserveSharedStateOnUnmount:!1,persistHierarchicalRootCount:!1},Gi=function(){var e=p,t=Q;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qi(e,t);var r,m=Bi(p);function p(e){var r;if(!(this instanceof p))throw new TypeError("Cannot call a class as a function");R(P(r=m.call(this)),"client",void 0),R(P(r),"indexName",void 0),R(P(r),"compositionID",void 0),R(P(r),"insightsClient",void 0),R(P(r),"onStateChange",null),R(P(r),"future",void 0),R(P(r),"helper",void 0),R(P(r),"mainHelper",void 0),R(P(r),"mainIndex",void 0),R(P(r),"started",void 0),R(P(r),"templatesConfig",void 0),R(P(r),"renderState",{}),R(P(r),"_stalledSearchDelay",void 0),R(P(r),"_searchStalledTimer",void 0),R(P(r),"_initialUiState",void 0),R(P(r),"_initialResults",void 0),R(P(r),"_manuallyResetScheduleSearch",!1),R(P(r),"_resetScheduleSearch",void 0),R(P(r),"_createURL",void 0),R(P(r),"_searchFunction",void 0),R(P(r),"_mainHelperSearch",void 0),R(P(r),"_hasSearchWidget",!1),R(P(r),"_hasRecommendWidget",!1),R(P(r),"_insights",void 0),R(P(r),"middleware",[]),R(P(r),"sendEventToInsights",void 0),R(P(r),"status","idle"),R(P(r),"error",void 0),R(P(r),"scheduleSearch",Ot(function(){r.started&&r.mainHelper.search()})),R(P(r),"scheduleRender",Ot(function(){var e,t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];null!=(e=r.mainHelper)&&e.hasPendingRequests()||(clearTimeout(r._searchStalledTimer),r._searchStalledTimer=null,t&&(r.status="idle",r.error=void 0)),r.mainIndex.render({instantSearchInstance:P(r)}),r.emit("render")})),R(P(r),"onInternalStateChange",Ot(function(){var t=r.mainIndex.getWidgetUiState({});r.middleware.forEach(function(e){e.instance.onStateChange({uiState:t})})})),r.setMaxListeners(100);var t=e.indexName,t=void 0===t?"":t,n=e.compositionID,i=e.numberLocale,a=e.initialUiState,a=void 0===a?{}:a,o=e.routing,o=void 0===o?null:o,c=e.insights,c=void 0===c?void 0:c,s=e.searchFunction,u=e.stalledSearchDelay,u=void 0===u?200:u,l=e.searchClient,l=void 0===l?null:l,f=e.insightsClient,f=void 0===f?null:f,h=e.onStateChange,h=void 0===h?null:h,d=e.future,e=void 0===d?Mi(Mi({},Ki),e.future||{}):d;if(null===l)throw new Error(zi("The `searchClient` option is required."));if("function"!=typeof l.search)throw new Error("The `searchClient` must implement a `search` method.\n\nSee: https://www.algolia.com/doc/guides/building-search-ui/going-further/backend-search/in-depth/backend-instantsearch/js/");if("function"==typeof l.addAlgoliaAgent&&l.addAlgoliaAgent("instantsearch.js (".concat("4.86.1",")")),f&&"function"!=typeof f)throw new Error(zi("The `insightsClient` option should be a function."));return r.client=l,r.future=e,r.insightsClient=f,r.indexName=t,r.compositionID=n,r.helper=null,r.mainHelper=null,r.mainIndex=Sn({indexName:r.compositionID||r.indexName}),r.onStateChange=h,r.started=!1,r.templatesConfig={helpers:Hi({numberLocale:i}),compileOptions:{}},r._stalledSearchDelay=u,r._searchStalledTimer=null,r._createURL=Xi,r._initialUiState=a,r._initialResults=null,r._insights=c,s&&(r._searchFunction=s),r.sendEventToInsights=O,o&&((d="boolean"==typeof o?{}:o).$$internal=!0,r.use(ki(d))),c&&((l="boolean"==typeof c?{}:c).$$internal=!0,r.use(Qn(l))),br(function(e){return-1<(null==(e=e.window.navigator)||null==(e=e.userAgent)?void 0:e.indexOf("Algolia Crawler"))},{fallback:function(){return!1}})&&r.use(Vn({$$internal:!0})),r}return e=p,(t=[{key:"_isSearchStalled",get:function(){return"stalled"===this.status}},{key:"use",value:function(){for(var r=this,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.map(function(e){var t=Mi({$$type:"__unknown__",$$internal:!1,subscribe:O,started:O,unsubscribe:O,onStateChange:O},e({instantSearchInstance:r}));return r.middleware.push({creator:e,instance:t}),t});return this.started&&i.forEach(function(e){e.subscribe(),e.started()}),this}},{key:"unuse",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.middleware.filter(function(e){return t.includes(e.creator)}).forEach(function(e){return e.instance.unsubscribe()}),this.middleware=this.middleware.filter(function(e){return!t.includes(e.creator)}),this}},{key:"EXPERIMENTAL_use",value:function(){return this.use.apply(this,arguments)}},{key:"addWidget",value:function(e){return this.addWidgets([e])}},{key:"addWidgets",value:function(e){if(!Array.isArray(e))throw new Error(zi("The `addWidgets` method expects an array of widgets. Please use `addWidget`."));if(this.compositionID&&e.some(function(e){return!Array.isArray(e)&&j(e)&&!e._isolated}))throw new Error(zi("The `index` widget cannot be used with a composition-based InstantSearch implementation."));return this.mainIndex.addWidgets(e),this}},{key:"removeWidget",value:function(e){return this.removeWidgets([e])}},{key:"removeWidgets",value:function(e){if(Array.isArray(e))return this.mainIndex.removeWidgets(e),this;throw new Error(zi("The `removeWidgets` method expects an array of widgets. Please use `removeWidget`."))}},{key:"start",value:function(){var n=this;if(this.started)throw new Error(zi("The `start` method has already been called once."));var r,e,t,i,a,o=this.mainHelper||S(this.client,this.indexName,void 0,{persistHierarchicalRootCount:this.future.persistHierarchicalRootCount});this.compositionID&&(o.searchForFacetValues=o.searchForCompositionFacetValues.bind(o)),o.search=function(){return n.status="loading",n.scheduleRender(!1),n._hasSearchWidget&&(n.compositionID?o.searchWithComposition():o.searchOnlyWithDerivedHelpers()),n._hasRecommendWidget&&o.recommend(),o},this._searchFunction&&(r={search:function(){return new Promise(O)}},this._mainHelperSearch=o.search.bind(o),o.search=function(){var t=n.mainIndex.getHelper(),e=S(r,t.state.index,t.state);return e.once("search",function(e){e=e.state;t.overrideStateWithoutTriggeringChangeEvent(e),n._mainHelperSearch()}),e.on("change",function(e){e=e.state;t.setState(e)}),n._searchFunction(e),o}),o.on("error",function(e){var r,e=e.error;e instanceof Error||(r=e,e=Object.keys(r).reduce(function(e,t){return e[t]=r[t],e},new Error(r.message))),e.error=e,n.error=e,n.status="error",n.scheduleRender(!1),n.emit("error",e)}),this.mainHelper=o,this.middleware.forEach(function(e){e.instance.subscribe()}),this.mainIndex.init({instantSearchInstance:this,parent:null,uiState:this._initialUiState}),this._initialResults?(Zt(this.client,this._initialResults),t=this.mainHelper,i=this._initialResults,a=Object.keys(i).reduce(function(e,t){t=i[t];return t.recommendResults?qt(qt({},e),t.recommendResults.results):e},{}),t._recommendCache=a,e=this.scheduleSearch,this.scheduleSearch=Ot(O),this._manuallyResetScheduleSearch?this._resetScheduleSearch=function(){n.scheduleSearch=e}:Ot(function(){n.scheduleSearch=e})()):0<this.mainIndex.getWidgets().length&&this.scheduleSearch(),this.helper=this.mainIndex.getHelper(),this.started=!0,this.middleware.forEach(function(e){e.instance.started()}),void 0===this._insights&&o.derivedHelpers[0].once("result",function(){n.mainIndex.getScopedResults().some(function(e){e=e.results;return null==e?void 0:e._automaticInsights})&&n.use(Qn({$$internal:!0,$$automatic:!0}))})}},{key:"dispose",value:function(){var e;this.scheduleSearch.cancel(),this.scheduleRender.cancel(),clearTimeout(this._searchStalledTimer),this.removeWidgets(this.mainIndex.getWidgets()),this.mainIndex.dispose(),this.started=!1,this.removeAllListeners(),null!=(e=this.mainHelper)&&e.removeAllListeners(),this.mainHelper=null,this.helper=null,this.middleware.forEach(function(e){e.instance.unsubscribe()})}},{key:"scheduleStalledRender",value:function(){var e=this;this._searchStalledTimer||(this._searchStalledTimer=setTimeout(function(){e.status="stalled",e.scheduleRender()},this._stalledSearchDelay))}},{key:"setUiState",value:function(e){var t=this,r=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(!this.mainHelper)throw new Error(zi("The `start` method needs to be called before `setUiState`."));this.mainIndex.refreshUiState();var n="function"==typeof e?e(this.mainIndex.getWidgetUiState({})):e;this.onStateChange&&r?this.onStateChange({uiState:n,setUiState:function(e){bt("function"==typeof e?e(n):e,t.mainIndex),t.scheduleSearch(),t.onInternalStateChange()}}):(bt(n,this.mainIndex),this.scheduleSearch(),this.onInternalStateChange())}},{key:"getUiState",value:function(){return this.started&&this.mainIndex.refreshUiState(),this.mainIndex.getWidgetUiState({})}},{key:"createURL",value:function(){if(this.started)return this._createURL(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{});throw new Error(zi("The `start` method needs to be called before `createURL`."))}},{key:"refresh",value:function(){if(!this.mainHelper)throw new Error(zi("The `start` method needs to be called before `refresh`."));this.mainHelper.clearCache().search()}}])&&Ui(e.prototype,t),r&&Ui(e,r),Object.defineProperty(e,"prototype",{writable:!1}),p}();function Zi(e,t){return e(t={exports:{}},t.exports),t.exports}var Yi="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},ea=s.useState,ta=s.useEffect,ra=s.useLayoutEffect,na=s.useDebugValue;function ia(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Yi(e,r)}catch(e){return 1}}var t="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=ea({inst:{value:r,getSnapshot:t}}),i=n[0].inst,a=n[1];return ra(function(){i.value=r,i.getSnapshot=t,ia(i)&&a({inst:i})},[e,r,t]),ta(function(){return ia(i)&&a({inst:i}),e(function(){ia(i)&&a({inst:i})})},[e]),na(r),r},aa={useSyncExternalStore:void 0!==s.useSyncExternalStore?s.useSyncExternalStore:t},oa=(Zi(function(e,t){}).useSyncExternalStore,Zi(function(e){e.exports=aa}).useSyncExternalStore),ca=["react (".concat(b.version,")"),"react-instantsearch (".concat(C,")"),"react-instantsearch-core (".concat(C,")")],sa="react-instantsearch-server (".concat(C,")"),ua=function(e){return e?"next.js (".concat(e,")"):null};function la(e){var t,r=jn(),n=Wr(),i=Lr(),a=Br().waitForResultsRef,o=null==i?void 0:i.initialResults,c=b.useRef(e),a=n||o||a,s=b.useRef(null),o=(null===(s=null!=i&&i.ssrSearchRef?i.ssrSearchRef:s).current&&((t=new Gi(e))._schedule=function(e){t._schedule.queue.push(e),clearTimeout(t._schedule.timer),t._schedule.timer=setTimeout(function(){t._schedule.queue.forEach(function(e){e()}),t._schedule.queue=[]},0)},t._schedule.queue=[],a&&(t._initialResults=o||{},t._manuallyResetScheduleSearch=!0),fa(e.searchClient,[].concat(ca,[n&&sa,ua("undefined"!=typeof window&&(null==(u=window.next)?void 0:u.version)||("undefined"==typeof process||null==(u=process.env)?void 0:u.NEXT_RUNTIME))])),a&&t.start(),n&&n.notifyServer({search:t}),e.routing,s.current=t),s.current),u=c.current,l=(u.indexName!==e.indexName&&(o.helper.setIndex(e.indexName||"").search(),c.current=e),u.searchClient!==e.searchClient&&(fa(e.searchClient,[].concat(ca,[n&&sa])),o.mainHelper.setClient(e.searchClient).search(),c.current=e),u.onStateChange!==e.onStateChange&&(o.onStateChange=e.onStateChange,c.current=e),u.searchFunction!==e.searchFunction&&(o._searchFunction=e.searchFunction,c.current=e),u.stalledSearchDelay!==e.stalledSearchDelay&&(o._stalledSearchDelay=null!=(a=e.stalledSearchDelay)?a:200,c.current=e),xr(u.future,e.future)||(o.future=p(p({},Ki),e.future),c.current=e),b.useRef(null));return oa(b.useCallback(function(){var e=s.current;return null===l.current?e.started||(e.start(),r()):(clearTimeout(l.current),e._preventWidgetCleanup=!1),function(){null!=i&&i.ssrSearchRef||(clearTimeout(e._schedule.timer),l.current=setTimeout(function(){e.dispose()}),e._preventWidgetCleanup=!0)}},[r,i]),function(){return s.current},function(){return s.current})}function fa(t,e){"function"==typeof t.addAlgoliaAgent&&e.filter(Boolean).forEach(function(e){t.addAlgoliaAgent(e)})}var ha=["children"];function da(e){var t=e.search;return b.useEffect(function(){t._resetScheduleSearch&&t._resetScheduleSearch()},[t]),null}var ma=["children"];function pa(e){var t=e.children,e=$(e,ma),r=s.useRef(null),n=s.useRef(0);return 0===Object.keys(e).length?s.createElement(s.Fragment,null,t):s.createElement(Hr.Provider,{value:p(p({},e),{},{ssrSearchRef:r,recommendIdx:n})},t)}function ga(e){return(ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ya(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function E(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ya(Object(r),!0).forEach(function(e){va(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ya(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function va(e,t,r){return(t=function(e){e=function(e,t){if("object"!=ga(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=ga(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==ga(e)?e:e+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ba(r){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:O;return m(r,Sa()),function(o){var e=(o||{}).escapeHTML,c=void 0===e||e,s={};return{$$type:"ais.autocomplete",init:function(e){var t=e.instantSearchInstance;r(E(E({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance,e=this.getWidgetRenderState(e);e.indices.forEach(function(e){(0,e.sendEvent)("view:internal",e.hits)}),r(E(E({},e),{},{instantSearchInstance:t}),!1)},getRenderState:function(e,t){return E(E({},e),{},{autocomplete:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var n=this,t=e.helper,r=e.state,i=e.scopedResults,a=e.instantSearchInstance,e=(s.refine||(s.refine=function(e){t.setQuery(e).search()}),i.map(function(e){e.results&&(e.results.hits=c?rt(e.results.hits):e.results.hits);var t,r=yt({instantSearchInstance:a,helper:e.helper,widgetType:n.$$type});return{indexId:e.indexId,indexName:(null==(t=e.results)?void 0:t.index)||"",hits:(null==(t=e.results)?void 0:t.hits)||[],results:e.results||{},sendEvent:r}}));return{currentRefinement:r.query||"",indices:e,refine:s.refine,widgetParams:o}},getWidgetUiState:function(e,t){t=t.searchParameters.query||"";return""===t||e&&e.query===t?e:E(E({},e),{},{query:t})},getWidgetSearchParameters:function(e,t){t={query:t.uiState.query||""};return c?e.setQueryParameters(E(E({},t),_)):e.setQueryParameters(t)},dispose:function(e){e=e.state,t(),e=e.setQueryParameter("query",void 0);return c?e.setQueryParameters(Object.keys(_).reduce(function(e,t){return E(E({},e),{},va({},t,void 0))},{})):e}}}}var Sa=a({name:"autocomplete",connector:!0});function Oa(e){return(Oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ja(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function F(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ja(Object(r),!0).forEach(function(e){wa(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ja(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function wa(e,t,r){return(t=function(e){e=function(e,t){if("object"!=Oa(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Oa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Oa(e)?e:e+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||function(e,t){{var r;if(e)return"string"==typeof e?Ra(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ra(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ra(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Ea(a){var l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:O,f=(m(a,Fa()),{});return function(o){var c,e=o||{},r=e.attributes,t=e.separator,n=void 0===t?" > ":t,t=e.rootPath,i=void 0===t?null:t,t=e.transformItems,s=void 0===t?function(e){return e}:t;if(r&&Array.isArray(r)&&0!==r.length)return c=Pa(r,1)[0],{$$type:"ais.breadcrumb",init:function(e){a(F(F({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(e){a(F(F({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!1)},dispose:function(){l()},getRenderState:function(e,t){return F(F({},e),{},{breadcrumb:F(F({},e.breadcrumb),{},wa({},c,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var r=this,n=e.helper,i=e.createURL,t=e.results,e=e.state;var a,e=t&&0!==e.hierarchicalFacets.length?(e=(e=t.getFacetValues(c,{}))&&!Array.isArray(e)&&e.data?e.data:[],s((a=function r(e){return e.reduce(function(e,t){return e=t.isRefined&&(e.push({label:t.name,value:t.escapedValue}),Array.isArray(t.data))?e.concat(r(t.data)):e},[])}(e)).map(function(e,t){return{label:e.label,value:t+1===a.length?null:a[t+1].value}}),{results:t})):[];return f.createURL||(f.createURL=function(t){return i(function(e){return r.getWidgetUiState(e,{searchParameters:u(n.state,t),helper:n})})}),f.refine||(f.refine=function(e){n.setState(u(n.state,e)).search()}),{canRefine:0<e.length,createURL:f.createURL,items:e,refine:f.refine,widgetParams:o}},getWidgetUiState:function(e,t){var t=t.searchParameters.getHierarchicalFacetBreadcrumb(c);return e=F(F({},e),{},{hierarchicalMenu:F(F({},e.hierarchicalMenu),{},wa({},c,t))}),t=c,e.hierarchicalMenu&&(e.hierarchicalMenu[t]&&e.hierarchicalMenu[t].length||delete e.hierarchicalMenu[t],0===Object.keys(e.hierarchicalMenu).length)&&delete e.hierarchicalMenu,e},getWidgetSearchParameters:function(e,t){t=t.uiState,t=t.hierarchicalMenu&&t.hierarchicalMenu[c];if(e.isConjunctiveFacet(c)||e.isDisjunctiveFacet(c))return e;e.isHierarchicalFacet(c)&&e.getHierarchicalFacetByName(c);e=e.removeHierarchicalFacet(c).addHierarchicalFacet({name:c,attributes:r,separator:n,rootPath:i});return t?e.addHierarchicalFacetRefinement(c,t.join(n)):e.setQueryParameters({hierarchicalFacetsRefinements:F(F({},e.hierarchicalFacetsRefinements),{},wa({},c,[]))})}};throw new Error(Fa("The `attributes` option expects an array of strings."));function u(e,t){return t?e.resetPage().toggleFacetRefinement(c,t):0===(t=e.getHierarchicalFacetBreadcrumb(c)).length?e:e.resetPage().toggleFacetRefinement(c,t[0])}}}var Fa=a({name:"breadcrumb",connector:!0});function xa(e){return(xa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ia(e){return function(e){if(Array.isArray(e))return _a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){{var r;if(e)return"string"==typeof e?_a(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_a(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Ta(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Aa(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ta(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=xa(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=xa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==xa(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Ta(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Da(r){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:O;return m(r,ka()),function(n){var e=n||{},t=e.includedAttributes,c=void 0===t?[]:t,t=e.excludedAttributes,s=void 0===t?["query"]:t,t=e.transformItems,u=void 0===t?function(e){return e}:t;if(n&&n.includedAttributes&&n.excludedAttributes)throw new Error(ka("The options `includedAttributes` and `excludedAttributes` cannot be used together."));function i(){return l.refine()}function a(){return l.createURL()}var l={refine:O,createURL:function(){return""},attributesToClear:[]};return{$$type:"ais.clearRefinements",init:function(e){var t=e.instantSearchInstance;r(Aa(Aa({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;r(Aa(Aa({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(){o()},getRenderState:function(e,t){return Aa(Aa({},e),{},{clearRefinements:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=e.createURL,r=e.scopedResults,o=e.results,e=(l.attributesToClear=r.reduce(function(e,t){return e.concat((t=(e={scopedResult:t,includedAttributes:c,excludedAttributes:s,transformItems:u,results:o}).scopedResult,r=e.includedAttributes,n=e.excludedAttributes,i=e.transformItems,e=e.results,a=-1!==r.indexOf("query")||-1===n.indexOf("query"),{helper:t.helper,items:i(nr(kt(t.results,t.helper.state,a).map(function(e){return e.attribute}).filter(function(e){return 0===r.length||-1!==r.indexOf(e)}).filter(function(e){return"query"===e&&a||-1===n.indexOf(e)})),{results:e})}));var r,n,i,a},[]),l.refine=function(){l.attributesToClear.forEach(function(e){var t=e.helper,e=e.items;t.setState($e({helper:t,attributesToClear:e})).search()})},l.createURL=function(){return t(ur.apply(void 0,Ia(l.attributesToClear.map(function(e){return $e({helper:e.helper,attributesToClear:e.items})}))))},l.attributesToClear.some(function(e){return 0<e.items.length}));return{canRefine:e,hasRefinements:e,refine:i,createURL:a,widgetParams:n}}}}}var ka=a({name:"clear-refinements",connector:!0});function Na(e){return(Na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ca(e){return function(e){if(Array.isArray(e))return Wa(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){{var r;if(e)return"string"==typeof e?Wa(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Wa(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wa(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Ha(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function La(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ha(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=Na(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Na(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Na(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Ha(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function $a(r){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:O;return m(r,Ma()),function(a){if((a||{}).includedAttributes&&(a||{}).excludedAttributes)throw new Error(Ma("The options `includedAttributes` and `excludedAttributes` cannot be used together."));var e=a||{},o=e.includedAttributes,t=e.excludedAttributes,c=void 0===t?["query"]:t,t=e.transformItems,s=void 0===t?function(e){return e}:t;return{$$type:"ais.currentRefinements",init:function(e){var t=e.instantSearchInstance;r(La(La({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;r(La(La({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(){n()},getRenderState:function(e,t){return La(La({},e),{},{currentRefinements:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var r=e.results,t=e.scopedResults,n=e.createURL,i=e.helper;e=r?t.reduce(function(e,t){return e.concat(s(Ua({results:t.results,helper:t.helper,indexId:t.indexId,includedAttributes:o,excludedAttributes:c}),{results:r}))},[]):s(Ua({results:null,helper:i,indexId:i.state.index,includedAttributes:o,excludedAttributes:c}),{results:r});return{items:e,canRefine:0<e.length,refine:function(e){return Ba(i,e)},createURL:function(e){return n(Qa(i.state,e))},widgetParams:a}}}}}var Ma=a({name:"current-refinements",connector:!0});function Ua(e){var t=e.results,r=e.helper,n=e.indexId,i=e.includedAttributes,a=e.excludedAttributes,e=-1!==(i||[]).indexOf("query")||-1===(a||[]).indexOf("query"),o=i?function(e){return-1!==i.indexOf(e.attribute)}:function(e){return-1===a.indexOf(e.attribute)},c=kt(t,r.state,e).map(qa).filter(o);return c.reduce(function(e,t){return[].concat(Ca(e.filter(function(e){return e.attribute!==t.attribute})),[{indexName:r.state.index,indexId:n,attribute:t.attribute,label:t.attribute,refinements:c.filter(function(e){return e.attribute===t.attribute}).sort(function(e,t){return"numeric"===e.type?e.value-t.value:0}),refine:function(e){return Ba(r,e)}}])},[])}function Qa(e,t){switch(e=e.resetPage(),t.type){case"facet":return e.removeFacetRefinement(t.attribute,String(t.value));case"disjunctive":return e.removeDisjunctiveFacetRefinement(t.attribute,String(t.value));case"hierarchical":return e.removeHierarchicalFacetRefinement(t.attribute);case"exclude":return e.removeExcludeRefinement(t.attribute,String(t.value));case"numeric":return e.removeNumericRefinement(t.attribute,t.operator,String(t.value));case"tag":return e.removeTagRefinement(String(t.value));case"query":return e.setQueryParameter("query","");default:return e}}function Ba(e,t){e.setState(Qa(e.state,t)).search()}function qa(e){var t=function(e){if("numeric"===e.type)return Number(e.name);if("escapedValue"in e)return e.escapedValue;return e.name}(e),r=e.operator?"".concat(function(e){switch(e){case">=":return"â¥";case"<=":return"â¤";default:return e}}(e.operator)," ").concat(e.name):e.name,t={attribute:e.attribute,type:e.type,value:t,label:r};return void 0!==e.operator&&(t.operator=e.operator),void 0!==e.count&&(t.count=e.count),void 0!==e.exhaustive&&(t.exhaustive=e.exhaustive),t}function Va(e){return(Va="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ja(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function za(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ja(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=Va(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Va(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Va(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Ja(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Xa(r){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:O;return m(r,Ka()),function(n){var i,e=n||{},t=e.escapeHTML,a=void 0===t||t,t=e.transformItems,o=void 0===t?function(e){return e}:t,c=e.objectIDs,s=e.limit,u=e.threshold,l=e.fallbackParameters,f=e.queryParameters;if(c&&0!==c.length)return{dependsOn:"recommend",$$type:"ais.frequentlyBoughtTogether",init:function(e){r(za(za({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(e){var t=this.getWidgetRenderState(e);r(za(za({},t),{},{instantSearchInstance:e.instantSearchInstance}),!1)},getRenderState:function(e){return e},getWidgetRenderState:function(e){var t=e.results,r=e.helper,e=e.instantSearchInstance;if(i=i||yt({instantSearchInstance:e,helper:r,widgetType:this.$$type}),null==t)return{items:[],widgetParams:n,sendEvent:i};a&&0<t.hits.length&&(t.hits=rt(t.hits));e=Ut(Ht(t.hits,0,1),t.queryID);return{items:o(e,{results:t}),widgetParams:n,sendEvent:i}},dispose:function(e){e=e.recommendState;return h(),e.removeParams(this.$$id)},getWidgetParameters:function(e){var r=this;return c.reduce(function(e,t){return e.addFrequentlyBoughtTogether({objectID:t,maxRecommendations:s,threshold:u,fallbackParameters:l?za(za({},l),a?_:{}):void 0,queryParameters:za(za({},f),a?_:{}),$$id:r.$$id})},e.removeParams(this.$$id))}};throw new Error(Ka("The `objectIDs` option is required."))}}var Ka=a({name:"frequently-bought-together",connector:!0});function Ga(e){return(Ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Za(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Ya(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Za(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=Ga(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Ga(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Ga(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Za(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}var eo=a({name:"geo-search",connector:!0});function to(e){return e.insideBoundingBox||""}function ro(e,t){return e.setQueryParameter("insideBoundingBox",t)}function no(g){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:O;return m(g,eo()),function(c){function s(e){if(e.aroundLatLng){var e=e.aroundLatLng,t=e.match(Et);if(t)return{lat:parseFloat(t[1]),lng:parseFloat(t[2])};throw new Error('Invalid value for "aroundLatLng" parameter: "'.concat(e,'"'))}}function u(){return p.internalToggleRefineOnMapMove()}function a(e,t){return function(){p.isRefineOnMapMove=!p.isRefineOnMapMove,t(e)}}function l(){return p.isRefineOnMapMove}function f(){return p.internalSetMapMoveSinceLastRefine()}function o(t,r){return function(){var e=!0!==p.hasMapMoveSinceLastRefine;p.hasMapMoveSinceLastRefine=!0,e&&r(t)}}function h(){return p.hasMapMoveSinceLastRefine}var d,e=c||{},t=e.enableRefineOnMapMove,e=e.transformItems,m=void 0===e?function(e){return e}:e,p={isRefineOnMapMove:void 0===t||t,hasMapMoveSinceLastRefine:!1,lastRefinePosition:"",lastRefineBoundingBox:"",internalToggleRefineOnMapMove:O,internalSetMapMoveSinceLastRefine:O};return{$$type:io,init:function(e){var t=e.instantSearchInstance;p.internalToggleRefineOnMapMove=a(e,O),p.internalSetMapMoveSinceLastRefine=o(e,O),g(Ya(Ya({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.helper,r=e.instantSearchInstance,t=t.state,n=Boolean(t.aroundLatLng)&&Boolean(p.lastRefinePosition)&&t.aroundLatLng!==p.lastRefinePosition,i=!t.insideBoundingBox&&Boolean(p.lastRefineBoundingBox)&&t.insideBoundingBox!==p.lastRefineBoundingBox,n=((n||i)&&(p.hasMapMoveSinceLastRefine=!1),p.lastRefinePosition=t.aroundLatLng||"",p.lastRefineBoundingBox=to(t),p.internalToggleRefineOnMapMove=a(e,this.render.bind(this)),p.internalSetMapMoveSinceLastRefine=o(e,this.render.bind(this)),this.getWidgetRenderState(e));d("view:internal",n.items),g(Ya(Ya({},n),{},{instantSearchInstance:r}),!1)},getWidgetRenderState:function(e){var t,r,n,i=e.helper,a=e.results,e=e.instantSearchInstance,o=i.state,a=a?m(a.hits.filter(function(e){return e._geoloc}),{results:a}):[];return d=d||yt({instantSearchInstance:e,helper:i,widgetType:io}),{items:a,position:s(o),currentRefinement:(e=o).insideBoundingBox&&Ft(e.insideBoundingBox),refine:function(e){var t=e.northEast,e=e.southWest,t=[t.lat,t.lng,e.lat,e.lng].join();n.setState(ro(n.state,t).resetPage()).search(),p.hasMapMoveSinceLastRefine=!1,p.lastRefineBoundingBox=t},sendEvent:d,clearMapRefinement:(r=n=i,function(){r.setQueryParameter("insideBoundingBox",void 0).search()}),isRefinedWithMap:(t=o,function(){return Boolean(t.insideBoundingBox)}),toggleRefineOnMapMove:u,isRefineOnMapMove:l,setMapMoveSinceLastRefine:f,hasMapMoveSinceLastRefine:h,widgetParams:c}},getRenderState:function(e,t){return Ya(Ya({},e),{},{geoSearch:this.getWidgetRenderState(t)})},dispose:function(e){e=e.state;return r(),e.setQueryParameter("insideBoundingBox",void 0)},getWidgetUiState:function(e,t){t=to(t.searchParameters);return!t||e&&e.geoSearch&&e.geoSearch.boundingBox===t?e:Ya(Ya({},e),{},{geoSearch:{boundingBox:t}})},getWidgetSearchParameters:function(e,t){t=t.uiState;return t&&t.geoSearch?ro(e,t.geoSearch.boundingBox):e.setQueryParameter("insideBoundingBox",void 0)}}}}var io="ais.geoSearch";function ao(e){return(ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var oo=["name","escapedValue","data","path"];function co(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function x(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?co(Object(r),!0).forEach(function(e){so(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):co(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function so(e,t,r){return(t=function(e){e=function(e,t){if("object"!=ao(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=ao(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==ao(e)?e:e+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uo(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n={};for(r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),a=0;a<i.length;a++)r=i[a],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}function lo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||function(e,t){{var r;if(e)return"string"==typeof e?fo(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fo(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ho(c){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:O;return m(c,mo()),function(u){var e=u||{},l=e.attributes,t=e.separator,f=void 0===t?" > ":t,t=e.rootPath,n=void 0===t?null:t,t=e.showParentLevel,i=void 0===t||t,t=e.limit,h=void 0===t?10:t,t=e.showMore,d=void 0!==t&&t,t=e.showMoreLimit,a=void 0===t?20:t,t=e.sortBy,m=void 0===t?po:t,t=e.transformItems,p=void 0===t?function(e){return e}:t;if(!l||!Array.isArray(l)||0===l.length)throw new Error(mo("The `attributes` option expects an array of strings."));if(!0===d&&a<=h)throw new Error(mo("The `showMoreLimit` option must be greater than `limit`."));var g,y,v=lo(l,1)[0],o=function(){};function b(){o()}var S=!1;function O(){return S?a:h}return{$$type:"ais.hierarchicalMenu",init:function(e){var t=e.instantSearchInstance;c(x(x({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t,r,n=e.instantSearchInstance;t=e,o=function(){S=!S,r.render(t)},c(x(x({},(r=this).getWidgetRenderState(e)),{},{instantSearchInstance:n}),!1)},dispose:function(e){e=e.state;return r(),e.removeHierarchicalFacet(v).setQueryParameter("maxValuesPerFacet",void 0)},getRenderState:function(e,t){return x(x({},e),{},{hierarchicalMenu:x(x({},e.hierarchicalMenu),{},so({},v,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var t,r=this,n=e.results,i=e.state,a=e.createURL,o=e.instantSearchInstance,c=e.helper,e=[],s=!1;return g=g||ut({instantSearchInstance:o,helper:c,attribute:function(e){e=e.split(f).length-1;return l[e]},widgetType:this.$$type}),y=y||function(e){g("click:internal",e),c.toggleFacetRefinement(v,e).search()},n&&(t=function t(e,r){var n=O();return!(n<r?e.length<=n:e.length<n)||e.slice(0,h).some(function(e){return Array.isArray(e.data)&&0<e.data.length&&t(e.data,r)})}(o=(o=n.getFacetValues(v,{sortBy:m,facetOrdering:m===po}))&&!Array.isArray(o)&&o.data?o.data:[],i.maxValuesPerFacet||0),s=d&&(S||t),e=p(function i(e){return e.slice(0,O()).map(function(e){var t=e.name,r=e.escapedValue,n=e.data,e=(e.path,x(x({},uo(e,oo)),{},{value:r,label:t,data:null}));return Array.isArray(n)&&(e.data=i(n)),e})}(o),{results:n})),{items:e,refine:y,canRefine:0<e.length,createURL:function(t){return a(function(e){return r.getWidgetUiState(e,{searchParameters:i.resetPage().toggleFacetRefinement(v,t),helper:c})})},sendEvent:g,widgetParams:u,isShowingMore:S,toggleShowMore:b,canToggleShowMore:s}},getWidgetUiState:function(e,t){var t=t.searchParameters.getHierarchicalFacetBreadcrumb(v);return e=x(x({},e),{},{hierarchicalMenu:x(x({},e.hierarchicalMenu),{},so({},v,t))}),t=v,e.hierarchicalMenu&&(e.hierarchicalMenu[t]&&0!==e.hierarchicalMenu[t].length||delete e.hierarchicalMenu[t],0===Object.keys(e.hierarchicalMenu).length)&&delete e.hierarchicalMenu,e},getWidgetSearchParameters:function(e,t){t=t.uiState,t=t.hierarchicalMenu&&t.hierarchicalMenu[v];if(e.isConjunctiveFacet(v)||e.isDisjunctiveFacet(v))return e;e.isHierarchicalFacet(v)&&e.getHierarchicalFacetByName(v);var e=e.removeHierarchicalFacet(v).addHierarchicalFacet({name:v,attributes:l,separator:f,rootPath:n,showParentLevel:i}),r=e.maxValuesPerFacet||0,r=Math.max(r,d?a:h),e=e.setQueryParameter("maxValuesPerFacet",r);return t?e.addHierarchicalFacetRefinement(v,t.join(f)):e.setQueryParameters({hierarchicalFacetsRefinements:x(x({},e.hierarchicalFacetsRefinements),{},so({},v,[]))})}}}}var mo=a({name:"hierarchical-menu",connector:!0}),po=["name:asc"];function go(e){return(go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yo(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function vo(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?yo(Object(r),!0).forEach(function(e){bo(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yo(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function bo(e,t,r){return(t=function(e){e=function(e,t){if("object"!=go(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=go(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==go(e)?e:e+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function So(r){var s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:O;return m(r,Oo()),function(n){var i,a,e=n||{},t=e.escapeHTML,o=void 0===t||t,t=e.transformItems,c=void 0===t?function(e){return e}:t;return{$$type:"ais.hits",init:function(e){r(vo(vo({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(e){var t=this.getWidgetRenderState(e);r(vo(vo({},t),{},{instantSearchInstance:e.instantSearchInstance}),!1),t.sendEvent("view:internal",t.items)},getRenderState:function(e,t){return vo(vo({},e),{},{hits:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=e.results,r=e.helper,e=e.instantSearchInstance;if(i=i||yt({instantSearchInstance:e,helper:r,widgetType:this.$$type}),a=a||vt({helper:r,widgetType:this.$$type,instantSearchInstance:e}),!t)return{hits:[],items:[],results:void 0,banner:void 0,sendEvent:i,bindEvent:a,widgetParams:n};o&&0<t.hits.length&&(t.hits=rt(t.hits));var r=Ut(Ht(t.hits,t.page,t.hitsPerPage),t.queryID),e=c(r,{results:t});return{hits:e,items:e,results:t,banner:null==(r=t.renderingContent)||null==(e=r.widgets)||null==(t=e.banners)?void 0:t[0],sendEvent:i,bindEvent:a,widgetParams:n}},dispose:function(e){e=e.state;return s(),o?e.setQueryParameters(Object.keys(_).reduce(function(e,t){return vo(vo({},e),{},bo({},t,void 0))},{})):e},getWidgetSearchParameters:function(e,t){return o?e.setQueryParameters(_):e}}}}var Oo=a({name:"hits",connector:!0});function jo(e){return(jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wo(e){return function(e){if(Array.isArray(e))return Po(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){{var r;if(e)return"string"==typeof e?Po(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Po(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Po(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Ro(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Eo(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ro(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=jo(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=jo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==jo(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Ro(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Fo(n){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:O;return m(n,xo()),function(o){var e=o||{},t=e.items,e=e.transformItems,c=void 0===e?function(e){return e}:e;if(!Array.isArray(t))throw new Error(xo("The `items` option expects an array of objects."));var s=t,e=s.filter(function(e){return!0===e.default});if(0===e.length)throw new Error(xo("A default value must be specified in `items`."));if(1<e.length)throw new Error(xo("More than one default value is specified in `items`."));var r=e[0],u=function(t){return function(e){return(e||0===e?t.setQueryParameter("hitsPerPage",e):t.setQueryParameter("hitsPerPage",void 0)).search()}},l=function(e){var r=e.state,n=e.createURL,i=e.getWidgetUiState,a=e.helper;return function(t){return n(function(e){return i(e,{searchParameters:r.resetPage().setQueryParameter("hitsPerPage",t||0===t?t:void 0),helper:a})})}};return{$$type:"ais.hitsPerPage",init:function(e){var t=e.state,r=e.instantSearchInstance;s.some(function(e){return Number(t.hitsPerPage)===Number(e.value)})||(s=[{value:"",label:""}].concat(wo(s))),n(Eo(Eo({},this.getWidgetRenderState(e)),{},{instantSearchInstance:r}),!0)},render:function(e){var t=e.instantSearchInstance;n(Eo(Eo({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){e=e.state;return i(),e.setQueryParameter("hitsPerPage",void 0)},getRenderState:function(e,t){return Eo(Eo({},e),{},{hitsPerPage:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t,r=e.state,n=e.results,i=e.createURL,e=e.helper,a=!!n&&0<n.nbHits;return{items:c((t=r.hitsPerPage,s.map(function(e){return Eo(Eo({},e),{},{isRefined:Number(e.value)===Number(t)})})),{results:n}),refine:u(e),createURL:l({state:r,createURL:i,getWidgetUiState:this.getWidgetUiState,helper:e}),hasNoResults:!a,canRefine:a,widgetParams:o}},getWidgetUiState:function(e,t){t=t.searchParameters.hitsPerPage;return void 0===t||t===r.value?e:Eo(Eo({},e),{},{hitsPerPage:t})},getWidgetSearchParameters:function(e,t){t=t.uiState;return e.setQueryParameters({hitsPerPage:t.hitsPerPage||r.value})}}}}var xo=a({name:"hits-per-page",connector:!0});function Io(e){return(Io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var _o=["page"],To=["clickAnalytics","userToken"];function Ao(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function I(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ao(Object(r),!0).forEach(function(e){Do(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ao(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Do(e,t,r){return(t=function(e){e=function(e,t){if("object"!=Io(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Io(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Io(e)?e:e+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ko(e){return function(e){if(Array.isArray(e))return No(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){{var r;if(e)return"string"==typeof e?No(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?No(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function No(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Co(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n={};for(r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),a=0;a<i.length;a++)r=i[a],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}var Wo=a({name:"infinite-hits",connector:!0});function Ho(e){e=e||{};e.page;return Co(e,_o)}function Lo(e){e=e||{};e.clickAnalytics,e.userToken;return Co(e,To)}function $o(i){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:O;return m(i,Wo()),function(p){var r,n,g,y,v,b,e=p||{},t=e.escapeHTML,S=void 0===t||t,t=e.transformItems,O=void 0===t?function(e){return e}:t,t=e.cache,j=void 0===t?(n=r=null,{read:function(e){e=e.state;return tr(n,Ho(e))?r:null},write:function(e){var t=e.state,e=e.hits;n=Ho(t),r=e}}):t,w=function(e,t){e=e.page,e=void 0===e?0:e,t=Object.keys(t).map(Number);return 0===t.length?e:Math.min.apply(Math,[e].concat(ko(t)))},P=function(e,t){e=e.page,e=void 0===e?0:e,t=Object.keys(t).map(Number);return 0===t.length?e:Math.max.apply(Math,[e].concat(ko(t)))};return{$$type:"ais.infiniteHits",init:function(e){i(I(I({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(e){var t=e.instantSearchInstance,e=this.getWidgetRenderState(e);i(I(I({},e),{},{instantSearchInstance:t}),!1),v("view:internal",e.currentPageHits)},getRenderState:function(e,t){return I(I({},e),{},{infiniteHits:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t,r,n,i=e.results,a=e.helper,o=e.parent,c=e.state,e=e.instantSearchInstance,s=function(){var e=o.getPreviousState()||c;return j.read({state:Lo(e)})||{}},u=[],l=o.getPreviousState()||c,f=s(),h=null==i||null==(h=i.renderingContent)||null==(h=h.widgets)||null==(h=h.banners)?void 0:h[0],d=(g||(g=function(){e=a;var e,t=s();e.overrideStateWithoutTriggeringChangeEvent(I(I({},e.state),{},{page:w(e.state,t)-1})).searchWithoutTriggeringOnStateChange()},y=function(){e=a;var e,t=s();e.setPage(P(e.state,t)+1).search()}),v||(v=yt({instantSearchInstance:e,helper:a,widgetType:this.$$type}),b=vt({helper:a,widgetType:this.$$type,instantSearchInstance:e})),e=i?(m=void 0===(m=l.page)?0:m,S&&0<i.hits.length&&(i.hits=rt(i.hits)),t=Ut(Ht(i.hits,i.page,i.hitsPerPage),i.queryID),t=O(t,{results:i}),r=!1,rr(e.mainIndex,function(e){!r&&e.getWidgets().some(function(e){return"ais.dynamicWidgets"===e.$$type})&&(r=!0)}),d=!(null!=(d=l.disjunctiveFacets)&&d.length||(l.facets||[]).filter(function(e){return"*"!==e}).length||null!=(d=l.hierarchicalFacets)&&d.length),void 0!==f[m]||i.__isArtificial||"idle"!==e.status||r&&d||(f[m]=t,j.write({state:Lo(l),hits:f})),u=t,0===w(l,f)):void 0===l.page||0===w(l,f),n=f,Object.keys(n).map(Number).sort(function(e,t){return e-t}).reduce(function(e,t){return e.concat(n[t])},[])),m=!i||i.nbPages<=P(l,f)+1;return{hits:d,items:d,currentPageHits:u,sendEvent:v,bindEvent:b,banner:h,results:i||void 0,showPrevious:g,showMore:y,isFirstPage:e,isLastPage:m,widgetParams:p}},dispose:function(e){e=e.state,a(),e=e.setQueryParameter("page",void 0);return S?e.setQueryParameters(Object.keys(_).reduce(function(e,t){return I(I({},e),{},Do({},t,void 0))},{})):e},getWidgetUiState:function(e,t){t=t.searchParameters.page||0;return t?I(I({},e),{},{page:t+1}):e},getWidgetSearchParameters:function(e,t){var t=t.uiState,r=e,e=(S&&(r=e.setQueryParameters(_)),t.page?t.page-1:0);return r.setQueryParameter("page",e)}}}}var Mo=["name","escapedValue","path"];function Uo(e){return(Uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qo(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n={};for(r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),a=0;a<i.length;a++)r=i[a],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}function Bo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||function(e,t){{var r;if(e)return"string"==typeof e?qo(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qo(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Vo(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function T(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Vo(Object(r),!0).forEach(function(e){Jo(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Vo(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Jo(e,t,r){return(t=function(e){e=function(e,t){if("object"!=Uo(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Uo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Uo(e)?e:e+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zo(r){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:O;return m(r,Xo()),function(l){var f,h,d,e=l||{},m=e.attribute,t=e.limit,n=void 0===t?10:t,t=e.showMore,p=void 0!==t&&t,t=e.showMoreLimit,i=void 0===t?20:t,t=e.sortBy,g=void 0===t?Ko:t,t=e.transformItems,y=void 0===t?function(e){return e}:t;if(!m)throw new Error(Xo("The `attribute` option is required."));if(!0===p&&i<=n)throw new Error(Xo("The `showMoreLimit` option must be greater than `limit`."));var v=!1,b=function(){};function S(){b()}function O(){return v?i:n}return{$$type:"ais.menu",init:function(e){var t=e.instantSearchInstance;r(T(T({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;r(T(T({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){e=e.state;return a(),e.removeHierarchicalFacet(m).setQueryParameter("maxValuesPerFacet",void 0)},getRenderState:function(e,t){return T(T({},e),{},{menu:T(T({},e.menu),{},Jo({},m,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var t,r,n=this,i=e.results,a=e.createURL,o=e.instantSearchInstance,c=e.helper,s=[],u=!1;return f=f||ut({instantSearchInstance:o,helper:c,attribute:m,widgetType:this.$$type}),h=h||function(t){return a(function(e){return n.getWidgetUiState(e,{searchParameters:c.state.resetPage().toggleFacetRefinement(m,t),helper:c})})},d=d||function(e){var t=Bo(c.getHierarchicalFacetBreadcrumb(m),1)[0];f("click:internal",e||t),c.toggleFacetRefinement(m,e||t).search()},e.results&&(t=e,r=this,b=function(){v=!v,r.render(t)}),i&&(e=(o=i.getFacetValues(m,{sortBy:g,facetOrdering:g===Ko}))&&!Array.isArray(o)&&o.data?o.data:[],u=p&&(v||e.length>O()),s=y(e.slice(0,O()).map(function(e){var t=e.name,r=e.escapedValue;e.path;return T(T({},Qo(e,Mo)),{},{label:t,value:r})}),{results:i})),{items:s,createURL:h,refine:d,sendEvent:f,canRefine:0<s.length,widgetParams:l,isShowingMore:v,toggleShowMore:S,canToggleShowMore:u}},getWidgetUiState:function(e,t){var t=Bo(t.searchParameters.getHierarchicalFacetBreadcrumb(m),1)[0];return e=T(T({},e),{},{menu:T(T({},e.menu),{},Jo({},m,t))}),t=m,e.menu&&(void 0===e.menu[t]&&delete e.menu[t],0===Object.keys(e.menu).length)&&delete e.menu,e},getWidgetSearchParameters:function(e,t){var r,t=t.uiState,t=t.menu&&t.menu[m];return e.isConjunctiveFacet(m)||e.isDisjunctiveFacet(m)?e:(r=(e=e.removeHierarchicalFacet(m).addHierarchicalFacet({name:m,attributes:[m]})).maxValuesPerFacet||0,r=Math.max(r,p?i:n),e=e.setQueryParameter("maxValuesPerFacet",r),t?e.addHierarchicalFacetRefinement(m,t):e.setQueryParameters({hierarchicalFacetsRefinements:T(T({},e.hierarchicalFacetsRefinements),{},Jo({},m,[]))}))}}}}var Xo=a({name:"menu",connector:!0}),Ko=["isRefined","name:asc"];function Go(e){return(Go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||Yo(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yo(e,t){var r;if(e)return"string"==typeof e?ec(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ec(e,t):void 0}function ec(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tc(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function A(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tc(Object(r),!0).forEach(function(e){rc(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tc(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function rc(e,t,r){return(t=function(e){e=function(e,t){if("object"!=Go(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Go(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Go(e)?e:e+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nc(r){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:O;return m(r,ic()),function(h){var d,e=h||{},t=e.attribute,m=void 0===t?"":t,t=e.items,p=void 0===t?[]:t,t=e.transformItems,g=void 0===t?function(e){return e}:t;if(""===m)throw new Error(ic("The `attribute` option is required."));if(p&&0!==p.length)return d={},{$$type:ac,init:function(e){var t=e.instantSearchInstance;r(A(A({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;r(A(A({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){e=e.state;return n(),e.removeNumericRefinement(m)},getWidgetUiState:function(e,t){var t=t.searchParameters.getNumericRefinements(m),r=t["="]&&t["="][0];return r||0===r?A(A({},e),{},{numericMenu:A(A({},e.numericMenu),{},rc({},m,"".concat(t["="])))}):(r=t[">="]&&t[">="][0]||"",t=t["<="]&&t["<="][0]||"",e=A(A({},e),{},{numericMenu:A(A({},e.numericMenu),{},rc({},m,"".concat(r,":").concat(t)))}),r=m,e.numericMenu&&(":"===e.numericMenu[r]&&delete e.numericMenu[r],0===Object.keys(e.numericMenu).length)&&delete e.numericMenu,e)},getWidgetSearchParameters:function(e,t){var r,t=t.uiState,t=t.numericMenu&&t.numericMenu[m],e=e.setQueryParameters({numericRefinements:A(A({},e.numericRefinements),{},rc({},m,{}))});return t?-1===t.indexOf(":")?e.addNumericRefinement(m,"=",Number(t)):(r=(t=Zo(t.split(":").map(parseFloat),2))[0],t=t[1],r=y(r)?e.addNumericRefinement(m,">=",r):e,y(t)?r.addNumericRefinement(m,"<=",t):r):e},getRenderState:function(e,t){return A(A({},e),{},{numericMenu:A(A({},e.numericMenu),{},rc({},m,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var n,t,i=this,r=e.results,a=e.state,o=e.instantSearchInstance,c=e.helper,s=e.createURL,e=(d.refine||(d.refine=function(e){var t=sc(c.state,m,e);d.sendEvent("click:internal",e),c.setState(t).search()}),d.createURL||(d.createURL=function(r){return function(t){return s(function(e){return i.getWidgetUiState(e,{searchParameters:sc(r,m,t),helper:c})})}}),d.sendEvent||(d.sendEvent=oc({instantSearchInstance:o})),!r||0===r.nbHits),o=(n=a,p.map(function(e){var t=e.start,r=e.end,e=e.label;return{label:e,value:encodeURI(JSON.stringify({start:t,end:r})),isRefined:cc(n,m,{start:t,end:r,label:e})}})),u=!0,l=function(e,t){var r,n,i,a,o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(o)return i=!(n=!0),{s:function(){o=o.call(e)},n:function(){var e=o.next();return n=e.done,e},e:function(e){i=!0,r=e},f:function(){try{n||null==o.return||o.return()}finally{if(i)throw r}}};if(Array.isArray(e)||(o=Yo(e))||t&&e&&"number"==typeof e.length)return o&&(e=o),a=0,{s:t=function(){},n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(o);try{for(l.s();!(t=l.n()).done;){var f=t.value;if(f.isRefined&&"{}"!==decodeURI(f.value)){u=!1;break}}}catch(e){l.e(e)}finally{l.f()}return{createURL:d.createURL(a),items:g(o,{results:r}),hasNoResults:e,canRefine:!(e&&u),refine:d.refine,sendEvent:d.sendEvent,widgetParams:h}}};throw new Error(ic("The `items` option expects an array of objects."))}}var ic=a({name:"numeric-menu",connector:!0}),ac="ais.numericMenu",oc=function(e){var t=e.instantSearchInstance;return function(){1===arguments.length&&t.sendEventToInsights(arguments.length<=0?void 0:arguments[0])}};function cc(e,t,r){var n=e.getNumericRefinements(t);return void 0!==r.start&&void 0!==r.end?r.start===r.end?uc(n,"=",r.start):uc(n,">=",r.start)&&uc(n,"<=",r.end):void 0!==r.start?uc(n,">=",r.start):void 0!==r.end?uc(n,"<=",r.end):void 0===r.start&&void 0===r.end&&Object.keys(n).every(function(e){return 0===(n[e]||[]).length})}function sc(e,t,r){var r=JSON.parse(decodeURI(r)),n=e.getNumericRefinements(t);if(void 0===r.start&&void 0===r.end)return e.removeNumericRefinement(t);if(cc(e,t,r)||(e=e.removeNumericRefinement(t)),void 0!==r.start&&void 0!==r.end){if(r.start>r.end)throw new Error("option.start should be > to option.end");if(r.start===r.end)return e=uc(n,"=",r.start)?e.removeNumericRefinement(t,"=",r.start):e.addNumericRefinement(t,"=",r.start)}return void 0!==r.start&&(e=(e=uc(n,">=",r.start)?e.removeNumericRefinement(t,">=",r.start):e).addNumericRefinement(t,">=",r.start)),"number"==typeof(e=void 0!==r.end?(e=uc(n,"<=",r.end)?e.removeNumericRefinement(t,"<=",r.end):e).addNumericRefinement(t,"<=",r.end):e).page&&(e.page=0),e}function uc(e,t,r){return void 0!==e[t]&&e[t].includes(r)}function lc(e){return(lc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,dc(n.key),n)}}function hc(e,t,r){(t=dc(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}function dc(e){e=function(e,t){if("object"!=lc(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=lc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==lc(e)?e:e+""}var mc=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");hc(this,"currentPage",void 0),hc(this,"total",void 0),hc(this,"padding",void 0),this.currentPage=e.currentPage,this.total=e.total,this.padding=e.padding}var e,r,n;return e=t,(r=[{key:"pages",value:function(){var e,t=this.total,r=this.currentPage,n=this.padding;return 0===t?[0]:hr((e=this.nbPagesDisplayed(n,t))===t?{end:t}:{start:r-(n=this.calculatePaddingLeft(r,n,t,e)),end:r+(e-n)})}},{key:"nbPagesDisplayed",value:function(e,t){return Math.min(2*e+1,t)}},{key:"calculatePaddingLeft",value:function(e,t,r,n){return e<=t?e:r-t<=e?n-(r-e):t}},{key:"isLastPage",value:function(){return this.currentPage>=this.total-1}},{key:"isFirstPage",value:function(){return this.currentPage<=0}}])&&fc(e.prototype,r),n&&fc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function pc(e){return(pc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gc(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function yc(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?gc(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=pc(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=pc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==pc(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):gc(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function vc(r){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:O;return m(r,bc()),function(a){var e=a||{},o=e.totalPages,e=e.padding,c=new mc({currentPage:0,total:0,padding:void 0===e?3:e}),s={};return{$$type:"ais.pagination",init:function(e){var t=e.instantSearchInstance;r(yc(yc({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;r(yc(yc({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){e=e.state;return t(),e.setQueryParameter("page",void 0)},getWidgetUiState:function(e,t){t=t.searchParameters.page||0;return t?yc(yc({},e),{},{page:t+1}):e},getWidgetSearchParameters:function(e,t){t=t.uiState,t=t.page?t.page-1:0;return e.setQueryParameter("page",t)},getWidgetRenderState:function(e){var t=e.results,r=e.helper,n=e.state,i=e.createURL,e=(s.refine||(s.refine=function(e){r.setPage(e),r.search()}),s.createURL||(s.createURL=function(t){return i(function(e){return yc(yc({},e),{},{page:t+1})})}),n.page||0),n=(n=(n=t||{nbPages:0}).nbPages,void 0!==o?Math.min(o,n):n);return c.currentPage=e,c.total=n,{createURL:s.createURL,refine:s.refine,canRefine:1<n,currentRefinement:e,nbHits:(null==t?void 0:t.nbHits)||0,nbPages:n,pages:t?c.pages():[],isFirstPage:c.isFirstPage(),isLastPage:c.isLastPage(),widgetParams:a}},getRenderState:function(e,t){return yc(yc({},e),{},{pagination:this.getWidgetRenderState(t)})}}}}var bc=a({name:"pagination",connector:!0});function Sc(e){return(Sc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oc(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function jc(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Oc(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=Sc(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Sc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Sc(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Oc(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function wc(e){return function(e){if(Array.isArray(e))return Pc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){{var r;if(e)return"string"==typeof e?Pc(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Pc(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Rc=a({name:"query-rules",connector:!0});function Ec(e){var i,a,o,t=this.helper,r=this.initialRuleContexts,n=this.trackedFilters,c=this.transformRuleContexts,e=e.state,s=e.ruleContexts||[],n=(i=(n={helper:t,sharedHelperState:e,trackedFilters:n}).helper,a=n.sharedHelperState,o=n.trackedFilters,Object.keys(o).reduce(function(e,t){var r=kt(i.lastResults||{},a,!0).filter(function(e){return e.attribute===t}).map(function(e){return e.numericValue||e.name}),n=(0,o[t])(r);return[].concat(wc(e),wc(r.filter(function(e){return n.includes(e)}).map(function(e){return"ais-".concat(t,"-").concat(e).replace(/[^a-z0-9-_]+/gi,"_")})))},[])),c=c([].concat(wc(r),wc(n))).slice(0,10);tr(s,c)||t.overrideStateWithoutTriggeringChangeEvent(jc(jc({},e),{},{ruleContexts:c}))}function Fc(l){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:O;return m(l,Rc()),function(i){var a,e=i||{},t=e.trackedFilters,o=void 0===t?{}:t,t=e.transformRuleContexts,c=void 0===t?function(e){return e}:t,t=e.transformItems,r=void 0===t?function(e){return e}:t,s=(Object.keys(o).forEach(function(e){if("function"!=typeof o[e])throw new Error(Rc("'The \"".concat(e,'" filter value in the `trackedFilters` option expects a function.')))}),0<Object.keys(o).length),u=[];return{$$type:"ais.queryRules",init:function(e){var t=e.helper,r=e.state,n=e.instantSearchInstance;u=r.ruleContexts||[],a=Ec.bind({helper:t,initialRuleContexts:u,trackedFilters:o,transformRuleContexts:c}),s&&(([r.disjunctiveFacetsRefinements,r.facetsRefinements,r.hierarchicalFacetsRefinements,r.numericRefinements].some(function(e){return Boolean(e&&0<Object.keys(e).length)})||Boolean(i.transformRuleContexts))&&a({state:r}),t.on("change",a)),l(jc(jc({},this.getWidgetRenderState(e)),{},{instantSearchInstance:n}),!0)},render:function(e){var t=e.instantSearchInstance;l(jc(jc({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},getWidgetRenderState:function(e){var e=e.results,t=(e||{}).userData;return{items:r(void 0===t?[]:t,{results:e}),widgetParams:i}},getRenderState:function(e,t){return jc(jc({},e),{},{queryRules:this.getWidgetRenderState(t)})},dispose:function(e){var t=e.helper,e=e.state;return n(),s?(t.removeListener("change",a),e.setQueryParameter("ruleContexts",u)):e}}}}function xc(e){return(xc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ic(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function D(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ic(Object(r),!0).forEach(function(e){_c(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ic(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function _c(e,t,r){return(t=function(e){e=function(e,t){if("object"!=xc(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=xc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==xc(e)?e:e+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||function(e,t){{var r;if(e)return"string"==typeof e?Ac(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ac(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ac(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Dc=a({name:"range-input",connector:!0},{name:"range-slider",connector:!0}),kc="ais.range";function Nc(e){var t=e.min,r=e.max,e=e.precision,e=Math.pow(10,e);return{min:t&&Math.floor(t*e)/e,max:r&&Math.ceil(r*e)/e}}function Cc(r){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:O;return m(r,Dc()),function(c){var e=c||{},t=e.attribute,u=void 0===t?"":t,l=e.min,f=e.max,t=e.precision,h=void 0===t?0:t;if(!u)throw new Error(Dc("The `attribute` option is required."));if(y(l)&&y(f)&&f<l)throw new Error(Dc("The `max` option can't be lower than `min`."));var s={from:function(e){return e.toLocaleString()},to:function(e){return Number(Number(e).toFixed(h)).toLocaleString()}},i=function(e,t,r,n){var e=e.state,i=t.min,t=t.max,a=Tc(e.getNumericRefinement(u,">=")||[],1)[0],o=Tc(e.getNumericRefinement(u,"<=")||[],1)[0],c=void 0===r||""===r,s=void 0===n||""===n,r=Nc({min:c?void 0:parseFloat(r),max:s?void 0:parseFloat(n),precision:h}),n=r.min,r=r.max,c=y(l)||i!==n?y(l)&&c?l:n:void 0,n=y(f)||t!==r?y(f)&&s?f:r:void 0,s=void 0===c,r=y(i)&&i<=c,s=s||y(c)&&(!y(i)||r),i=void 0===n,r=y(n)&&n<=t,i=i||y(n)&&(!y(t)||r);return(a!==c||o!==n)&&s&&i?(e=e.removeNumericRefinement(u),y(c)&&(e=e.addNumericRefinement(u,">=",c)),(e=y(n)?e.addNumericRefinement(u,"<=",n):e).resetPage()):null};function d(r,n){return function(){var e=Tc(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[void 0,void 0],2),t=e[0],e=e[1],t=i(r,n,t,e);t&&r.setState(t).search()}}return{$$type:kc,init:function(e){r(D(D({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(e){r(D(D({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!1)},getRenderState:function(e,t){return D(D({},e),{},{range:D(D({},e.range),{},_c({},u,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var t,r=e.results,n=e.helper,e=e.instantSearchInstance,i=wt(r&&r.disjunctiveFacets||[],function(e){return e.name===u}),i=i&&i.stats||{min:void 0,max:void 0},a=(i=i,a=y(l)?l:y(i.min)?i.min:0,i=y(f)?f:y(i.max)?i.max:0,Nc({min:a,max:i,precision:h})),o=(o=Tc((i=n).getNumericRefinement(u,">=")||[],1)[0],i=Tc(i.getNumericRefinement(u,"<=")||[],1)[0],[y(o)?o:-1/0,y(i)?i:1/0]),i=d(n,r?a:{min:void 0,max:void 0});return{refine:i,canRefine:a.min!==a.max,format:s,range:a,sendEvent:(t=e,function(){1===arguments.length&&t.sendEventToInsights(arguments.length<=0?void 0:arguments[0])}),widgetParams:D(D({},c),{},{precision:h}),start:o}},dispose:function(e){e=e.state;return n(),e.removeDisjunctiveFacet(u).removeNumericRefinement(u)},getWidgetUiState:function(e,t){var t=t.searchParameters.getNumericRefinements(u),r=t[">="],r=void 0===r?[]:r,t=t["<="],t=void 0===t?[]:t;return 0===r.length&&0===t.length?e:D(D({},e),{},{range:D(D({},e.range),{},_c({},u,"".concat(r,":").concat(t)))})},getWidgetSearchParameters:function(e,t){var r,t=t.uiState,e=e.addDisjunctiveFacet(u).setQueryParameters({numericRefinements:D(D({},e.numericRefinements),{},_c({},u,{}))}),t=(y(l)&&(e=e.addNumericRefinement(u,">=",l)),y(f)&&(e=e.addNumericRefinement(u,"<=",f)),t.range&&t.range[u]);return e=t&&-1!==t.indexOf(":")&&(r=(t=Tc(t.split(":").map(parseFloat),2))[0],t=t[1],y(r)&&(!y(l)||l<r)&&(e=(e=e.removeNumericRefinement(u,">=")).addNumericRefinement(u,">=",r)),y(t))&&(!y(f)||t<f)?(e=e.removeNumericRefinement(u,"<=")).addNumericRefinement(u,"<=",t):e}}}}function Wc(e){return(Wc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Hc=["name","escapedValue"],Lc=["escapedValue","value"];function $c(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function k(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?$c(Object(r),!0).forEach(function(e){Mc(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$c(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Mc(e,t,r){return(t=function(e){e=function(e,t){if("object"!=Wc(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Wc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Wc(e)?e:e+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Uc(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n={};for(r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),a=0;a<i.length;a++)r=i[a],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}function Qc(s){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:O;return m(s,Bc()),function(h){var e=h||{},d=e.attribute,t=e.operator,i=void 0===t?"or":t,t=e.limit,m=void 0===t?10:t,t=e.showMore,p=void 0!==t&&t,t=e.showMoreLimit,a=void 0===t?20:t,t=e.sortBy,g=void 0===t?qc:t,t=e.escapeFacetValues,c=void 0===t||t,t=e.transformItems,y=void 0===t?function(e){return e}:t;if(!d)throw new Error(Bc("The `attribute` option is required."));if(!/^(and|or)$/.test(i))throw new Error(Bc('The `operator` must one of: `"and"`, `"or"` (got "'.concat(i,'").')));if(!0===p&&a<=m)throw new Error(Bc("`showMoreLimit` should be greater than `limit`."));function v(e){var t=e.name,r=e.escapedValue;return k(k({},Uc(e,Hc)),{},{value:r,label:t,highlighted:t})}var b,S,O,j=[],w=!0,P=!1,R=function(){};function E(){R()}function F(){return P?a:m}function x(a,o){return function(i){return function(e){var t,r=i.instantSearchInstance,n=i.results;""===e&&j?s(k(k({},o.getWidgetRenderState(k(k({},i),{},{results:b}))),{},{instantSearchInstance:r}),!1):(t={highlightPreTag:(c?_:u).highlightPreTag,highlightPostTag:(c?_:u).highlightPostTag},a.searchForFacetValues(d,e,Math.min(F(),100),t).then(function(e){e=c?e.facetHits.map(function(e){return Ze(Ze({},e),{},{highlighted:et(e.highlighted)})}):e.facetHits,e=y(e.map(function(e){var t=e.escapedValue,r=e.value;return k(k({},Uc(e,Lc)),{},{value:t,label:r})}),{results:n});s(k(k({},o.getWidgetRenderState(k(k({},i),{},{results:b}))),{},{items:e,canToggleShowMore:!1,canRefine:!0,isFromSearch:!0,instantSearchInstance:r}),!1)}))}}}var I=function(){return function(){}};return{$$type:"ais.refinementList",init:function(e){s(k(k({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(e){s(k(k({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!1)},getRenderState:function(e,t){return k(k({},e),{},{refinementList:k(k({},e.refinementList),{},Mc({},d,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var t,r,n=this,i=e.results,a=e.state,o=e.createURL,c=e.instantSearchInstance,s=e.helper,u=[],l=[],c=(O&&S&&I||(O=ut({instantSearchInstance:c,helper:s,attribute:d,widgetType:this.$$type}),S=function(e){O("click:internal",e),s.toggleFacetRefinement(d,e).search()},I=x(s,this)),i&&(l=(c=i.getFacetValues(d,{sortBy:g,facetOrdering:g===qc}))&&Array.isArray(c)?c:[],u=y(l.slice(0,F()).map(v),{results:i}),c=a.maxValuesPerFacet,f=F(),w=f<c?l.length<=f:l.length<f,b=i,j=u,e.results)&&(t=e,r=this,R=function(){P=!P,r.render(t)}),I&&I(e)),l=P&&j.length>m,f=p&&!w;return{createURL:function(t){return o(function(e){return n.getWidgetUiState(e,{searchParameters:a.resetPage().toggleFacetRefinement(d,t),helper:s})})},items:u,refine:S,searchForItems:c,isFromSearch:!1,canRefine:0<u.length,widgetParams:h,isShowingMore:P,canToggleShowMore:l||f,toggleShowMore:E,sendEvent:O,hasExhaustiveItems:w}},dispose:function(e){e=e.state,r(),e=e.setQueryParameter("maxValuesPerFacet",void 0);return"and"===i?e.removeFacet(d):e.removeDisjunctiveFacet(d)},getWidgetUiState:function(e,t){var t=t.searchParameters,t="or"===i?t.getDisjunctiveRefinements(d):t.getConjunctiveRefinements(d);return e=k(k({},e),{},{refinementList:k(k({},e.refinementList),{},Mc({},d,t))}),t=d,e.refinementList&&(e.refinementList[t]&&0!==e.refinementList[t].length||delete e.refinementList[t],0===Object.keys(e.refinementList).length)&&delete e.refinementList,e},getWidgetSearchParameters:function(e,t){var r,t=t.uiState,n="or"===i;return e.isHierarchicalFacet(d)||n&&e.isConjunctiveFacet(d)||!n&&e.isDisjunctiveFacet(d)?e:(t=t.refinementList&&t.refinementList[d],r=(e=n?e.addDisjunctiveFacet(d).removeDisjunctiveFacetRefinement(d):e.addFacet(d).removeFacetRefinement(d)).maxValuesPerFacet||0,r=Math.max(r,p?a:m),e=e.setQueryParameter("maxValuesPerFacet",r),t?t.reduce(function(e,t){return n?e.addDisjunctiveFacetRefinement(d,t):e.addFacetRefinement(d,t)},e):e.setQueryParameters(Mc({},r=n?"disjunctiveFacetsRefinements":"facetsRefinements",k(k({},e[r]),{},Mc({},d,[])))))}}}}var Bc=a({name:"refinement-list",connector:!0}),qc=["isRefined","count:desc","name:asc"];function Vc(e){return(Vc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jc(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function zc(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Jc(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=Vc(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Vc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Vc(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Jc(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Xc(r){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:O;return m(r,Kc()),function(n){var i,e=n||{},t=e.escapeHTML,a=void 0===t||t,o=e.objectIDs,c=e.limit,s=e.threshold,u=e.fallbackParameters,l=e.queryParameters,t=e.transformItems,f=void 0===t?function(e){return e}:t;if(o&&0!==o.length)return{dependsOn:"recommend",$$type:"ais.relatedProducts",init:function(e){r(zc(zc({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(e){var t=this.getWidgetRenderState(e);r(zc(zc({},t),{},{instantSearchInstance:e.instantSearchInstance}),!1)},getRenderState:function(e){return e},getWidgetRenderState:function(e){var t=e.results,r=e.helper,e=e.instantSearchInstance;if(i=i||yt({instantSearchInstance:e,helper:r,widgetType:this.$$type}),null==t)return{items:[],widgetParams:n,sendEvent:i};a&&0<t.hits.length&&(t.hits=rt(t.hits));e=Ut(Ht(t.hits,0,1),t.queryID);return{items:f(e,{results:t}),widgetParams:n,sendEvent:i}},dispose:function(e){e=e.recommendState;return h(),e.removeParams(this.$$id)},getWidgetParameters:function(e){var r=this;return o.reduce(function(e,t){return e.addRelatedProducts({objectID:t,maxRecommendations:c,threshold:s,fallbackParameters:u?zc(zc({},u),a?_:{}):void 0,queryParameters:zc(zc({},l),a?_:{}),$$id:r.$$id})},e.removeParams(this.$$id))}};throw new Error(Kc("The `objectIDs` option is required."))}}var Kc=a({name:"related-products",connector:!0});function Gc(e){return(Gc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zc(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Yc(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Zc(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=Gc(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Gc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Gc(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Zc(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function es(r){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:O;return m(r,ts()),function(n){var i,a,e=(n||{}).queryHook,o=void 0===e?rs:e;return{$$type:"ais.searchBox",init:function(e){var t=e.instantSearchInstance;r(Yc(Yc({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;r(Yc(Yc({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){e=e.state;return t(),e.setQueryParameter("query",void 0)},getRenderState:function(e,t){return Yc(Yc({},e),{},{searchBox:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=e.helper,r=e.instantSearchInstance,e=e.state;return i||(i=function(e){o(e,function(e){return t.setQuery(e).search()})},a=function(){t.setQuery("").search()}),{query:e.query||"",refine:i,clear:a,widgetParams:n,isSearchStalled:"stalled"===r.status}},getWidgetUiState:function(e,t){t=t.searchParameters.query||"";return""===t||e&&e.query===t?e:Yc(Yc({},e),{},{query:t})},getWidgetSearchParameters:function(e,t){t=t.uiState;return e.setQueryParameter("query",t.query||"")}}}}var ts=a({name:"search-box",connector:!0}),rs=function(e,t){return t(e)};function ns(e){return(ns="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function is(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function as(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?is(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=ns(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=ns(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==ns(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):is(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}var os=a({name:"sort-by",connector:!0});function cs(e){return"strategy"in e&&void 0!==e.strategy}function ss(e){return cs(e)?e.strategy:e.value}function us(e,t){if(t)return void 0!==(e=e[t])&&cs(e)}function ls(n){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:O,s=(m(n,os()),{});return function(a){var i,e=a||{},o=e.items,e=e.transformItems,c=void 0===e?function(e){return e}:e;if(Array.isArray(o))return i={},o.forEach(function(e,t){var r="value"in e&&void 0!==e.value,n="strategy"in e&&void 0!==e.strategy;if(r&&n)throw new Error(os("Item at index ".concat(t,' cannot have both "value" and "strategy" properties.')));if(!r&&!n)throw new Error(os("Item at index ".concat(t,' must have either a "value" or "strategy" property.')));r=ss(e);i[r]=e}),s.itemsLookup=i,{$$type:"ais.sortBy",init:function(e){var t=e.instantSearchInstance;if(o.some(function(e){return"strategy"in e&&e.strategy})&&!t.compositionID)throw new Error(os('Sorting strategies can only be used in composition mode. Please provide a "compositionID" to your InstantSearch instance.'));var e=this.getWidgetRenderState(e),r=e.currentRefinement;wt(o,function(e){return ss(e)===r});n(as(as({},e),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;n(as(as({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){e=e.state;return t(),s.isUsingComposition&&e.sortBy&&(e=e.setQueryParameter("sortBy",void 0)),s.initialValue&&e.index!==s.initialValue?e.setIndex(s.initialValue):e},getRenderState:function(e,t){return as(as({},e),{},{sortBy:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=e.results,r=e.helper,n=e.state,i=e.parent,e=e.instantSearchInstance;!s.initialValue&&i&&(s.initialValue=i.getIndexName()),s.refine||(s.isUsingComposition=Boolean(null==e?void 0:e.compositionID),s.refine=function(e){var t=s.itemsLookup[e];(t&&cs(t)?r.setQueryParameter("sortBy",t.strategy):r.setQueryParameter("sortBy",void 0).setIndex(e)).search()});i=c(o,{results:t}).map(function(e){return{label:e.label,value:ss(e)}}),e=s.isUsingComposition&&us(s.itemsLookup,n.sortBy)?n.sortBy:n.index,n=!t||0===t.nbHits;return{currentRefinement:e,options:i,refine:s.refine,hasNoResults:n,canRefine:!n&&0<o.length,widgetParams:a}},getWidgetUiState:function(e,t){t=t.searchParameters,t=s.isUsingComposition&&us(s.itemsLookup,t.sortBy)?t.sortBy:t.index;return as(as({},e),{},{sortBy:t!==s.initialValue?t:void 0})},getWidgetSearchParameters:function(e,t){var r,t=t.uiState.sortBy||s.initialValue||e.index;return us(s.itemsLookup,t)?(r=s.itemsLookup[t],e.setQueryParameter("sortBy",r.strategy)):e.setQueryParameter("index",t)}};throw new Error(os("The `items` option expects an array of objects."))}}function fs(e){return(fs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hs(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function ds(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?hs(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=fs(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=fs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==fs(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):hs(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function ms(n){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:O;return m(n,ps()),function(r){return{$$type:"ais.stats",init:function(e){var t=e.instantSearchInstance;n(ds(ds({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;n(ds(ds({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(){e()},getRenderState:function(e,t){return ds(ds({},e),{},{stats:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=e.results,e=e.state;return t?{hitsPerPage:t.hitsPerPage,nbHits:t.nbHits,nbSortedHits:t.nbSortedHits,areHitsSorted:void 0!==t.appliedRelevancyStrictness&&0<t.appliedRelevancyStrictness&&t.nbSortedHits!==t.nbHits,nbPages:t.nbPages,page:t.page,processingTimeMS:t.processingTimeMS,query:t.query,widgetParams:r}:{hitsPerPage:e.hitsPerPage,nbHits:0,nbSortedHits:void 0,areHitsSorted:!1,nbPages:0,page:e.page||0,processingTimeMS:-1,query:e.query||"",widgetParams:r}}}}}var ps=a({name:"stats",connector:!0});function gs(e){return(gs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ys(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function N(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ys(Object(r),!0).forEach(function(e){vs(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ys(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function vs(e,t,r){return(t=function(e){e=function(e,t){if("object"!=gs(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=gs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==gs(e)?e:e+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return c}}(e,t)||function(e,t){{var r;if(e)return"string"==typeof e?Ss(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ss(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ss(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Os(r){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:O;return m(r,js()),function(h){var d,m,p,g,y,e=h||{},v=e.attribute,t=e.on,e=e.off;if(v)return d=void 0!==e,m=Sr(void 0===t||t).map(jt),p=d?Sr(e).map(jt):void 0,y=function(t,e){var r=e.state,n=e.createURL,i=e.getWidgetUiState,a=e.helper;return function(){r=r.resetPage();var e=t?m:p,e=(e&&e.forEach(function(e){r=r.removeDisjunctiveFacetRefinement(v,e)}),t?p:m);return e&&e.forEach(function(e){r=r.addDisjunctiveFacetRefinement(v,e)}),n(function(e){return i(e,{searchParameters:r,helper:a})})}},{$$type:ws,init:function(e){var t=e.instantSearchInstance;r(N(N({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;r(N(N({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){e=e.state;return n(),e.removeDisjunctiveFacet(v)},getRenderState:function(e,t){return N(N({},e),{},{toggleRefinement:N(N({},e.toggleRefinement),{},vs({},v,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var r,t,n,i=e.state,a=e.helper,o=e.results,c=e.createURL,e=e.instantSearchInstance,s=o?m.every(function(e){return i.isDisjunctiveFacetRefined(v,e)}):m.every(function(e){return i.isDisjunctiveFacetRefined(v,e)}),u={isRefined:s,count:0},l={isRefined:d&&!s,count:0},f=(o&&(t=Sr(p||!1),r=o.getFacetValues(v,{})||[],f=m.map(function(t){return wt(r,function(e){return e.escapedValue===jt(String(t))})}).filter(function(e){return void 0!==e}),t=d?t.map(function(t){return wt(r,function(e){return e.escapedValue===jt(String(t))})}).filter(function(e){return void 0!==e}):[],u={isRefined:!!f.length&&f.every(function(e){return e.isRefined}),count:f.reduce(function(e,t){return e+t.count},0)||null},l={isRefined:!!t.length&&t.every(function(e){return e.isRefined}),count:t.reduce(function(e,t){return e+t.count},0)||r.reduce(function(e,t){return e+t.count},0)}),g=g||Ps({instantSearchInstance:e,attribute:v,on:m,helper:a}),s?l:u);return{value:{name:v,isRefined:s,count:o?f.count:null,onFacetValue:u,offFacetValue:l},createURL:y(s,{state:i,createURL:c,helper:a,getWidgetUiState:this.getWidgetUiState}),sendEvent:g,canRefine:Boolean(o?f.count:null),refine:(n=a,function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{isRefined:!1}).isRefined;e?(m.forEach(function(e){return n.removeDisjunctiveFacetRefinement(v,e)}),d&&p.forEach(function(e){return n.addDisjunctiveFacetRefinement(v,e)})):(g("click:internal",e),d&&p.forEach(function(e){return n.removeDisjunctiveFacetRefinement(v,e)}),m.forEach(function(e){return n.addDisjunctiveFacetRefinement(v,e)})),n.search()}),widgetParams:h}},getWidgetUiState:function(e,t){var r=t.searchParameters,t=m&&m.every(function(e){return r.isDisjunctiveFacetRefined(v,e)});return t?N(N({},e),{},{toggle:N(N({},e.toggle),{},vs({},v,t))}):(null!=(t=e.toggle)&&delete t[v],e)},getWidgetSearchParameters:function(e,t){var r,t=t.uiState;return e.isHierarchicalFacet(v)||e.isConjunctiveFacet(v)?e:(r=e.addDisjunctiveFacet(v).removeDisjunctiveFacetRefinement(v),Boolean(t.toggle&&t.toggle[v])?(m&&m.forEach(function(e){r=r.addDisjunctiveFacetRefinement(v,e)}),r):d?(p&&p.forEach(function(e){r=r.addDisjunctiveFacetRefinement(v,e)}),r):r.setQueryParameters({disjunctiveFacetsRefinements:N(N({},e.disjunctiveFacetsRefinements),{},vs({},v,[]))}))}};throw new Error(js("The `attribute` option is required."))}}var js=a({name:"toggle-refinement",connector:!0}),ws="ais.toggleRefinement",Ps=function(e){var c=e.instantSearchInstance,s=e.helper,u=e.attribute,l=e.on;return function(){for(var e,t,r,n,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];1===a.length?c.sendEventToInsights(a[0]):(n=a[1],e=void 0===(e=a[2])?"Filter Applied":e,t=(r=bs(a[0].split(":"),2))[0],r=r[1],"click"!==t||void 0===l||n||c.sendEventToInsights({insightsMethod:"clickedFilters",widgetType:ws,eventType:t,eventModifier:r,payload:{eventName:e,index:(null==(n=s.lastResults)?void 0:n.index)||s.state.index,filters:l.map(function(e){return"".concat(u,":").concat(e)})},attribute:u}))}};function Rs(e){return(Rs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Es(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Fs(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Es(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=Rs(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Rs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Rs(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Es(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function xs(h){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:O;return m(h,Is()),function(n){var i,e=n||{},t=e.facetName,r=e.facetValue,a=e.limit,o=e.threshold,c=e.fallbackParameters,s=e.queryParameters,u=e.escapeHTML,l=void 0===u||u,u=e.transformItems,f=void 0===u?function(e){return e}:u;if(t&&!r||!t&&r)throw new Error(Is("When you provide facetName (received type ".concat(Le(t),"), you must also provide facetValue (received type ").concat(Le(r),").")));return{dependsOn:"recommend",$$type:"ais.trendingItems",init:function(e){h(Fs(Fs({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(e){var t=this.getWidgetRenderState(e);h(Fs(Fs({},t),{},{instantSearchInstance:e.instantSearchInstance}),!1)},getRenderState:function(e){return e},getWidgetRenderState:function(e){var t=e.results,r=e.helper,e=e.instantSearchInstance;if(i=i||yt({instantSearchInstance:e,helper:r,widgetType:this.$$type}),null==t)return{items:[],widgetParams:n,sendEvent:i};l&&0<t.hits.length&&(t.hits=rt(t.hits));e=Ut(Ht(t.hits,0,1),t.queryID);return{items:f(e,{results:t}),widgetParams:n,sendEvent:i}},dispose:function(e){e=e.recommendState;return d(),e.removeParams(this.$$id)},getWidgetParameters:function(e){return e.removeParams(this.$$id).addTrendingItems({facetName:t,facetValue:r,maxRecommendations:a,threshold:o,fallbackParameters:c?Fs(Fs({},c),l?_:{}):void 0,queryParameters:Fs(Fs({},s),l?_:{}),$$id:this.$$id})}}}}var Is=a({name:"trending-items",connector:!0});function _s(e){return(_s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ts(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function As(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ts(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=_s(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=_s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==_s(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Ts(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Ds(r){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:O;return m(r,ks()),function(n){var i,e=n||{},t=e.escapeHTML,a=void 0===t||t,o=e.objectIDs,c=e.limit,s=e.threshold,u=e.fallbackParameters,l=e.queryParameters,t=e.transformItems,f=void 0===t?function(e){return e}:t;if(o&&0!==o.length)return{dependsOn:"recommend",$$type:"ais.lookingSimilar",init:function(e){r(As(As({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(e){var t=this.getWidgetRenderState(e);r(As(As({},t),{},{instantSearchInstance:e.instantSearchInstance}),!1)},getRenderState:function(e){return e},getWidgetRenderState:function(e){var t=e.results,r=e.helper,e=e.instantSearchInstance;if(i=i||yt({instantSearchInstance:e,helper:r,widgetType:this.$$type}),null==t)return{items:[],widgetParams:n,sendEvent:i};a&&0<t.hits.length&&(t.hits=rt(t.hits));e=Ut(Ht(t.hits,0,1),t.queryID);return{items:f(e,{results:t}),widgetParams:n,sendEvent:i}},dispose:function(e){e=e.recommendState;return h(),e.removeParams(this.$$id)},getWidgetParameters:function(e){var r=this;return o.reduce(function(e,t){return e.addLookingSimilar({objectID:t,maxRecommendations:c,threshold:s,fallbackParameters:u?As(As({},u),a?_:{}):void 0,queryParameters:As(As({},l),a?_:{}),$$id:r.$$id})},e.removeParams(this.$$id))}};throw new Error(ks("The `objectIDs` option is required."))}}var ks=a({name:"looking-similar",connector:!0});function Ns(e){return(Ns="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cs(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Ws(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Cs(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],(e=function(e){e=function(e,t){if("object"!=Ns(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=Ns(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Ns(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Cs(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function Hs(e){var t=e.children,r=e.renderToString,n=e.notifyServer,i=e.searchRef,a=e.skipRecommend;return Promise.resolve().then(function(){r(s.createElement(Cr.Provider,{value:{notifyServer:n}},t))}).then(function(){return new Promise(function(e){return setTimeout(e,0)})}).then(function(){if(i.current)return function(i,e){var a,o=1<arguments.length&&void 0!==e&&e,c=i.mainHelper,t=c.getClient();return i.compositionID?c.setClient(Ws(Ws({},t),{},{search:function(e){return a=[e.requestBody.params],t.search(e)}})):c.setClient(Ws(Ws({},t),{},{search:function(e){return a=e.map(function(e){return e.params}),t.search(e)}})),i._hasSearchWidget&&(i.compositionID?c.searchWithComposition():c.searchOnlyWithDerivedHelpers()),!o&&i._hasRecommendWidget&&c.recommend(),new Promise(function(e,t){var r=!i._hasSearchWidget,n=!i._hasRecommendWidget||o;c.derivedHelpers[0].on("result",function(){r=!0,n&&e(a)}),c.derivedHelpers[0].on("recommend:result",function(){n=!0,r&&e(a)}),c.on("error",function(e){t(e)}),i.on("error",function(e){t(e)}),c.derivedHelpers.forEach(function(e){return e.on("error",function(e){t(e)})})})}(i.current,a);throw new Error("Unable to retrieve InstantSearch's server state in `getServerState()`. Did you mount the <InstantSearch> component?")}).then(function(e){return{initialResults:function(e,a){var o={},c=0;if(rr(e,function(e){var t,r,n=e.getResults(),i=null==(i=e.getHelper())?void 0:i.lastRecommendResults;(n||i)&&(r=(t=(null==n||null==(t=n._rawResults)?void 0:t.length)||0)?null==a?void 0:a.slice(c,c+t):[],c+=t,o[e.getIndexId()]=Ws(Ws(Ws({},n&&{state:Ws(Ws({},n._state),{},{clickAnalytics:null==r||null==(t=r[0])?void 0:t.clickAnalytics,userToken:null==r||null==(e=r[0])?void 0:e.userToken}),results:n._rawResults}),i&&{recommendResults:{params:JSON.parse(JSON.stringify(i._state.params)),results:i._rawResults}}),r&&{requestParams:r}))}),0===Object.keys(o).length)throw new Error("The root index does not have any results. Make sure you have at least one widget that provides results.");return o}(i.current.mainIndex,e)}})}e.Configure=function(e){return Xr(p({},e),{$$widgetType:"ais.configure"}),null},e.DynamicWidgets=function(e){var t=e.children,r=void 0===(r=e.fallbackComponent)?nn:r,e=$(e,rn),n=s.useRef(r),r=tn(e,{$$widgetType:"ais.dynamicWidgets"}).attributesToRender,i=new Map;return s.Children.forEach(t,function(e){var t=function e(t){if(!an(t))return;if(t.props.attribute)return t.props.attribute;if(Array.isArray(t.props.attributes))return t.props.attributes[0];if(t.props.children)return Ar(1===s.Children.count(t.props.children)),e(s.Children.only(t.props.children));return}(e);Ar(void 0!==t),i.set(t,e)}),s.createElement(s.Fragment,null,r.map(function(e){return s.createElement(b.Fragment,{key:e},i.get(e)||s.createElement(n.current,{attribute:e}))}))},e.Index=function(e){var t,r,n,i,a,o=e.children,c=(e=e=$(e,wn),t=Wr(),r=null==(r=Lr())?void 0:r.initialResults,n=Dr(),i=$r(e),c=(e=b.useMemo(function(){return Sn(i)},[i])).getHelper(),a=jn(),Ur(function(){a()},[c,a]),qr({widget:e,parentIndex:n,props:i,shouldSsr:Boolean(t||r),skipSuspense:!0}),e);return null===c.getHelper()?null:s.createElement(Tr.Provider,{value:c},o)},e.InstantSearch=function(e){var t=e.children;return(e=la($(e,ha))).started?s.createElement(kr.Provider,{value:e},s.createElement(Tr.Provider,{value:e.mainIndex},t,s.createElement(da,{search:e}))):null},e.InstantSearchRSCContext=Qr,e.InstantSearchSSRContext=Hr,e.InstantSearchSSRProvider=pa,e.InstantSearchServerContext=Cr,e.getServerState=function(r,e){function n(){var t=!1;return function(e){e=e.search;if(t)throw new Error("getServerState should be called with a single InstantSearchSSRProvider and a single InstantSearch component.");t=!0,a.current=e}}var i=e.renderToString,a={current:void 0};return He(),Hs({children:r,renderToString:i,searchRef:a,notifyServer:n()}).then(function(e){var t=!1;return rr(a.current.mainIndex,function(e){t=t||e.getWidgets().some(function(e){return"ais.dynamicWidgets"===e.$$type})}),t?(He(),Hs({children:s.createElement(pa,e,r),renderToString:i,searchRef:a,notifyServer:n(),skipRecommend:!0})):e})},e.useAutocomplete=function(e,t){return h(ba,e,t)},e.useBreadcrumb=function(e,t){return h(Ea,e,t)},e.useChat=function(){throw new Error('"useChat()" is not available from the UMD build.\n\nPlease use React InstantSearch with a packaging system:\nhttps://www.algolia.com/doc/guides/building-search-ui/installation/react/#install-react-instantsearch-as-an-npm-package')},e.useClearRefinements=function(e,t){return h(Da,e,t)},e.useConfigure=Xr,e.useConnector=h,e.useCurrentRefinements=function(e,t){return h($a,e,t)},e.useDynamicWidgets=tn,e.useFrequentlyBoughtTogether=function(e,t){return h(Xa,e,t)},e.useGeoSearch=function(e,t){return h(no,e,t)},e.useHierarchicalMenu=function(e,t){return h(ho,e,t)},e.useHits=function(e,t){return h(So,e,t)},e.useHitsPerPage=function(e,t){return h(Fo,e,t)},e.useInfiniteHits=function(e,t){return h($o,e,t)},e.useInstantSearch=function(){var t,r,n,i,a,o,c,s=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).catchError,u=Nr();t=Nr(),r=Dr(),e=r.getIndexId(),m=(l=M(b.useState(function(){return t.getUiState()}),2))[0],n=l[1],l=m[e],h=(d=M(b.useState(function(){return t.renderState}),2))[0],i=d[1],d=h[e]||{},e=b.useCallback(function(e){t.setUiState(e)},[t]),f=b.useCallback(function(e){r.setIndexUiState(e)},[r]),b.useEffect(function(){function e(){n(t.getUiState()),i(t.renderState)}return t.addListener("render",e),e(),function(){t.removeListener("render",e)}},[t]);var e=(m={uiState:m,setUiState:e,indexUiState:l,setIndexUiState:f,renderState:h,indexRenderState:d}).uiState,l=m.setUiState,f=m.indexUiState,h=m.setIndexUiState,d=m.renderState,m=m.indexRenderState;a=Nr(),o=Dr(),g=M(b.useState(function(){var e=_r(o);return{results:e.results,scopedResults:e.scopedResults}}),2),p=g[0],c=g[1],b.useEffect(function(){function e(){var e=o.getResults();null!==e?c({results:e,scopedResults:o.getScopedResults()}):0===a.mainIndex.getIndexName().length&&(e=a.mainIndex.getWidgets().find(j))&&c({results:_r(o).results,scopedResults:e.getScopedResults()})}return a.addListener("render",e),e(),function(){a.removeListener("render",e)}},[a,o]);var p=(g=p).results,g=g.scopedResults,y=b.useCallback(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return u.use.apply(u,t),function(){u.unuse.apply(u,t)}},[u]),v=b.useCallback(function(){u.refresh()},[u]);return Ur(function(){var e;return s?(u.addListener("error",e=function(){}),function(){return u.removeListener("error",e)}):function(){}},[u,s]),{results:p,scopedResults:g,uiState:e,setUiState:l,indexUiState:f,setIndexUiState:h,renderState:d,indexRenderState:m,addMiddlewares:y,refresh:v,status:u.status,error:u.error}},e.useInstantSearchContext=Nr,e.useLookingSimilar=function(e,t){return h(Ds,e,t)},e.useMenu=function(e,t){return h(zo,e,t)},e.useNumericMenu=function(e,t){return h(nc,e,t)},e.usePagination=function(e,t){return h(vc,e,t)},e.usePoweredBy=function(){var e=br(function(e){return(null==(e=e.window.location)?void 0:e.hostname)||""},{fallback:function(){return""}});return{url:"https://www.algolia.com/?utm_source=react-instantsearch&utm_medium=website&utm_content=".concat(e,"&utm_campaign=poweredby")}},e.useQueryRules=function(e,t){return h(Fc,e,t)},e.useRSCContext=Br,e.useRange=function(e,t){return h(Cc,e,t)},e.useRefinementList=function(e,t){return h(Qc,e,t)},e.useRelatedProducts=function(e,t){return h(Xc,e,t)},e.useSearchBox=function(e,t){return h(es,e,t)},e.useSortBy=function(e,t){return h(ls,e,t)},e.useStats=function(e,t){return h(ms,e,t)},e.useToggleRefinement=function(e,t){return h(Os,e,t)},e.useTrendingItems=function(e,t){return h(xs,e,t)},e.version=C,e.wrapPromiseWithState=function(e){var r;return"status"in e||((r=e).status="pending",r.then(function(e){var t;"pending"===r.status&&((t=r).status="fulfilled",t.value=e)},function(e){var t;"pending"===r.status&&((t=r).status="rejected",t.reason=e)})),e},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ReactInstantSearchCore.min.js.map
