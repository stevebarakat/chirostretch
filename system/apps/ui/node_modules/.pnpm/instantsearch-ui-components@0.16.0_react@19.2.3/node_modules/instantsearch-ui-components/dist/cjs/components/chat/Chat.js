"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.createChatComponent = createChatComponent;
var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));
var _lib = require("../../lib");
var _ChatHeader = require("./ChatHeader");
var _ChatMessages = require("./ChatMessages");
var _ChatPrompt = require("./ChatPrompt");
var _ChatToggleButton = require("./ChatToggleButton");
var _excluded = ["open", "maximized", "headerProps", "toggleButtonProps", "messagesProps", "promptProps", "headerComponent", "promptComponent", "toggleButtonComponent", "classNames", "className"];
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { (0, _defineProperty2.default)(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function createChatComponent(_ref) {
  var createElement = _ref.createElement,
    Fragment = _ref.Fragment;
  var ChatToggleButton = (0, _ChatToggleButton.createChatToggleButtonComponent)({
    createElement: createElement,
    Fragment: Fragment
  });
  var ChatHeader = (0, _ChatHeader.createChatHeaderComponent)({
    createElement: createElement,
    Fragment: Fragment
  });
  var ChatMessages = (0, _ChatMessages.createChatMessagesComponent)({
    createElement: createElement,
    Fragment: Fragment
  });
  var ChatPrompt = (0, _ChatPrompt.createChatPromptComponent)({
    createElement: createElement,
    Fragment: Fragment
  });
  return function Chat(userProps) {
    var open = userProps.open,
      _userProps$maximized = userProps.maximized,
      maximized = _userProps$maximized === void 0 ? false : _userProps$maximized,
      headerProps = userProps.headerProps,
      toggleButtonProps = userProps.toggleButtonProps,
      messagesProps = userProps.messagesProps,
      _userProps$promptProp = userProps.promptProps,
      promptProps = _userProps$promptProp === void 0 ? {} : _userProps$promptProp,
      HeaderComponent = userProps.headerComponent,
      PromptComponent = userProps.promptComponent,
      ToggleButtonComponent = userProps.toggleButtonComponent,
      _userProps$classNames = userProps.classNames,
      classNames = _userProps$classNames === void 0 ? {} : _userProps$classNames,
      className = userProps.className,
      props = (0, _objectWithoutProperties2.default)(userProps, _excluded);
    return createElement("div", (0, _extends2.default)({}, props, {
      className: (0, _lib.cx)('ais-Chat', maximized && 'ais-Chat--maximized', classNames.root, className)
    }), createElement("div", {
      className: (0, _lib.cx)('ais-Chat-container', open && 'ais-Chat-container--open', maximized && 'ais-Chat-container--maximized', classNames.container)
    }, createElement(HeaderComponent || ChatHeader, _objectSpread(_objectSpread({}, headerProps), {}, {
      classNames: classNames.header,
      maximized: maximized
    })), createElement(ChatMessages, (0, _extends2.default)({}, messagesProps, {
      classNames: classNames.messages,
      messageClassNames: classNames.message
    })), createElement(PromptComponent || ChatPrompt, _objectSpread(_objectSpread({}, promptProps), {}, {
      classNames: classNames.prompt
    }))), createElement("div", {
      className: "ais-Chat-toggleButtonWrapper"
    }, createElement(ToggleButtonComponent || ChatToggleButton, _objectSpread(_objectSpread({}, toggleButtonProps), {}, {
      classNames: classNames.toggleButton,
      onClick: function onClick() {
        var _toggleButtonProps$on;
        (_toggleButtonProps$on = toggleButtonProps.onClick) === null || _toggleButtonProps$on === void 0 ? void 0 : _toggleButtonProps$on.call(toggleButtonProps);
        if (!open) {
          var _promptProps$promptRe, _promptProps$promptRe2;
          (_promptProps$promptRe = promptProps.promptRef) === null || _promptProps$promptRe === void 0 ? void 0 : (_promptProps$promptRe2 = _promptProps$promptRe.current) === null || _promptProps$promptRe2 === void 0 ? void 0 : _promptProps$promptRe2.focus();
        }
      }
    }))));
  };
}