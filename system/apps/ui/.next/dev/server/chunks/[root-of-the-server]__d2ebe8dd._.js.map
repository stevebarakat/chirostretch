{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///Users/sb/Dev/chirostretch/src/app/api/bookings/slots/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\nimport { cookies } from \"next/headers\";\n\nconst WP_URL = process.env.NEXT_PUBLIC_BACKEND_URL;\n\nexport async function GET(request: NextRequest) {\n  const { searchParams } = new URL(request.url);\n  const productId = searchParams.get(\"productId\");\n  const startDate = searchParams.get(\"startDate\");\n  const endDate = searchParams.get(\"endDate\");\n\n  if (!productId) {\n    return NextResponse.json(\n      { error: \"productId is required\" },\n      { status: 400 }\n    );\n  }\n\n  if (!startDate || !endDate) {\n    return NextResponse.json(\n      { error: \"startDate and endDate are required\" },\n      { status: 400 }\n    );\n  }\n\n  const cookieStore = await cookies();\n  const cookieHeader = cookieStore\n    .getAll()\n    .map((cookie) => `${cookie.name}=${cookie.value}`)\n    .join(\"; \");\n\n  try {\n    const url = new URL(`${WP_URL}/wp-json/chirostretch/v1/bookings/slots`);\n    url.searchParams.set(\"productId\", productId);\n    url.searchParams.set(\"startDate\", startDate);\n    url.searchParams.set(\"endDate\", endDate);\n\n    const res = await fetch(url.toString(), {\n      method: \"GET\",\n      headers: {\n        ...(cookieHeader ? { cookie: cookieHeader } : {}),\n        \"Content-Type\": \"application/json\",\n      },\n      cache: \"no-store\",\n    });\n\n    if (!res.ok) {\n      const errorText = await res.text();\n      console.error(\"Slots API error:\", errorText);\n      return NextResponse.json(\n        { error: \"Failed to fetch slots\" },\n        { status: res.status }\n      );\n    }\n\n    const data = await res.json();\n    return NextResponse.json(data);\n  } catch (error) {\n    console.error(\"Error fetching slots:\", error);\n    return NextResponse.json(\n      { error: \"Failed to fetch slots\" },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,MAAM;AAEC,eAAe,IAAI,OAAoB;IAC5C,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;IAC5C,MAAM,YAAY,aAAa,GAAG,CAAC;IACnC,MAAM,YAAY,aAAa,GAAG,CAAC;IACnC,MAAM,UAAU,aAAa,GAAG,CAAC;IAEjC,IAAI,CAAC,WAAW;QACd,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAwB,GACjC;YAAE,QAAQ;QAAI;IAElB;IAEA,IAAI,CAAC,aAAa,CAAC,SAAS;QAC1B,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAqC,GAC9C;YAAE,QAAQ;QAAI;IAElB;IAEA,MAAM,cAAc,MAAM,IAAA,4IAAO;IACjC,MAAM,eAAe,YAClB,MAAM,GACN,GAAG,CAAC,CAAC,SAAW,GAAG,OAAO,IAAI,CAAC,CAAC,EAAE,OAAO,KAAK,EAAE,EAChD,IAAI,CAAC;IAER,IAAI;QACF,MAAM,MAAM,IAAI,IAAI,GAAG,OAAO,uCAAuC,CAAC;QACtE,IAAI,YAAY,CAAC,GAAG,CAAC,aAAa;QAClC,IAAI,YAAY,CAAC,GAAG,CAAC,aAAa;QAClC,IAAI,YAAY,CAAC,GAAG,CAAC,WAAW;QAEhC,MAAM,MAAM,MAAM,MAAM,IAAI,QAAQ,IAAI;YACtC,QAAQ;YACR,SAAS;gBACP,GAAI,eAAe;oBAAE,QAAQ;gBAAa,IAAI,CAAC,CAAC;gBAChD,gBAAgB;YAClB;YACA,OAAO;QACT;QAEA,IAAI,CAAC,IAAI,EAAE,EAAE;YACX,MAAM,YAAY,MAAM,IAAI,IAAI;YAChC,QAAQ,KAAK,CAAC,oBAAoB;YAClC,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAwB,GACjC;gBAAE,QAAQ,IAAI,MAAM;YAAC;QAEzB;QAEA,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yBAAyB;QACvC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAwB,GACjC;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}