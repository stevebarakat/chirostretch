{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/components/CMS/ChartBlock/ChartBlock.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"chartContainer\": \"ChartBlock-module__LW5KgG__chartContainer\",\n  \"title\": \"ChartBlock-module__LW5KgG__title\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA"}},
    {"offset": {"line": 11, "column": 0}, "map": {"version":3,"sources":["file:///Users/sb/Dev/chirostretch/src/components/CMS/ChartBlock/ChartBlock.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  LineChart,\n  Line,\n  BarChart,\n  Bar,\n  PieChart,\n  Pie,\n  Cell,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  Legend,\n  ResponsiveContainer,\n} from \"recharts\";\nimport styles from \"./ChartBlock.module.css\";\nimport type { ChartData } from \"./parseChartData\";\n\nconst FALLBACK_COLORS = [\"#8884d8\", \"#82ca9d\", \"#ffc658\", \"#ff7300\", \"#00C49F\", \"#FFBB28\"];\n\ntype ChartBlockProps = {\n  chartData: ChartData;\n};\n\n// Transform normalized data for Recharts\nfunction toRechartsData(chart: ChartData) {\n  return chart.labels.map((label, i) => {\n    const point: Record<string, string | number> = { name: label };\n    chart.data.forEach((dataset) => {\n      point[dataset.name] = dataset.values[i];\n    });\n    return point;\n  });\n}\n\nexport default function ChartBlock({ chartData }: ChartBlockProps) {\n  const data = toRechartsData(chartData);\n\n  const renderChart = () => {\n    switch (chartData.type) {\n      case \"bar\":\n        return (\n          <BarChart data={data}>\n            <CartesianGrid strokeDasharray=\"3 3\" />\n            <XAxis dataKey=\"name\" />\n            <YAxis />\n            <Tooltip />\n            <Legend />\n            {chartData.data.map((dataset, idx) => (\n              <Bar\n                key={dataset.name}\n                dataKey={dataset.name}\n                fill={dataset.borderColor?.[0] || FALLBACK_COLORS[idx % FALLBACK_COLORS.length]}\n              />\n            ))}\n          </BarChart>\n        );\n\n      case \"pie\":\n      case \"doughnut\":\n        const pieData = chartData.data[0]?.values.map((value, idx) => ({\n          name: chartData.labels[idx],\n          value,\n        }));\n        const pieColors = chartData.data[0]?.backgroundColor || FALLBACK_COLORS;\n        return (\n          <PieChart>\n            <Pie\n              data={pieData}\n              dataKey=\"value\"\n              nameKey=\"name\"\n              cx=\"50%\"\n              cy=\"50%\"\n              innerRadius={chartData.type === \"doughnut\" ? 60 : 0}\n              outerRadius={80}\n              label\n            >\n              {pieData?.map((_, index) => (\n                <Cell key={`cell-${index}`} fill={pieColors[index % pieColors.length]} />\n              ))}\n            </Pie>\n            <Tooltip />\n            <Legend />\n          </PieChart>\n        );\n\n      case \"line\":\n      default:\n        return (\n          <LineChart data={data}>\n            <CartesianGrid strokeDasharray=\"3 3\" />\n            <XAxis dataKey=\"name\" />\n            <YAxis />\n            <Tooltip />\n            <Legend />\n            {chartData.data.map((dataset, idx) => (\n              <Line\n                key={dataset.name}\n                type=\"monotone\"\n                dataKey={dataset.name}\n                stroke={dataset.borderColor?.[0] || FALLBACK_COLORS[idx % FALLBACK_COLORS.length]}\n                strokeWidth={2}\n              />\n            ))}\n          </LineChart>\n        );\n    }\n  };\n\n  return (\n    <div className={styles.chartContainer}>\n      <ResponsiveContainer width=\"100%\" height={400}>\n        {renderChart()}\n      </ResponsiveContainer>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAeA;AAjBA;;;;AAoBA,MAAM,kBAAkB;IAAC;IAAW;IAAW;IAAW;IAAW;IAAW;CAAU;AAM1F,yCAAyC;AACzC,SAAS,eAAe,KAAgB;IACtC,OAAO,MAAM,MAAM,CAAC,GAAG,CAAC,CAAC,OAAO;QAC9B,MAAM,QAAyC;YAAE,MAAM;QAAM;QAC7D,MAAM,IAAI,CAAC,OAAO,CAAC,CAAC;YAClB,KAAK,CAAC,QAAQ,IAAI,CAAC,GAAG,QAAQ,MAAM,CAAC,EAAE;QACzC;QACA,OAAO;IACT;AACF;AAEe,SAAS,WAAW,EAAE,SAAS,EAAmB;IAC/D,MAAM,OAAO,eAAe;IAE5B,MAAM,cAAc;QAClB,OAAQ,UAAU,IAAI;YACpB,KAAK;gBACH,qBACE,6LAAC,mKAAQ;oBAAC,MAAM;;sCACd,6LAAC,iLAAa;4BAAC,iBAAgB;;;;;;sCAC/B,6LAAC,iKAAK;4BAAC,SAAQ;;;;;;sCACf,6LAAC,iKAAK;;;;;sCACN,6LAAC,qKAAO;;;;;sCACR,6LAAC,mKAAM;;;;;wBACN,UAAU,IAAI,CAAC,GAAG,CAAC,CAAC,SAAS,oBAC5B,6LAAC,6JAAG;gCAEF,SAAS,QAAQ,IAAI;gCACrB,MAAM,QAAQ,WAAW,EAAE,CAAC,EAAE,IAAI,eAAe,CAAC,MAAM,gBAAgB,MAAM,CAAC;+BAF1E,QAAQ,IAAI;;;;;;;;;;;YAQ3B,KAAK;YACL,KAAK;gBACH,MAAM,UAAU,UAAU,IAAI,CAAC,EAAE,EAAE,OAAO,IAAI,CAAC,OAAO,MAAQ,CAAC;wBAC7D,MAAM,UAAU,MAAM,CAAC,IAAI;wBAC3B;oBACF,CAAC;gBACD,MAAM,YAAY,UAAU,IAAI,CAAC,EAAE,EAAE,mBAAmB;gBACxD,qBACE,6LAAC,mKAAQ;;sCACP,6LAAC,yJAAG;4BACF,MAAM;4BACN,SAAQ;4BACR,SAAQ;4BACR,IAAG;4BACH,IAAG;4BACH,aAAa,UAAU,IAAI,KAAK,aAAa,KAAK;4BAClD,aAAa;4BACb,KAAK;sCAEJ,SAAS,IAAI,CAAC,GAAG,sBAChB,6LAAC,+JAAI;oCAAuB,MAAM,SAAS,CAAC,QAAQ,UAAU,MAAM,CAAC;mCAA1D,CAAC,KAAK,EAAE,OAAO;;;;;;;;;;sCAG9B,6LAAC,qKAAO;;;;;sCACR,6LAAC,mKAAM;;;;;;;;;;;YAIb,KAAK;YACL;gBACE,qBACE,6LAAC,qKAAS;oBAAC,MAAM;;sCACf,6LAAC,iLAAa;4BAAC,iBAAgB;;;;;;sCAC/B,6LAAC,iKAAK;4BAAC,SAAQ;;;;;;sCACf,6LAAC,iKAAK;;;;;sCACN,6LAAC,qKAAO;;;;;sCACR,6LAAC,mKAAM;;;;;wBACN,UAAU,IAAI,CAAC,GAAG,CAAC,CAAC,SAAS,oBAC5B,6LAAC,+JAAI;gCAEH,MAAK;gCACL,SAAS,QAAQ,IAAI;gCACrB,QAAQ,QAAQ,WAAW,EAAE,CAAC,EAAE,IAAI,eAAe,CAAC,MAAM,gBAAgB,MAAM,CAAC;gCACjF,aAAa;+BAJR,QAAQ,IAAI;;;;;;;;;;;QAS7B;IACF;IAEA,qBACE,6LAAC;QAAI,WAAW,8KAAM,CAAC,cAAc;kBACnC,cAAA,6LAAC,6LAAmB;YAAC,OAAM;YAAO,QAAQ;sBACvC;;;;;;;;;;;AAIT;KAjFwB"}},
    {"offset": {"line": 229, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/components/CMS/GravityFormBlock/GravityFormBlock.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"confirmation\": \"GravityFormBlock-module__1DbFFa__confirmation\",\n  \"confirmationContent\": \"GravityFormBlock-module__1DbFFa__confirmationContent\",\n  \"confirmationIcon\": \"GravityFormBlock-module__1DbFFa__confirmationIcon\",\n  \"error\": \"GravityFormBlock-module__1DbFFa__error\",\n  \"formBlock\": \"GravityFormBlock-module__1DbFFa__formBlock\",\n  \"formTitle\": \"GravityFormBlock-module__1DbFFa__formTitle\",\n  \"loading\": \"GravityFormBlock-module__1DbFFa__loading\",\n  \"spin\": \"GravityFormBlock-module__1DbFFa__spin\",\n  \"spinner\": \"GravityFormBlock-module__1DbFFa__spinner\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 244, "column": 0}, "map": {"version":3,"sources":["file:///Users/sb/Dev/chirostretch/src/components/CMS/GravityFormBlock/GravityFormBlock.tsx"],"sourcesContent":["\"use client\";\n\n// eslint-disable-next-line no-restricted-imports\nimport { useEffect, useState } from \"react\";\nimport type { Block } from \"../BlockRenderer\";\nimport { GravityFormEnhanced } from \"@/components/GravityForms/GravityFormEnhanced\";\nimport styles from \"./GravityFormBlock.module.css\";\n\ntype GravityFormBlockProps = {\n  block: Block;\n};\n\ntype GravityFormData = {\n  title?: string;\n  description?: string;\n  [key: string]: unknown;\n};\n\ntype GravityForm = GravityFormData & {\n  gfForm?: GravityFormData;\n};\n\ntype FormState = {\n  status: \"loading\" | \"error\" | \"ready\" | \"submitted\";\n  form: GravityForm | null;\n  error: string | null;\n  submissionResponse: SubmissionResponse | null;\n};\n\ntype SubmissionResponse = {\n  success?: boolean;\n  confirmation_message?: string;\n  confirmation_type?: \"MESSAGE\" | \"PAGE\" | \"REDIRECT\";\n  confirmation_url?: string;\n  entry_id?: number;\n};\n\nexport default function GravityFormBlock({ block }: GravityFormBlockProps) {\n  const formId = block.attributes?.formId as string | number | undefined;\n  const [state, setState] = useState<FormState>({\n    status: \"loading\",\n    form: null,\n    error: null,\n    submissionResponse: null,\n  });\n\n  // Reason this component must use useEffect:\n  // - Syncing with external API (Gravity Forms endpoint) when formId changes\n  // - Server Components cannot handle client-side API calls with dynamic parameters\n  // - This is a side effect that must run when formId dependency changes\n  useEffect(() => {\n    if (!formId) {\n      setState({\n        status: \"error\",\n        form: null,\n        error: \"No form ID provided\",\n        submissionResponse: null,\n      });\n      return;\n    }\n\n    async function fetchForm() {\n      try {\n        const response = await fetch(`/api/gravity-forms/${formId}`);\n\n        if (!response.ok) {\n          const data = await response.json();\n          throw new Error(data.error || \"Failed to load form\");\n        }\n\n        const form = await response.json();\n        setState({\n          status: \"ready\",\n          form,\n          error: null,\n          submissionResponse: null,\n        });\n      } catch (error) {\n        setState({\n          status: \"error\",\n          form: null,\n          error: error instanceof Error ? error.message : \"Failed to load form\",\n          submissionResponse: null,\n        });\n      }\n    }\n\n    fetchForm();\n  }, [formId]);\n\n  if (state.status === \"loading\") {\n    return (\n      <div className={styles.loading}>\n        <div className={styles.spinner} />\n        <span>Loading form...</span>\n      </div>\n    );\n  }\n\n  if (state.status === \"error\") {\n    return (\n      <div className={styles.error}>\n        <p>{state.error || \"Failed to load form\"}</p>\n      </div>\n    );\n  }\n\n  // Show confirmation screen after successful submission\n  if (state.status === \"submitted\" && state.submissionResponse) {\n    const { confirmation_message, confirmation_type, confirmation_url } =\n      state.submissionResponse;\n\n    // Handle redirect confirmation\n    if (confirmation_type === \"REDIRECT\" && confirmation_url) {\n      window.location.href = confirmation_url;\n      return null;\n    }\n\n    return (\n      <div className={styles.confirmation}>\n        <div className={styles.confirmationIcon}>âœ“</div>\n        {confirmation_message ? (\n          <div\n            className={styles.confirmationContent}\n            dangerouslySetInnerHTML={{ __html: confirmation_message }}\n          />\n        ) : (\n          <p className={styles.confirmationContent}>\n            Thank you for your submission!\n          </p>\n        )}\n      </div>\n    );\n  }\n\n  if (!state.form) {\n    return (\n      <div className={styles.error}>\n        <p>Failed to load form</p>\n      </div>\n    );\n  }\n\n  const numericFormId =\n    typeof formId === \"string\" ? parseInt(formId, 10) : formId;\n\n  // Form data might be nested under gfForm (GraphQL) or at top level (REST)\n  const formData = (state.form?.gfForm || state.form) as\n    | GravityFormData\n    | undefined;\n  const formTitle = formData?.title;\n\n  return (\n    <div className={styles.formBlock}>\n      {formTitle && <h3 className={styles.formTitle}>{formTitle}</h3>}\n      <GravityFormEnhanced\n        form={state.form}\n        formId={numericFormId}\n        onSubmitSuccess={(response) => {\n          setState({\n            ...state,\n            status: \"submitted\",\n            submissionResponse: response as SubmissionResponse,\n          });\n          // Scroll to top to show confirmation\n          window.scrollTo({ top: 0, behavior: \"smooth\" });\n        }}\n      />\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}