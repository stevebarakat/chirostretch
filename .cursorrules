{
  "mode": "STRICT",

  "NORMAL": {
    "description": "Daily development mode. Reasonable defaults with low friction.",
    "rules": [
      "Prefer modern CSS over JavaScript for layout and UI behavior",
      "CSS Modules are the default styling system",
      "Server Components by default",
      "Use 'use client' only when interactivity or browser APIs are required",
      "Avoid unnecessary useEffect; prefer event handlers",
      "Prefer native HTML primitives where practical"
    ]
  },

  "STRICT": {
    "description": "Architecture and refactor mode. Enforce CSS-first, JS-last discipline.",
    "rules": [
      "JavaScript must not be used for layout, responsiveness, or styling",
      "If modern CSS or native HTML can solve it, JavaScript must not be added",
      "Avoid ResizeObserver, scroll listeners, and DOM measurement",
      "Animate only transform and opacity",
      "Every 'use client' must be justified",
      "Default to Server Components",
      "Prefer native HTML primitives (<dialog>, <details>, Popover API) over custom JS UI and Radix components."
    ]
  },

  "DEBUG": {
    "description": "Maximum enforcement. Use when Cursor violates constraints.",
    "rules": [
      "Default assumption: JavaScript is unnecessary",
      "JavaScript is forbidden unless explicitly justified",
      "Do not add ResizeObserver, scroll listeners, or layout measurement",
      "Do not recreate modals, accordions, tabs, or focus traps in JavaScript",
      "Do not add JavaScript whose only purpose is toggling classes or styles",
      "Explain in comments why JavaScript is required",
      "Prefer solutions that work with minimal or no JavaScript",
      "Radix components must be justified with a comment explaining why native HTML is insufficient."
    ]
  },

  "globalRules": [
    "CSS Modules only (no Tailwind)",
    "HSL color space",
    "Modern CSS features are encouraged (container queries, :has(), light-dark(), color-mix())",
    "Headless WordPress via WPGraphQL only",
    "Always use next/image with WordPress sourceUrl directly",
    "Avoid client components unless necessary",
    "Avoid JS UI libraries that duplicate native HTML/CSS behavior",
    "Do not add 'cursor: pointer' to button styles - it is already set globally in reset.css for all button elements"
  ],

  "codePrinciples": {
  "paradigm": "functional",
  "rules": [
    "Prefer immutability and pure functions",
    "Enforce single responsibility per component and function",
    "Components must not exceed 200 lines",
    "Functions must not exceed 50 lines",
    "Colocate related files (component, styles, types, tests, utils)",
    "Prefer self-documenting code with meaningful names",
    "Avoid unnecessary comments"
  ]
},

"typescriptPreferences": {
  "strict": true,
  "rules": [
    "Prefer type over interface",
    "Use function declarations for top-level functions",
    "Avoid any; use unknown if necessary",
    "Use GraphQL Codegen types for all API data"
  ]
},

  "forbiddenJavaScriptPatterns": [
    "ResizeObserver for layout or responsiveness",
    "getBoundingClientRect / offsetWidth / clientHeight for layout",
    "Scroll event listeners for animation",
    "Manual focus trapping",
    "JS-driven accordions, modals, or tabs",
    "Theme toggling implemented only in JavaScript",
    "Color math utilities in JavaScript",
    "Pure class or inline style toggling"
  ],

  "allowedJavaScriptIntent": [
    "Data fetching and mutations (GraphQL, webhooks, revalidation)",
    "Application state (auth, cart, session, optimistic updates)",
    "Form submission, validation, and async flows",
    "URL state (filters, pagination, tabs)",
    "Progressive enhancement of native HTML",
    "Non-visual business logic (pricing, permissions, feature flags)",
    "Third-party integrations (analytics, payments, embeds)"
  ],

  "htmlPrimitives": {
    "preferFirst": [
      "<dialog>",
      "<details>",
      "Popover API",
      ":focus-visible",
      "Native form controls"
    ]
  },

  "uiPrimitivesPolicy": {
  "defaultRule": "Use native HTML primitives and modern CSS before introducing JavaScript UI libraries.",

  "nativeFirst": {
    "modal": "<dialog>",
    "popover": "Popover API",
    "accordion": "<details>/<summary>",
    "focus": ":focus-visible"
  },

  "rules": [
    "Native HTML primitives must be attempted before using Radix components.",
    "Radix components are allowed only when native primitives cannot satisfy requirements.",
    "Do not recreate native HTML behavior using JavaScript.",
    "JavaScript may orchestrate native primitives (open/close, state sync), but must not replace them."
  ],

  "radixUsageAllowedOnlyWhen": [
    "Complex animation choreography not achievable with CSS",
    "Advanced composition or controlled state across multiple primitives",
    "Portals or layering requirements native primitives cannot express",
    "Tabs or composite widgets without a strong native equivalent"
  ],

  "radixUsageForbiddenWhen": [
    "Native <dialog> can satisfy modal requirements",
    "Popover API can satisfy menu or tooltip requirements",
    "<details>/<summary> can satisfy accordion requirements",
    "Radix is used only out of habit or convenience"
  ]
},

  "clientComponentJustification": {
    "required": true,
    "template": [
      "Reason this component must be a client component:",
      "- What interactivity or browser API is required?",
      "- Why Server Components are insufficient?",
      "- Why modern CSS or native HTML cannot solve this?"
    ]
  },

  "reactRefs": {
    "rules": [
      "Do NOT use React.forwardRef",
      "React 19 treats `ref` as a normal prop on function components",
      "Accept `ref` directly in component props and pass it to the appropriate DOM element",
      "Use `useImperativeHandle` ONLY when exposing imperative APIs is unavoidable",
      "Legacy forwardRef patterns should not be introduced or copied"
    ]
  },

  "reactRefsExample": [
    "function Input({ ref, ...props }: React.ComponentProps<'input'> & { ref?: React.Ref<HTMLInputElement> }) {",
    "  return <input ref={ref} {...props} />",
    "}"
  ],

  "polymorphismRule": {
    "description": "Polymorphism is for element identity (semantics), not behavior (attributes). The `as` prop answers 'What kind of element is this?' and must be constrained to a small, intentional set of semantically equivalent elements that share the same ARIA role, keyboard behavior, and ref type. Attributes like `type`, `variant`, or `size` answer 'How should this element behave?' and belong as props, not on the polymorphic axis. For example, `type='email'` and `type='password'` are both `<input>` elements with different behaviorsâ€”they are not different element types. Create polymorphic components only when multiple render targets are semantically equivalent and interchangeable (e.g., Button supports `button` and `a` because both represent actionable triggers). Do not create separate components for attribute variations (e.g., EmailInput, PasswordInput); instead, compose behavior via props on a single polymorphic component. Avoid unconstrained polymorphism (`as?: React.ElementType`). This keeps the component library smaller, more accessible, and easier to reason about."
  }

}
