# ==========================================
# Cursor Project Rules
# Headless WordPress + Next.js App Router
# ChiroStretch Configuration (Slim)
# ==========================================

project:
  description: >
    Fully branded Headless WordPress → Next.js App Router implementation for
    ChiroStretch. Rules cover design, code style, headless integration,
    content modeling, and architecture.

# ------------------------------------------
# STYLING
# ------------------------------------------
styling:
  colorFormat: hsl
  cssFramework: css-modules
  respectGlobalStyles: true
  avoid:
    - tailwindcss

# ------------------------------------------
# CODE GENERATION
# ------------------------------------------
codeGeneration:
  preferredPackages:
    - postcss
    - autoprefixer
    - postcss-preset-env
    - stylelint
    - stylelint-order
    - stylelint-config-standard
    - react-router-dom
    - zustand
    - zod

documentation:
  includeComments: false

# ------------------------------------------
# TYPESCRIPT
# ------------------------------------------
typescript:
  preferTypes: true
  preferFunctionDeclarations: true

# ------------------------------------------
# REACT RULES
# ------------------------------------------
react:
  preferComponentProps: true
  preferEventHandlers: true

  useEffect:
    guideline: >
      useEffect is for syncing with external systems (APIs, Web Audio, etc.),
      not for basic UI event handling.
    dependencies: >
      One concern per effect. Split large or mixed-responsibility effects into
      smaller ones.

# ------------------------------------------
# WORDPRESS (HEADLESS)
# ------------------------------------------
wordpress:
  mode: headless

  preferredPackages:
    - wp-graphql
    - wp-graphql-gravity-forms
    - wp-graphql-acf
    - wp-graphql-stripe
    - wp-graphql-jwt-auth
    - wp-graphql-blocks

  media:
    conventions:
      folderStructure:
        - chirostretch/images
        - chirostretch/products
        - chirostretch/events
        - chirostretch/blog
      namingGuidelines: kebab-case

  contentEditing:
    useBlockEditor: true
    rationale: >
      Use Gutenberg for all structured content to leverage wp-graphql-blocks
      and block-level data instead of classic HTML blobs.

    conversionGuidelines:
      pages: >
        Convert Pages to blocks. Page layouts map cleanly to React components
        and benefit most from structured block data.
      posts: >
        Posts may remain classic unless block-level structure is needed.
      products: >
        WooCommerce descriptions can remain simple; block structure is optional.

    headlessIntegration:
      renderStrategy: component-map
      description: >
        Map each Gutenberg block type to a React component
        (core/paragraph → ParagraphBlock, core/image → ImageBlock, etc.)
        for consistent, predictable rendering.

  customPostTypes:
    - events
    - registrations

  customTaxonomies:
    - event-category
    - event-tag
    - event-location

  customFields:
    - event-featured-image
    - event-start-date
    - event-end-date
    - event-location
    - event-capacity
    - event-current-registrations
    - event-status

  preview:
    enable: true
    route: /api/preview
    secret: use-environment-variable
    exitRoute: /api/exit-preview
    tokenExpiration: 3600
    supportDraft: true
    supportRevisions: true

  redirects:
    handleInternalLinks: true
    redirectWordPressPermalinks: true
    redirectToNextJsRoutes: true
    strategy: middleware
    preserveQueryParams: true
    statusCode: 307
    excludedPaths:
      - /wp-admin
      - /wp-content
      - /wp-includes

# ------------------------------------------
# NEXT.JS RULES
# ------------------------------------------
nextjs:
  style: app-router

  preferredPackages:
    - next
    - zustand
    - zod
    - stripe
    - react-hook-form
    - date-fns
    - lucide-react

  revalidation:
    onDemand: true
    strategy: isr
    route: /api/revalidate
    secret: use-environment-variable
    revalidateOnContentUpdate: true
    revalidateOnPublish: true
    revalidateOnUnpublish: true

# ------------------------------------------
# UI RULES
# ------------------------------------------
ui:
  iconLibrary: lucide

# ------------------------------------------
# PROGRAMMING PARADIGM
# ------------------------------------------
programming:
  paradigm: functional
  preferImmutability: true
  preferPureFunctions: true
  avoidSideEffects: true

# ------------------------------------------
# STRUCTURE & ORGANIZATION
# ------------------------------------------
structure:
  colocateFiles: true
  colocationDescription: >
    Colocate components, styles, hooks, stores, and utilities by feature/domain.
  indexFileForComponents: true
  indexFileDescription: >
    Export components via index.ts for clean import paths.

# ------------------------------------------
# SINGLE RESPONSIBILITY PRINCIPLES
# ------------------------------------------
principles:
  singleResponsibility:
    enforceComponentSeparation: true
    maxComponentLines: 200
    maxFunctionLines: 50
    preferPureFunctions: true

# ------------------------------------------
# TESTING STRATEGY
# ------------------------------------------
testing:
  focusOnBehavior: true
  avoidImplementationDetails: true

  layeredStrategy:
    unitTests:
      ui: >
        Use React Testing Library for component behavior. Assert rendered output
        and interactions, not internal implementation details.
      utilities: >
        Test utility functions directly with representative inputs.
    integrationTests:
      headlessFlows: >
        Test end-to-end flows: WordPress content → WPGraphQL → Next.js page
        rendering, including ISR revalidation behavior.

# ===================================================
# CHIROSTRETCH — BRANDING & DOMAIN MODEL (SLIM)
# ===================================================

chirostretch:
  brand:
    name: ChiroStretch
    tagline: "Global Mobility. Smarter Movement. Better Living."
    description: >
      Fictional global chiropractic wellness network used to demonstrate modern,
      high-performance Headless WordPress + Next.js builds, with an emphasis on
      mobility, assisted stretching, and spinal longevity.
    tone: >
      Confident, global, modern, health-forward. Avoid “local clinic” vibes and
      exaggerated medical claims.
    voiceGuidelines:
      - Use strong, concise statements.
      - Emphasize mobility science and global reach.
      - Prefer clarity over hype.

  domainModel:
    siteSections:
      - home
      - about
      - blog
      - events
      - training-and-certification
      - wellness-equipment-shop
      - franchise-opportunities
      - global-clinic-locations
      - webinars
      - partners
      - contact

    contentTypes:
      blogPosts:
        themes:
          - mobility science
          - spinal longevity
          - global wellness
          - posture and ergonomics
          - assisted stretching
          - rehabilitation tools
          - chiropractic education

      events:
        description: >
          Includes workshops, certifications, conferences, and virtual/in-person
          mobility training.
        properties:
          - title
          - event-start-date
          - event-end-date
          - event-location
          - event-capacity
          - event-status
          - event-featured-image
        defaultStatusWorkflow:
          - scheduled
          - registration-open
          - sold-out
          - completed
          - archived
        namingConvention: "City + Event Type (e.g., 'Berlin Mobility Summit')"

      products:
        categories:
          - Mobility Tools
          - Rehabilitation Accessories
          - Chiropractic Equipment
          - Resistance Bands
          - Recovery Rollers
          - Ergonomics & Posture Support
        productTone: >
          Focus on biomechanics, usefulness, durability, and integration with
          assisted stretching protocols.

      training:
        courseTypes:
          - Certified Mobility Specialist (CMS)
          - Assisted Stretching Level 1
          - Assisted Stretching Level 2
          - Global Chiropractic Techniques
        courseProperties:
          - title
          - certification-level
          - duration
          - syllabus
          - outcomes
          - exam-requirements

      franchise:
        messagingPillars:
          - Standardized clinical systems
          - Global operational support
          - Efficient practitioner onboarding
          - Scalable mobility training platform

    componentNaming:
      guidelines: >
        Components should be domain-aware and descriptive (e.g., EventCard,
        TrainingCourseOutline, MobilityToolSpecs). Avoid vague names like
        Widget, Box, or MainComponent.

    seo:
      primaryKeywords:
        - chiropractic wellness
        - global mobility training
        - assisted stretching
        - spinal longevity
        - rehabilitation tools
        - chiropractic education
        - mobility certification
      metaDescriptionGuideline: >
        140–160 characters, global tone, emphasizing wellness, mobility, and
        evidence-based training.

    navigation:
      globalNav:
        - Home
        - Training & Certification
        - Events
        - Wellness Equipment Shop
        - Franchise Opportunities
        - Blog
        - Contact

    imageryGuidelines:
      themes:
        - global maps and networks
        - dynamic movement poses
        - modern clinic aesthetics
        - diverse human models in motion
      avoid:
        - cliché chiropractor “spine holding” imagery
        - hyper-medical or outdated stock photos

    callToActions:
      primary:
        - Join a Global Event
        - Explore Certification
        - Shop Mobility Tools
        - Become a Franchise Partner
        - Read the Wellness Blog
      tone: >
        Empowering, global, movement-forward. Not pushy or aggressive.
